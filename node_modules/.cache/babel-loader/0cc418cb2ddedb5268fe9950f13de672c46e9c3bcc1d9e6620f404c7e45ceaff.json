{"ast":null,"code":"import { invariant } from '@onflow/util-invariant';\nimport 'buffer';\nimport * as logger from '@onflow/util-logger';\nimport fetchTransport from 'cross-fetch';\nimport { sansPrefix } from '@onflow/util-address';\nconst AbortController = globalThis.AbortController || require(\"abort-controller\");\nclass HTTPRequestError extends Error {\n  constructor(_ref) {\n    let {\n      error,\n      hostname,\n      path,\n      method,\n      requestBody,\n      responseBody,\n      responseStatusText,\n      statusCode\n    } = _ref;\n    const msg = `\n      HTTP Request Error: An error occurred when interacting with the Access API.\n      ${error ? `error=${error}` : \"\"}\n      ${hostname ? `hostname=${hostname}` : \"\"}\n      ${path ? `path=${path}` : \"\"}\n      ${method ? `method=${method}` : \"\"}\n      ${requestBody ? `requestBody=${requestBody}` : \"\"}\n      ${responseBody ? `responseBody=${responseBody}` : \"\"}\n      ${responseStatusText ? `responseStatusText=${responseStatusText}` : \"\"}\n      ${statusCode ? `statusCode=${statusCode}` : \"\"}\n    `;\n    super(msg);\n    this.name = \"HTTP Request Error\";\n    this.statusCode = statusCode;\n    this.errorMessage = error;\n  }\n}\n\n/**\n * Creates an HTTP Request to be sent to a REST Access API via Fetch API.\n *\n * @param {object} options - Options for the HTTP Request\n * @param {String} options.hostname - Access API Hostname\n * @param {String} options.path - Path to the resource on the Access API\n * @param {String} options.method - HTTP Method\n * @param {object} options.body - HTTP Request Body\n * @param {object} [options.headers] - HTTP Request Headers\n *\n * @returns JSON object response from Access API.\n */\nasync function httpRequest(_ref2) {\n  let {\n    hostname,\n    path,\n    method,\n    body,\n    headers,\n    retryLimit = 5,\n    retryIntervalMs = 1000,\n    timeoutLimit = 30000\n  } = _ref2;\n  const bodyJSON = body ? JSON.stringify(body) : null;\n  function makeRequest() {\n    const controller = new AbortController();\n    const fetchTimeout = setTimeout(() => {\n      controller.abort();\n    }, timeoutLimit);\n    return fetchTransport(`${hostname}${path}`, {\n      method: method,\n      body: bodyJSON,\n      headers,\n      signal: controller.signal\n    }).then(async res => {\n      if (res.ok) {\n        return res.json();\n      }\n      const responseText = res.body ? await res.text() : null;\n      const response = safeParseJSON(responseText);\n      throw new HTTPRequestError({\n        error: response?.message,\n        hostname,\n        path,\n        method,\n        requestBody: bodyJSON,\n        responseBody: responseText,\n        responseStatusText: res.statusText,\n        statusCode: res.status\n      });\n    }).catch(async e => {\n      if (e instanceof HTTPRequestError) {\n        throw e;\n      }\n      if (e.name === \"AbortError\") {\n        throw e;\n      }\n\n      // Show AN error for all network errors\n      await logger.log({\n        title: \"Access Node Error\",\n        message: `The provided access node ${hostname} does not appear to be a valid REST/HTTP access node.\nPlease verify that you are not unintentionally using a GRPC access node.\nSee more here: https://docs.onflow.org/fcl/reference/sdk-guidelines/#connect`,\n        level: logger.LEVELS.error\n      });\n      throw new HTTPRequestError({\n        error: e?.message,\n        hostname,\n        path,\n        method,\n        requestBody: bodyJSON\n      });\n    }).finally(() => {\n      clearTimeout(fetchTimeout);\n    });\n  }\n  async function requestLoop() {\n    let retryAttempt = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    try {\n      const resp = await makeRequest();\n      return resp;\n    } catch (error) {\n      const retryStatusCodes = [408, 429, 500, 502, 503, 504];\n      if (error.name === \"AbortError\" || retryStatusCodes.includes(error.statusCode)) {\n        return await new Promise((resolve, reject) => {\n          if (retryAttempt < retryLimit) {\n            console.warn(`Access node unavailable, retrying in ${retryIntervalMs} ms...`);\n            setTimeout(() => {\n              resolve(requestLoop(retryAttempt + 1));\n            }, retryIntervalMs);\n          } else {\n            reject(error);\n          }\n        });\n      } else {\n        throw error;\n      }\n    }\n  }\n\n  // Keep retrying request until server available or max attempts exceeded\n  return await requestLoop();\n}\nfunction safeParseJSON(data) {\n  try {\n    return JSON.parse(data);\n  } catch {\n    return null;\n  }\n}\nasync function sendExecuteScriptAtBlockIDRequest(ix, context, opts) {\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/scripts?block_id=${ix.block.id}`,\n    method: \"POST\",\n    body: {\n      script: context.Buffer.from(ix.message.cadence).toString(\"base64\"),\n      arguments: ix.message.arguments.map(arg => context.Buffer.from(JSON.stringify(ix.arguments[arg].asArgument)).toString(\"base64\"))\n    }\n  });\n  return constructResponse$4(ix, context, res);\n}\nasync function sendExecuteScriptAtBlockHeightRequest(ix, context, opts) {\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/scripts?block_height=${ix.block.height}`,\n    method: \"POST\",\n    body: {\n      script: context.Buffer.from(ix.message.cadence).toString(\"base64\"),\n      arguments: ix.message.arguments.map(arg => context.Buffer.from(JSON.stringify(ix.arguments[arg].asArgument)).toString(\"base64\"))\n    }\n  });\n  return constructResponse$4(ix, context, res);\n}\nasync function sendExecuteScriptAtLatestBlockRequest(ix, context, opts) {\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/scripts?block_height=sealed`,\n    method: \"POST\",\n    body: {\n      script: context.Buffer.from(ix.message.cadence).toString(\"base64\"),\n      arguments: ix.message.arguments.map(arg => context.Buffer.from(JSON.stringify(ix.arguments[arg].asArgument)).toString(\"base64\"))\n    }\n  });\n  return constructResponse$4(ix, context, res);\n}\nfunction constructResponse$4(ix, context, res) {\n  let ret = context.response();\n  ret.tag = ix.tag;\n  ret.encodedData = JSON.parse(context.Buffer.from(res, \"base64\").toString());\n  return ret;\n}\nasync function sendExecuteScript(ix) {\n  let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  invariant(opts.node, `SDK Send Execute Script Error: opts.node must be defined.`);\n  invariant(context.response, `SDK Send Execute Script Error: context.response must be defined.`);\n  invariant(context.Buffer, `SDK Send Execute Script Error: context.Buffer must be defined.`);\n  ix = await ix;\n  if (ix.block.id) {\n    return await sendExecuteScriptAtBlockIDRequest(ix, context, opts);\n  } else if (ix.block.height) {\n    return await sendExecuteScriptAtBlockHeightRequest(ix, context, opts);\n  } else {\n    return await sendExecuteScriptAtLatestBlockRequest(ix, context, opts);\n  }\n}\nconst HashAlgorithmIDs = {\n  SHA2_256: 1,\n  SHA2_384: 2,\n  SHA3_256: 3,\n  SHA3_384: 4,\n  KMAC128_BLS_BLS12_381: 5\n};\nconst SignatureAlgorithmIDs = {\n  ECDSA_P256: 1,\n  ECDSA_secp256k1: 2,\n  BLS_BLS12_381: 3\n};\nasync function sendGetAccountAtBlockHeightRequest(ix, context, opts) {\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/accounts/${ix.account.addr}?block_height=${ix.block.height}&expand=contracts,keys`,\n    method: \"GET\",\n    body: null\n  });\n  return constructResponse$3(ix, context, res);\n}\nasync function sendGetAccountAtLatestBlockRequest(ix, context, opts) {\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/accounts/${ix.account.addr}?block_height=sealed&expand=contracts,keys`,\n    method: \"GET\",\n    body: null\n  });\n  return constructResponse$3(ix, context, res);\n}\nfunction constructResponse$3(ix, context, res) {\n  let ret = context.response();\n  ret.tag = ix.tag;\n  const unwrapContracts = contracts => {\n    const c = {};\n    if (!contracts) return c;\n    for (let key of Object.keys(contracts)) {\n      c[key] = context.Buffer.from(contracts[key], \"base64\").toString();\n    }\n    return c;\n  };\n  ret.account = {\n    address: res.address,\n    balance: Number(res.balance),\n    code: \"\",\n    contracts: unwrapContracts(res.contracts),\n    keys: res.keys?.map(key => ({\n      index: Number(key.index),\n      publicKey: key.public_key.replace(/^0x/, \"\"),\n      signAlgo: SignatureAlgorithmIDs[key.signing_algorithm],\n      signAlgoString: key.signing_algorithm,\n      hashAlgo: HashAlgorithmIDs[key.hashing_algorithm],\n      hashAlgoString: key.hashing_algorithm,\n      sequenceNumber: Number(key.sequence_number),\n      weight: Number(key.weight),\n      revoked: key.revoked\n    })) ?? []\n  };\n  return ret;\n}\nasync function sendGetAccount(ix) {\n  let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  invariant(opts.node, `SDK Send Get Account Error: opts.node must be defined.`);\n  invariant(context.response, `SDK Send Get Account Error: context.response must be defined.`);\n  invariant(context.Buffer, `SDK Send Get Account Error: context.Buffer must be defined.`);\n  ix = await ix;\n  if (ix.block.height !== null) {\n    return await sendGetAccountAtBlockHeightRequest(ix, context, opts);\n  } else {\n    return await sendGetAccountAtLatestBlockRequest(ix, context, opts);\n  }\n}\nasync function sendGetBlockHeaderByIDRequest(ix, context, opts) {\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/blocks/${ix.block.id}`,\n    method: \"GET\",\n    body: null\n  });\n  return constructResponse$2(ix, context, res);\n}\nasync function sendGetBlockHeaderByHeightRequest(ix, context, opts) {\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/blocks?height=${ix.block.height}`,\n    method: \"GET\",\n    body: null\n  });\n  return constructResponse$2(ix, context, res);\n}\nasync function sendGetLatestBlockHeaderRequest(ix, context, opts) {\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  const height = ix.block?.isSealed ? \"sealed\" : \"final\";\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/blocks?height=${height}`,\n    method: \"GET\",\n    body: null\n  });\n  return constructResponse$2(ix, context, res);\n}\nfunction constructResponse$2(ix, context, res) {\n  const block = res.length ? res[0] : null;\n  const ret = context.response();\n  ret.tag = ix.tag;\n  ret.blockHeader = {\n    id: block.header.id,\n    parentId: block.header.parent_id,\n    height: Number(block.header.height),\n    timestamp: block.header.timestamp\n  };\n  return ret;\n}\nasync function sendGetBlockHeader(ix) {\n  let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  invariant(opts.node, `SDK Send Get Block Header Error: opts.node must be defined.`);\n  invariant(context.response, `SDK Send Get Block Header Error: context.response must be defined.`);\n  ix = await ix;\n  const interactionHasBlockID = ix.block.id !== null;\n  const interactionHasBlockHeight = ix.block.height !== null;\n  if (interactionHasBlockID) {\n    return await sendGetBlockHeaderByIDRequest(ix, context, opts);\n  } else if (interactionHasBlockHeight) {\n    return await sendGetBlockHeaderByHeightRequest(ix, context, opts);\n  } else {\n    return await sendGetLatestBlockHeaderRequest(ix, context, opts);\n  }\n}\nasync function sendGetBlockByIDRequest(ix, context, opts) {\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/blocks/${ix.block.id}?expand=payload`,\n    method: \"GET\",\n    body: null\n  });\n  return constructResponse$1(ix, context, res);\n}\nasync function sendGetBlockByHeightRequest(ix, context, opts) {\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/blocks?height=${ix.block.height}&expand=payload`,\n    method: \"GET\",\n    body: null\n  });\n  return constructResponse$1(ix, context, res);\n}\nasync function sendGetBlockRequest(ix, context, opts) {\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  const height = ix.block?.isSealed ? \"sealed\" : \"final\";\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/blocks?height=${height}&expand=payload`,\n    method: \"GET\",\n    body: null\n  });\n  return constructResponse$1(ix, context, res);\n}\nfunction constructResponse$1(ix, context, res) {\n  const block = res.length ? res[0] : null;\n  const ret = context.response();\n  ret.tag = ix.tag;\n  ret.block = {\n    id: block.header.id,\n    parentId: block.header.parent_id,\n    height: Number(block.header.height),\n    timestamp: block.header.timestamp,\n    collectionGuarantees: block.payload.collection_guarantees.map(collectionGuarantee => ({\n      collectionId: collectionGuarantee.collection_id,\n      signerIds: collectionGuarantee.signer_ids\n    })),\n    blockSeals: block.payload.block_seals.map(blockSeal => ({\n      blockId: blockSeal.block_id,\n      executionReceiptId: blockSeal.result_id\n    }))\n  };\n  return ret;\n}\nasync function sendGetBlock(ix) {\n  let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  invariant(opts.node, `SDK Send Get Block Error: opts.node must be defined.`);\n  invariant(context.response, `SDK Send Get Block Error: context.response must be defined.`);\n  ix = await ix;\n  const interactionHasBlockID = ix.block.id !== null;\n  const interactionHasBlockHeight = ix.block.height !== null;\n  if (interactionHasBlockID) {\n    return await sendGetBlockByIDRequest(ix, context, opts);\n  } else if (interactionHasBlockHeight) {\n    return await sendGetBlockByHeightRequest(ix, context, opts);\n  } else {\n    return await sendGetBlockRequest(ix, context, opts);\n  }\n}\nasync function sendGetCollection(ix) {\n  let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  invariant(opts.node, `SDK Send Get Collection Error: opts.node must be defined.`);\n  invariant(context.response, `SDK Send Get Collection Error: context.response must be defined.`);\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/collections/${ix.collection.id}?expand=transactions`,\n    method: \"GET\",\n    body: null\n  });\n  const ret = context.response();\n  ret.tag = ix.tag;\n  ret.collection = {\n    id: res.id,\n    transactionIds: res.transactions.map(transaction => transaction.id)\n  };\n  return ret;\n}\nasync function sendGetEventsForHeightRangeRequest(ix, context, opts) {\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/events?type=${ix.events.eventType}&start_height=${ix.events.start}&end_height=${ix.events.end}`,\n    method: \"GET\",\n    body: null\n  });\n  return constructResponse(ix, context, res);\n}\nasync function sendGetEventsForBlockIDsRequest(ix, context, opts) {\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/events?type=${ix.events.eventType}&block_ids=${ix.events.blockIds.join(\",\")}`,\n    method: \"GET\",\n    body: null\n  });\n  return constructResponse(ix, context, res);\n}\nfunction constructResponse(ix, context, res) {\n  let ret = context.response();\n  ret.tag = ix.tag;\n  ret.events = [];\n  res.forEach(block => block.events ? block.events.forEach(event => ret.events.push({\n    blockId: block.block_id,\n    blockHeight: Number(block.block_height),\n    blockTimestamp: block.block_timestamp,\n    type: event.type,\n    transactionId: event.transaction_id,\n    transactionIndex: Number(event.transaction_index),\n    eventIndex: Number(event.event_index),\n    payload: JSON.parse(context.Buffer.from(event.payload, \"base64\").toString())\n  })) : null);\n  return ret;\n}\nasync function sendGetEvents(ix) {\n  let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  invariant(opts.node, `SDK Send Get Events Error: opts.node must be defined.`);\n  invariant(context.response, `SDK Send Get Events Error: context.response must be defined.`);\n  invariant(context.Buffer, `SDK Send Get Events Error: context.Buffer must be defined.`);\n  ix = await ix;\n  const interactionContainsBlockHeightRange = ix.events.start !== null;\n  const interactionContainsBlockIDsList = Array.isArray(ix.events.blockIds) && ix.events.blockIds.length > 0;\n  invariant(interactionContainsBlockHeightRange || interactionContainsBlockIDsList, \"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified.\");\n  if (interactionContainsBlockHeightRange) {\n    return await sendGetEventsForHeightRangeRequest(ix, context, opts);\n  } else {\n    return await sendGetEventsForBlockIDsRequest(ix, context, opts);\n  }\n}\nasync function sendGetTransaction(ix) {\n  let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  invariant(opts.node, `SDK Send Get Transaction Error: opts.node must be defined.`);\n  invariant(context.response, `SDK Send Get Transaction Error: context.response must be defined.`);\n  invariant(context.Buffer, `SDK Send Get Transaction Error: context.Buffer must be defined.`);\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  ix = await ix;\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/transactions/${ix.transaction.id}`,\n    method: \"GET\",\n    body: null\n  });\n  const unwrapKey = key => ({\n    address: key.address,\n    keyId: Number(key.key_id),\n    sequenceNumber: Number(key.sequence_number)\n  });\n  const unwrapSignature = sig => ({\n    address: sig.address,\n    keyId: Number(sig.key_index),\n    signature: sig.signature\n  });\n  const unwrapArg = arg => JSON.parse(context.Buffer.from(arg, \"base64\").toString());\n  let ret = context.response();\n  ret.tag = ix.tag;\n  ret.transaction = {\n    script: context.Buffer.from(res.script, \"base64\").toString(),\n    args: [...res.arguments.map(unwrapArg)],\n    referenceBlockId: res.reference_block_id,\n    gasLimit: Number(res.gas_limit),\n    payer: res.payer,\n    proposalKey: res.proposal_key ? unwrapKey(res.proposal_key) : res.proposal_key,\n    authorizers: res.authorizers,\n    payloadSignatures: [...res.payload_signatures.map(unwrapSignature)],\n    envelopeSignatures: [...res.envelope_signatures.map(unwrapSignature)]\n  };\n  return ret;\n}\nconst STATUS_MAP = {\n  UNKNOWN: 0,\n  PENDING: 1,\n  FINALIZED: 2,\n  EXECUTED: 3,\n  SEALED: 4,\n  EXPIRED: 5\n};\nasync function sendGetTransactionStatus(ix) {\n  let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  invariant(opts.node, `SDK Send Get Transaction Status Error: opts.node must be defined.`);\n  invariant(context.response, `SDK Send Get Transaction Status Error: context.response must be defined.`);\n  invariant(context.Buffer, `SDK Send Get Transaction Status Error: context.Buffer must be defined.`);\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  ix = await ix;\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/transaction_results/${ix.transaction.id}`,\n    method: \"GET\",\n    body: null\n  });\n  let ret = context.response();\n  ret.tag = ix.tag;\n  ret.transactionStatus = {\n    blockId: res.block_id,\n    status: STATUS_MAP[res.status.toUpperCase()] || \"\",\n    statusString: res.status.toUpperCase(),\n    statusCode: res.status_code,\n    errorMessage: res.error_message,\n    events: res.events.map(event => ({\n      type: event.type,\n      transactionId: event.transaction_id,\n      transactionIndex: Number(event.transaction_index),\n      eventIndex: Number(event.event_index),\n      payload: JSON.parse(context.Buffer.from(event.payload, \"base64\").toString())\n    }))\n  };\n  return ret;\n}\nasync function sendPing(ix) {\n  let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  invariant(opts.node, `SDK Send Ping Error: opts.node must be defined.`);\n  invariant(context.response, `SDK Send Ping Error: context.response must be defined.`);\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  await httpRequest$1({\n    hostname: opts.node,\n    path: \"/v1/blocks?height=sealed\",\n    method: \"GET\",\n    body: null\n  });\n  let ret = context.response();\n  ret.tag = ix.tag;\n  return ret;\n}\nconst idof = acct => `${withPrefix(acct.addr)}-${acct.keyId}`;\nasync function sendTransaction(ix) {\n  let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  invariant(opts.node, `SDK Send Transaction Error: opts.node must be defined.`);\n  invariant(context.response, `SDK Send Transaction Error: context.response must be defined.`);\n  invariant(context.Buffer, `SDK Send Transaction Error: context.Buffer must be defined.`);\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  ix = await ix;\n\n  // Apply Non Payer Signatures to Payload Signatures\n  let payloadSignatures = [];\n  for (let acct of Object.values(ix.accounts)) {\n    try {\n      if (!acct.role.payer && acct.signature != null) {\n        payloadSignatures.push({\n          address: sansPrefix(acct.addr),\n          key_index: String(acct.keyId),\n          signature: context.Buffer.from(acct.signature, \"hex\").toString(\"base64\")\n        });\n      }\n    } catch (error) {\n      console.error(\"SDK HTTP Send Error: Trouble applying payload signature\", {\n        acct,\n        ix\n      });\n      throw error;\n    }\n  }\n\n  // Apply Payer Signatures to Envelope Signatures\n  let envelopeSignatures = {};\n  for (let acct of Object.values(ix.accounts)) {\n    try {\n      if (acct.role.payer && acct.signature != null) {\n        let id = acct.tempId || idof(acct);\n        envelopeSignatures[id] = envelopeSignatures[id] || {\n          address: sansPrefix(acct.addr),\n          key_index: String(acct.keyId),\n          signature: context.Buffer.from(acct.signature, \"hex\").toString(\"base64\")\n        };\n      }\n    } catch (error) {\n      console.error(\"SDK HTTP Send Error: Trouble applying envelope signature\", {\n        acct,\n        ix\n      });\n      throw error;\n    }\n  }\n  envelopeSignatures = Object.values(envelopeSignatures);\n  var t1 = Date.now();\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/transactions`,\n    method: \"POST\",\n    body: {\n      script: context.Buffer.from(ix.message.cadence).toString(\"base64\"),\n      arguments: [...ix.message.arguments.map(arg => context.Buffer.from(JSON.stringify(ix.arguments[arg].asArgument)).toString(\"base64\"))],\n      reference_block_id: ix.message.refBlock ? ix.message.refBlock : null,\n      gas_limit: String(ix.message.computeLimit),\n      payer: sansPrefix(ix.accounts[Array.isArray(ix.payer) ? ix.payer[0] : ix.payer].addr),\n      proposal_key: {\n        address: sansPrefix(ix.accounts[ix.proposer].addr),\n        key_index: String(ix.accounts[ix.proposer].keyId),\n        sequence_number: String(ix.accounts[ix.proposer].sequenceNum)\n      },\n      authorizers: ix.authorizations.map(tempId => ix.accounts[tempId].addr).reduce((prev, current) => {\n        return prev.find(item => item === current) ? prev : [...prev, current];\n      }, []).map(sansPrefix),\n      payload_signatures: payloadSignatures,\n      envelope_signatures: envelopeSignatures\n    }\n  });\n  var t2 = Date.now();\n  let ret = context.response();\n  ret.tag = ix.tag;\n  ret.transactionId = res.id;\n  if (typeof window !== \"undefined\" && typeof CustomEvent !== \"undefined\") {\n    window.dispatchEvent(new CustomEvent(\"FLOW::TX\", {\n      detail: {\n        txId: ret.transactionId,\n        delta: t2 - t1\n      }\n    }));\n  }\n  return ret;\n}\nasync function sendGetNetworkParameters(ix) {\n  let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  invariant(opts.node, `SDK Send Get Network Parameters Error: opts.node must be defined.`);\n  invariant(context.response, `SDK Send Get Network Parameters Error: context.response must be defined.`);\n  const httpRequest$1 = opts.httpRequest || httpRequest;\n  ix = await ix;\n  const res = await httpRequest$1({\n    hostname: opts.node,\n    path: `/v1/network/parameters`,\n    method: \"GET\",\n    body: null\n  });\n  let ret = context.response();\n  ret.tag = ix.tag;\n  ret.networkParameters = {\n    chainId: res.chain_id\n  };\n  return ret;\n}\nconst send = async function (ix) {\n  let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  invariant(opts.node, `SDK Send Error: Either opts.node or \"accessNode.api\" in config must be defined.`);\n  invariant(context.ix, `SDK Send Error: context.ix must be defined.`);\n  ix = await ix;\n\n  // prettier-ignore\n  switch (true) {\n    case context.ix.isTransaction(ix):\n      return opts.sendTransaction ? opts.sendTransaction(ix, context, opts) : sendTransaction(ix, context, opts);\n    case context.ix.isGetTransactionStatus(ix):\n      return opts.sendGetTransactionStatus ? opts.sendGetTransactionStatus(ix, context, opts) : sendGetTransactionStatus(ix, context, opts);\n    case context.ix.isGetTransaction(ix):\n      return opts.sendGetTransaction ? opts.sendGetTransaction(ix, context, opts) : sendGetTransaction(ix, context, opts);\n    case context.ix.isScript(ix):\n      return opts.sendExecuteScript ? opts.sendExecuteScript(ix, context, opts) : sendExecuteScript(ix, context, opts);\n    case context.ix.isGetAccount(ix):\n      return opts.sendGetAccount ? opts.sendGetAccount(ix, context, opts) : sendGetAccount(ix, context, opts);\n    case context.ix.isGetEvents(ix):\n      return opts.sendGetEvents ? opts.sendGetEvents(ix, context, opts) : sendGetEvents(ix, context, opts);\n    case context.ix.isGetBlock(ix):\n      return opts.sendGetBlock ? opts.sendGetBlock(ix, context, opts) : sendGetBlock(ix, context, opts);\n    case context.ix.isGetBlockHeader(ix):\n      return opts.sendGetBlockHeader ? opts.sendGetBlockHeader(ix, context, opts) : sendGetBlockHeader(ix, context, opts);\n    case context.ix.isGetCollection(ix):\n      return opts.sendGetCollection ? opts.sendGetCollection(ix, context, opts) : sendGetCollection(ix, context, opts);\n    case context.ix.isPing(ix):\n      return opts.sendPing ? opts.sendPing(ix, context, opts) : sendPing(ix, context, opts);\n    case context.ix.isGetNetworkParameters(ix):\n      return opts.sendGetNetworkParameters ? opts.sendGetNetworkParameters(ix, context, opts) : sendGetNetworkParameters(ix, context, opts);\n    default:\n      return ix;\n  }\n};\nexport { send, sendExecuteScript, sendGetAccount, sendGetBlock, sendGetBlockHeader, sendGetCollection, sendGetEvents, sendGetNetworkParameters, sendGetTransaction, sendGetTransactionStatus, sendPing, sendTransaction };","map":{"version":3,"names":["AbortController","globalThis","require","HTTPRequestError","Error","constructor","_ref","error","hostname","path","method","requestBody","responseBody","responseStatusText","statusCode","msg","name","errorMessage","httpRequest","_ref2","body","headers","retryLimit","retryIntervalMs","timeoutLimit","bodyJSON","JSON","stringify","makeRequest","controller","fetchTimeout","setTimeout","abort","fetchTransport","signal","then","res","ok","json","responseText","text","response","safeParseJSON","message","statusText","status","catch","e","logger","log","title","level","LEVELS","finally","clearTimeout","requestLoop","retryAttempt","arguments","length","undefined","resp","retryStatusCodes","includes","Promise","resolve","reject","console","warn","data","parse","sendExecuteScriptAtBlockIDRequest","ix","context","opts","httpRequest$1","node","block","id","script","Buffer","from","cadence","toString","map","arg","asArgument","constructResponse$4","sendExecuteScriptAtBlockHeightRequest","height","sendExecuteScriptAtLatestBlockRequest","ret","tag","encodedData","sendExecuteScript","invariant","HashAlgorithmIDs","SHA2_256","SHA2_384","SHA3_256","SHA3_384","KMAC128_BLS_BLS12_381","SignatureAlgorithmIDs","ECDSA_P256","ECDSA_secp256k1","BLS_BLS12_381","sendGetAccountAtBlockHeightRequest","account","addr","constructResponse$3","sendGetAccountAtLatestBlockRequest","unwrapContracts","contracts","c","key","Object","keys","address","balance","Number","code","index","publicKey","public_key","replace","signAlgo","signing_algorithm","signAlgoString","hashAlgo","hashing_algorithm","hashAlgoString","sequenceNumber","sequence_number","weight","revoked","sendGetAccount","sendGetBlockHeaderByIDRequest","constructResponse$2","sendGetBlockHeaderByHeightRequest","sendGetLatestBlockHeaderRequest","isSealed","blockHeader","header","parentId","parent_id","timestamp","sendGetBlockHeader","interactionHasBlockID","interactionHasBlockHeight","sendGetBlockByIDRequest","constructResponse$1","sendGetBlockByHeightRequest","sendGetBlockRequest","collectionGuarantees","payload","collection_guarantees","collectionGuarantee","collectionId","collection_id","signerIds","signer_ids","blockSeals","block_seals","blockSeal","blockId","block_id","executionReceiptId","result_id","sendGetBlock","sendGetCollection","collection","transactionIds","transactions","transaction","sendGetEventsForHeightRangeRequest","events","eventType","start","end","constructResponse","sendGetEventsForBlockIDsRequest","blockIds","join","forEach","event","push","blockHeight","block_height","blockTimestamp","block_timestamp","type","transactionId","transaction_id","transactionIndex","transaction_index","eventIndex","event_index","sendGetEvents","interactionContainsBlockHeightRange","interactionContainsBlockIDsList","Array","isArray","sendGetTransaction","unwrapKey","keyId","key_id","unwrapSignature","sig","key_index","signature","unwrapArg","args","referenceBlockId","reference_block_id","gasLimit","gas_limit","payer","proposalKey","proposal_key","authorizers","payloadSignatures","payload_signatures","envelopeSignatures","envelope_signatures","STATUS_MAP","UNKNOWN","PENDING","FINALIZED","EXECUTED","SEALED","EXPIRED","sendGetTransactionStatus","transactionStatus","toUpperCase","statusString","status_code","error_message","sendPing","idof","acct","withPrefix","sendTransaction","values","accounts","role","sansPrefix","String","tempId","t1","Date","now","refBlock","computeLimit","proposer","sequenceNum","authorizations","reduce","prev","current","find","item","t2","window","CustomEvent","dispatchEvent","detail","txId","delta","sendGetNetworkParameters","networkParameters","chainId","chain_id","send","isTransaction","isGetTransactionStatus","isGetTransaction","isScript","isGetAccount","isGetEvents","isGetBlock","isGetBlockHeader","isGetCollection","isPing","isGetNetworkParameters"],"sources":["/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/transport-http/src/http-request.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/transport-http/src/send-execute-script.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/transport-http/src/send-get-account.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/transport-http/src/send-get-block-header.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/transport-http/src/send-get-block.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/transport-http/src/send-get-collection.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/transport-http/src/send-get-events.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/transport-http/src/send-get-transaction.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/transport-http/src/send-get-transaction-status.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/transport-http/src/send-ping.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/transport-http/src/send-transaction.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/transport-http/src/send-get-network-parameters.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/transport-http/src/send-http.js"],"sourcesContent":["import * as logger from \"@onflow/util-logger\"\nimport fetchTransport from \"cross-fetch\"\n\nconst AbortController =\n  globalThis.AbortController || require(\"abort-controller\")\n\nclass HTTPRequestError extends Error {\n  constructor({\n    error,\n    hostname,\n    path,\n    method,\n    requestBody,\n    responseBody,\n    responseStatusText,\n    statusCode,\n  }) {\n    const msg = `\n      HTTP Request Error: An error occurred when interacting with the Access API.\n      ${error ? `error=${error}` : \"\"}\n      ${hostname ? `hostname=${hostname}` : \"\"}\n      ${path ? `path=${path}` : \"\"}\n      ${method ? `method=${method}` : \"\"}\n      ${requestBody ? `requestBody=${requestBody}` : \"\"}\n      ${responseBody ? `responseBody=${responseBody}` : \"\"}\n      ${responseStatusText ? `responseStatusText=${responseStatusText}` : \"\"}\n      ${statusCode ? `statusCode=${statusCode}` : \"\"}\n    `\n    super(msg)\n\n    this.name = \"HTTP Request Error\"\n    this.statusCode = statusCode\n    this.errorMessage = error\n  }\n}\n\n/**\n * Creates an HTTP Request to be sent to a REST Access API via Fetch API.\n *\n * @param {object} options - Options for the HTTP Request\n * @param {String} options.hostname - Access API Hostname\n * @param {String} options.path - Path to the resource on the Access API\n * @param {String} options.method - HTTP Method\n * @param {object} options.body - HTTP Request Body\n * @param {object} [options.headers] - HTTP Request Headers\n *\n * @returns JSON object response from Access API.\n */\nexport async function httpRequest({\n  hostname,\n  path,\n  method,\n  body,\n  headers,\n  retryLimit = 5,\n  retryIntervalMs = 1000,\n  timeoutLimit = 30000,\n}) {\n  const bodyJSON = body ? JSON.stringify(body) : null\n\n  function makeRequest() {\n    const controller = new AbortController()\n    const fetchTimeout = setTimeout(() => {\n      controller.abort()\n    }, timeoutLimit)\n\n    return fetchTransport(`${hostname}${path}`, {\n      method: method,\n      body: bodyJSON,\n      headers,\n      signal: controller.signal,\n    })\n      .then(async res => {\n        if (res.ok) {\n          return res.json()\n        }\n\n        const responseText = res.body ? await res.text() : null\n        const response = safeParseJSON(responseText)\n\n        throw new HTTPRequestError({\n          error: response?.message,\n          hostname,\n          path,\n          method,\n          requestBody: bodyJSON,\n          responseBody: responseText,\n          responseStatusText: res.statusText,\n          statusCode: res.status,\n        })\n      })\n      .catch(async e => {\n        if (e instanceof HTTPRequestError) {\n          throw e\n        }\n\n        if (e.name === \"AbortError\") {\n          throw e\n        }\n\n        // Show AN error for all network errors\n        await logger.log({\n          title: \"Access Node Error\",\n          message: `The provided access node ${hostname} does not appear to be a valid REST/HTTP access node.\nPlease verify that you are not unintentionally using a GRPC access node.\nSee more here: https://docs.onflow.org/fcl/reference/sdk-guidelines/#connect`,\n          level: logger.LEVELS.error,\n        })\n\n        throw new HTTPRequestError({\n          error: e?.message,\n          hostname,\n          path,\n          method,\n          requestBody: bodyJSON,\n        })\n      })\n      .finally(() => {\n        clearTimeout(fetchTimeout)\n      })\n  }\n\n  async function requestLoop(retryAttempt = 0) {\n    try {\n      const resp = await makeRequest()\n      return resp\n    } catch (error) {\n      const retryStatusCodes = [408, 429, 500, 502, 503, 504]\n\n      if (\n        error.name === \"AbortError\" ||\n        retryStatusCodes.includes(error.statusCode)\n      ) {\n        return await new Promise((resolve, reject) => {\n          if (retryAttempt < retryLimit) {\n            console.warn(\n              `Access node unavailable, retrying in ${retryIntervalMs} ms...`\n            )\n            setTimeout(() => {\n              resolve(requestLoop(retryAttempt + 1))\n            }, retryIntervalMs)\n          } else {\n            reject(error)\n          }\n        })\n      } else {\n        throw error\n      }\n    }\n  }\n\n  // Keep retrying request until server available or max attempts exceeded\n  return await requestLoop()\n}\n\nfunction safeParseJSON(data) {\n  try {\n    return JSON.parse(data)\n  } catch {\n    return null\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {Buffer} from \"@onflow/rlp\"\nimport {httpRequest as defaultHttpRequest} from \"./http-request.js\"\n\nasync function sendExecuteScriptAtBlockIDRequest(ix, context, opts) {\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/scripts?block_id=${ix.block.id}`,\n    method: \"POST\",\n    body: {\n      script: context.Buffer.from(ix.message.cadence).toString(\"base64\"),\n      arguments: ix.message.arguments.map(arg =>\n        context.Buffer.from(\n          JSON.stringify(ix.arguments[arg].asArgument)\n        ).toString(\"base64\")\n      ),\n    },\n  })\n\n  return constructResponse(ix, context, res)\n}\n\nasync function sendExecuteScriptAtBlockHeightRequest(ix, context, opts) {\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/scripts?block_height=${ix.block.height}`,\n    method: \"POST\",\n    body: {\n      script: context.Buffer.from(ix.message.cadence).toString(\"base64\"),\n      arguments: ix.message.arguments.map(arg =>\n        context.Buffer.from(\n          JSON.stringify(ix.arguments[arg].asArgument)\n        ).toString(\"base64\")\n      ),\n    },\n  })\n\n  return constructResponse(ix, context, res)\n}\n\nasync function sendExecuteScriptAtLatestBlockRequest(ix, context, opts) {\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/scripts?block_height=sealed`,\n    method: \"POST\",\n    body: {\n      script: context.Buffer.from(ix.message.cadence).toString(\"base64\"),\n      arguments: ix.message.arguments.map(arg =>\n        context.Buffer.from(\n          JSON.stringify(ix.arguments[arg].asArgument)\n        ).toString(\"base64\")\n      ),\n    },\n  })\n\n  return constructResponse(ix, context, res)\n}\n\nfunction constructResponse(ix, context, res) {\n  let ret = context.response()\n  ret.tag = ix.tag\n\n  ret.encodedData = JSON.parse(context.Buffer.from(res, \"base64\").toString())\n\n  return ret\n}\n\nexport async function sendExecuteScript(ix, context = {}, opts = {}) {\n  invariant(\n    opts.node,\n    `SDK Send Execute Script Error: opts.node must be defined.`\n  )\n  invariant(\n    context.response,\n    `SDK Send Execute Script Error: context.response must be defined.`\n  )\n  invariant(\n    context.Buffer,\n    `SDK Send Execute Script Error: context.Buffer must be defined.`\n  )\n\n  ix = await ix\n\n  if (ix.block.id) {\n    return await sendExecuteScriptAtBlockIDRequest(ix, context, opts)\n  } else if (ix.block.height) {\n    return await sendExecuteScriptAtBlockHeightRequest(ix, context, opts)\n  } else {\n    return await sendExecuteScriptAtLatestBlockRequest(ix, context, opts)\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {httpRequest as defaultHttpRequest} from \"./http-request.js\"\n\nconst HashAlgorithmIDs = {\n  SHA2_256: 1,\n  SHA2_384: 2,\n  SHA3_256: 3,\n  SHA3_384: 4,\n  KMAC128_BLS_BLS12_381: 5,\n}\n\nconst SignatureAlgorithmIDs = {\n  ECDSA_P256: 1,\n  ECDSA_secp256k1: 2,\n  BLS_BLS12_381: 3,\n}\n\nasync function sendGetAccountAtBlockHeightRequest(ix, context, opts) {\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/accounts/${ix.account.addr}?block_height=${ix.block.height}&expand=contracts,keys`,\n    method: \"GET\",\n    body: null,\n  })\n\n  return constructResponse(ix, context, res)\n}\n\nasync function sendGetAccountAtLatestBlockRequest(ix, context, opts) {\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/accounts/${ix.account.addr}?block_height=sealed&expand=contracts,keys`,\n    method: \"GET\",\n    body: null,\n  })\n\n  return constructResponse(ix, context, res)\n}\n\nfunction constructResponse(ix, context, res) {\n  let ret = context.response()\n  ret.tag = ix.tag\n\n  const unwrapContracts = contracts => {\n    const c = {}\n    if (!contracts) return c\n    for (let key of Object.keys(contracts)) {\n      c[key] = context.Buffer.from(contracts[key], \"base64\").toString()\n    }\n    return c\n  }\n\n  ret.account = {\n    address: res.address,\n    balance: Number(res.balance),\n    code: \"\",\n    contracts: unwrapContracts(res.contracts),\n    keys:\n      res.keys?.map(key => ({\n        index: Number(key.index),\n        publicKey: key.public_key.replace(/^0x/, \"\"),\n        signAlgo: SignatureAlgorithmIDs[key.signing_algorithm],\n        signAlgoString: key.signing_algorithm,\n        hashAlgo: HashAlgorithmIDs[key.hashing_algorithm],\n        hashAlgoString: key.hashing_algorithm,\n        sequenceNumber: Number(key.sequence_number),\n        weight: Number(key.weight),\n        revoked: key.revoked,\n      })) ?? [],\n  }\n\n  return ret\n}\n\nexport async function sendGetAccount(ix, context = {}, opts = {}) {\n  invariant(opts.node, `SDK Send Get Account Error: opts.node must be defined.`)\n  invariant(\n    context.response,\n    `SDK Send Get Account Error: context.response must be defined.`\n  )\n  invariant(\n    context.Buffer,\n    `SDK Send Get Account Error: context.Buffer must be defined.`\n  )\n\n  ix = await ix\n\n  if (ix.block.height !== null) {\n    return await sendGetAccountAtBlockHeightRequest(ix, context, opts)\n  } else {\n    return await sendGetAccountAtLatestBlockRequest(ix, context, opts)\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {httpRequest as defaultHttpRequest} from \"./http-request.js\"\n\nasync function sendGetBlockHeaderByIDRequest(ix, context, opts) {\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/blocks/${ix.block.id}`,\n    method: \"GET\",\n    body: null,\n  })\n\n  return constructResponse(ix, context, res)\n}\n\nasync function sendGetBlockHeaderByHeightRequest(ix, context, opts) {\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/blocks?height=${ix.block.height}`,\n    method: \"GET\",\n    body: null,\n  })\n\n  return constructResponse(ix, context, res)\n}\n\nasync function sendGetLatestBlockHeaderRequest(ix, context, opts) {\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  const height = ix.block?.isSealed ? \"sealed\" : \"final\"\n\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/blocks?height=${height}`,\n    method: \"GET\",\n    body: null,\n  })\n\n  return constructResponse(ix, context, res)\n}\n\nfunction constructResponse(ix, context, res) {\n  const block = res.length ? res[0] : null\n\n  const ret = context.response()\n  ret.tag = ix.tag\n  ret.blockHeader = {\n    id: block.header.id,\n    parentId: block.header.parent_id,\n    height: Number(block.header.height),\n    timestamp: block.header.timestamp,\n  }\n\n  return ret\n}\n\nexport async function sendGetBlockHeader(ix, context = {}, opts = {}) {\n  invariant(\n    opts.node,\n    `SDK Send Get Block Header Error: opts.node must be defined.`\n  )\n  invariant(\n    context.response,\n    `SDK Send Get Block Header Error: context.response must be defined.`\n  )\n\n  ix = await ix\n\n  const interactionHasBlockID = ix.block.id !== null\n  const interactionHasBlockHeight = ix.block.height !== null\n\n  if (interactionHasBlockID) {\n    return await sendGetBlockHeaderByIDRequest(ix, context, opts)\n  } else if (interactionHasBlockHeight) {\n    return await sendGetBlockHeaderByHeightRequest(ix, context, opts)\n  } else {\n    return await sendGetLatestBlockHeaderRequest(ix, context, opts)\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {httpRequest as defaultHttpRequest} from \"./http-request.js\"\n\nasync function sendGetBlockByIDRequest(ix, context, opts) {\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/blocks/${ix.block.id}?expand=payload`,\n    method: \"GET\",\n    body: null,\n  })\n\n  return constructResponse(ix, context, res)\n}\n\nasync function sendGetBlockByHeightRequest(ix, context, opts) {\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/blocks?height=${ix.block.height}&expand=payload`,\n    method: \"GET\",\n    body: null,\n  })\n\n  return constructResponse(ix, context, res)\n}\n\nasync function sendGetBlockRequest(ix, context, opts) {\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  const height = ix.block?.isSealed ? \"sealed\" : \"final\"\n\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/blocks?height=${height}&expand=payload`,\n    method: \"GET\",\n    body: null,\n  })\n\n  return constructResponse(ix, context, res)\n}\n\nfunction constructResponse(ix, context, res) {\n  const block = res.length ? res[0] : null\n\n  const ret = context.response()\n  ret.tag = ix.tag\n  ret.block = {\n    id: block.header.id,\n    parentId: block.header.parent_id,\n    height: Number(block.header.height),\n    timestamp: block.header.timestamp,\n    collectionGuarantees: block.payload.collection_guarantees.map(\n      collectionGuarantee => ({\n        collectionId: collectionGuarantee.collection_id,\n        signerIds: collectionGuarantee.signer_ids,\n      })\n    ),\n    blockSeals: block.payload.block_seals.map(blockSeal => ({\n      blockId: blockSeal.block_id,\n      executionReceiptId: blockSeal.result_id,\n    })),\n  }\n\n  return ret\n}\n\nexport async function sendGetBlock(ix, context = {}, opts = {}) {\n  invariant(opts.node, `SDK Send Get Block Error: opts.node must be defined.`)\n  invariant(\n    context.response,\n    `SDK Send Get Block Error: context.response must be defined.`\n  )\n\n  ix = await ix\n\n  const interactionHasBlockID = ix.block.id !== null\n  const interactionHasBlockHeight = ix.block.height !== null\n\n  if (interactionHasBlockID) {\n    return await sendGetBlockByIDRequest(ix, context, opts)\n  } else if (interactionHasBlockHeight) {\n    return await sendGetBlockByHeightRequest(ix, context, opts)\n  } else {\n    return await sendGetBlockRequest(ix, context, opts)\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {httpRequest as defaultHttpRequest} from \"./http-request.js\"\n\nexport async function sendGetCollection(ix, context = {}, opts = {}) {\n  invariant(\n    opts.node,\n    `SDK Send Get Collection Error: opts.node must be defined.`\n  )\n  invariant(\n    context.response,\n    `SDK Send Get Collection Error: context.response must be defined.`\n  )\n\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/collections/${ix.collection.id}?expand=transactions`,\n    method: \"GET\",\n    body: null,\n  })\n\n  const ret = context.response()\n  ret.tag = ix.tag\n  ret.collection = {\n    id: res.id,\n    transactionIds: res.transactions.map(transaction => transaction.id),\n  }\n\n  return ret\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {httpRequest as defaultHttpRequest} from \"./http-request.js\"\n\nasync function sendGetEventsForHeightRangeRequest(ix, context, opts) {\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/events?type=${ix.events.eventType}&start_height=${ix.events.start}&end_height=${ix.events.end}`,\n    method: \"GET\",\n    body: null,\n  })\n\n  return constructResponse(ix, context, res)\n}\n\nasync function sendGetEventsForBlockIDsRequest(ix, context, opts) {\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/events?type=${\n      ix.events.eventType\n    }&block_ids=${ix.events.blockIds.join(\",\")}`,\n    method: \"GET\",\n    body: null,\n  })\n\n  return constructResponse(ix, context, res)\n}\n\nfunction constructResponse(ix, context, res) {\n  let ret = context.response()\n  ret.tag = ix.tag\n\n  ret.events = []\n  res.forEach(block =>\n    block.events\n      ? block.events.forEach(event =>\n          ret.events.push({\n            blockId: block.block_id,\n            blockHeight: Number(block.block_height),\n            blockTimestamp: block.block_timestamp,\n            type: event.type,\n            transactionId: event.transaction_id,\n            transactionIndex: Number(event.transaction_index),\n            eventIndex: Number(event.event_index),\n            payload: JSON.parse(\n              context.Buffer.from(event.payload, \"base64\").toString()\n            ),\n          })\n        )\n      : null\n  )\n\n  return ret\n}\n\nexport async function sendGetEvents(ix, context = {}, opts = {}) {\n  invariant(opts.node, `SDK Send Get Events Error: opts.node must be defined.`)\n  invariant(\n    context.response,\n    `SDK Send Get Events Error: context.response must be defined.`\n  )\n  invariant(\n    context.Buffer,\n    `SDK Send Get Events Error: context.Buffer must be defined.`\n  )\n\n  ix = await ix\n\n  const interactionContainsBlockHeightRange = ix.events.start !== null\n  const interactionContainsBlockIDsList =\n    Array.isArray(ix.events.blockIds) && ix.events.blockIds.length > 0\n\n  invariant(\n    interactionContainsBlockHeightRange || interactionContainsBlockIDsList,\n    \"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified.\"\n  )\n\n  if (interactionContainsBlockHeightRange) {\n    return await sendGetEventsForHeightRangeRequest(ix, context, opts)\n  } else {\n    return await sendGetEventsForBlockIDsRequest(ix, context, opts)\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {httpRequest as defaultHttpRequest} from \"./http-request.js\"\n\nexport async function sendGetTransaction(ix, context = {}, opts = {}) {\n  invariant(\n    opts.node,\n    `SDK Send Get Transaction Error: opts.node must be defined.`\n  )\n  invariant(\n    context.response,\n    `SDK Send Get Transaction Error: context.response must be defined.`\n  )\n  invariant(\n    context.Buffer,\n    `SDK Send Get Transaction Error: context.Buffer must be defined.`\n  )\n\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  ix = await ix\n\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/transactions/${ix.transaction.id}`,\n    method: \"GET\",\n    body: null,\n  })\n\n  const unwrapKey = key => ({\n    address: key.address,\n    keyId: Number(key.key_id),\n    sequenceNumber: Number(key.sequence_number),\n  })\n\n  const unwrapSignature = sig => ({\n    address: sig.address,\n    keyId: Number(sig.key_index),\n    signature: sig.signature,\n  })\n\n  const unwrapArg = arg =>\n    JSON.parse(context.Buffer.from(arg, \"base64\").toString())\n\n  let ret = context.response()\n  ret.tag = ix.tag\n  ret.transaction = {\n    script: context.Buffer.from(res.script, \"base64\").toString(),\n    args: [...res.arguments.map(unwrapArg)],\n    referenceBlockId: res.reference_block_id,\n    gasLimit: Number(res.gas_limit),\n    payer: res.payer,\n    proposalKey: res.proposal_key\n      ? unwrapKey(res.proposal_key)\n      : res.proposal_key,\n    authorizers: res.authorizers,\n    payloadSignatures: [...res.payload_signatures.map(unwrapSignature)],\n    envelopeSignatures: [...res.envelope_signatures.map(unwrapSignature)],\n  }\n\n  return ret\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {httpRequest as defaultHttpRequest} from \"./http-request.js\"\n\nconst STATUS_MAP = {\n  UNKNOWN: 0,\n  PENDING: 1,\n  FINALIZED: 2,\n  EXECUTED: 3,\n  SEALED: 4,\n  EXPIRED: 5,\n}\n\nexport async function sendGetTransactionStatus(ix, context = {}, opts = {}) {\n  invariant(\n    opts.node,\n    `SDK Send Get Transaction Status Error: opts.node must be defined.`\n  )\n  invariant(\n    context.response,\n    `SDK Send Get Transaction Status Error: context.response must be defined.`\n  )\n  invariant(\n    context.Buffer,\n    `SDK Send Get Transaction Status Error: context.Buffer must be defined.`\n  )\n\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  ix = await ix\n\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/transaction_results/${ix.transaction.id}`,\n    method: \"GET\",\n    body: null,\n  })\n\n  let ret = context.response()\n  ret.tag = ix.tag\n  ret.transactionStatus = {\n    blockId: res.block_id,\n    status: STATUS_MAP[res.status.toUpperCase()] || \"\",\n    statusString: res.status.toUpperCase(),\n    statusCode: res.status_code,\n    errorMessage: res.error_message,\n    events: res.events.map(event => ({\n      type: event.type,\n      transactionId: event.transaction_id,\n      transactionIndex: Number(event.transaction_index),\n      eventIndex: Number(event.event_index),\n      payload: JSON.parse(\n        context.Buffer.from(event.payload, \"base64\").toString()\n      ),\n    })),\n  }\n\n  return ret\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {httpRequest as defaultHttpRequest} from \"./http-request.js\"\n\nexport async function sendPing(ix, context = {}, opts = {}) {\n  invariant(opts.node, `SDK Send Ping Error: opts.node must be defined.`)\n  invariant(\n    context.response,\n    `SDK Send Ping Error: context.response must be defined.`\n  )\n\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  await httpRequest({\n    hostname: opts.node,\n    path: \"/v1/blocks?height=sealed\",\n    method: \"GET\",\n    body: null,\n  })\n\n  let ret = context.response()\n  ret.tag = ix.tag\n\n  return ret\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {sansPrefix} from \"@onflow/util-address\"\nimport {httpRequest as defaultHttpRequest} from \"./http-request.js\"\n\nconst idof = acct => `${withPrefix(acct.addr)}-${acct.keyId}`\n\nexport async function sendTransaction(ix, context = {}, opts = {}) {\n  invariant(opts.node, `SDK Send Transaction Error: opts.node must be defined.`)\n  invariant(\n    context.response,\n    `SDK Send Transaction Error: context.response must be defined.`\n  )\n  invariant(\n    context.Buffer,\n    `SDK Send Transaction Error: context.Buffer must be defined.`\n  )\n\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  ix = await ix\n\n  // Apply Non Payer Signatures to Payload Signatures\n  let payloadSignatures = []\n  for (let acct of Object.values(ix.accounts)) {\n    try {\n      if (!acct.role.payer && acct.signature != null) {\n        payloadSignatures.push({\n          address: sansPrefix(acct.addr),\n          key_index: String(acct.keyId),\n          signature: context.Buffer.from(acct.signature, \"hex\").toString(\n            \"base64\"\n          ),\n        })\n      }\n    } catch (error) {\n      console.error(\"SDK HTTP Send Error: Trouble applying payload signature\", {\n        acct,\n        ix,\n      })\n      throw error\n    }\n  }\n\n  // Apply Payer Signatures to Envelope Signatures\n  let envelopeSignatures = {}\n  for (let acct of Object.values(ix.accounts)) {\n    try {\n      if (acct.role.payer && acct.signature != null) {\n        let id = acct.tempId || idof(acct)\n        envelopeSignatures[id] = envelopeSignatures[id] || {\n          address: sansPrefix(acct.addr),\n          key_index: String(acct.keyId),\n          signature: context.Buffer.from(acct.signature, \"hex\").toString(\n            \"base64\"\n          ),\n        }\n      }\n    } catch (error) {\n      console.error(\n        \"SDK HTTP Send Error: Trouble applying envelope signature\",\n        {acct, ix}\n      )\n      throw error\n    }\n  }\n  envelopeSignatures = Object.values(envelopeSignatures)\n\n  var t1 = Date.now()\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/transactions`,\n    method: \"POST\",\n    body: {\n      script: context.Buffer.from(ix.message.cadence).toString(\"base64\"),\n      arguments: [\n        ...ix.message.arguments.map(arg =>\n          context.Buffer.from(\n            JSON.stringify(ix.arguments[arg].asArgument)\n          ).toString(\"base64\")\n        ),\n      ],\n      reference_block_id: ix.message.refBlock ? ix.message.refBlock : null,\n      gas_limit: String(ix.message.computeLimit),\n      payer: sansPrefix(\n        ix.accounts[Array.isArray(ix.payer) ? ix.payer[0] : ix.payer].addr\n      ),\n      proposal_key: {\n        address: sansPrefix(ix.accounts[ix.proposer].addr),\n        key_index: String(ix.accounts[ix.proposer].keyId),\n        sequence_number: String(ix.accounts[ix.proposer].sequenceNum),\n      },\n      authorizers: ix.authorizations\n        .map(tempId => ix.accounts[tempId].addr)\n        .reduce((prev, current) => {\n          return prev.find(item => item === current) ? prev : [...prev, current]\n        }, [])\n        .map(sansPrefix),\n      payload_signatures: payloadSignatures,\n      envelope_signatures: envelopeSignatures,\n    },\n  })\n  var t2 = Date.now()\n\n  let ret = context.response()\n  ret.tag = ix.tag\n  ret.transactionId = res.id\n\n  if (typeof window !== \"undefined\" && typeof CustomEvent !== \"undefined\") {\n    window.dispatchEvent(\n      new CustomEvent(\"FLOW::TX\", {\n        detail: {txId: ret.transactionId, delta: t2 - t1},\n      })\n    )\n  }\n\n  return ret\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {httpRequest as defaultHttpRequest} from \"./http-request.js\"\n\nexport async function sendGetNetworkParameters(ix, context = {}, opts = {}) {\n  invariant(\n    opts.node,\n    `SDK Send Get Network Parameters Error: opts.node must be defined.`\n  )\n  invariant(\n    context.response,\n    `SDK Send Get Network Parameters Error: context.response must be defined.`\n  )\n\n  const httpRequest = opts.httpRequest || defaultHttpRequest\n\n  ix = await ix\n\n  const res = await httpRequest({\n    hostname: opts.node,\n    path: `/v1/network/parameters`,\n    method: \"GET\",\n    body: null,\n  })\n\n  let ret = context.response()\n  ret.tag = ix.tag\n\n  ret.networkParameters = {\n    chainId: res.chain_id,\n  }\n  return ret\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {sendTransaction} from \"./send-transaction.js\"\nimport {sendGetTransactionStatus} from \"./send-get-transaction-status.js\"\nimport {sendGetTransaction} from \"./send-get-transaction.js\"\nimport {sendExecuteScript} from \"./send-execute-script.js\"\nimport {sendGetAccount} from \"./send-get-account.js\"\nimport {sendGetEvents} from \"./send-get-events.js\"\nimport {sendGetBlock} from \"./send-get-block.js\"\nimport {sendGetBlockHeader} from \"./send-get-block-header.js\"\nimport {sendGetCollection} from \"./send-get-collection.js\"\nimport {sendPing} from \"./send-ping.js\"\nimport {sendGetNetworkParameters} from \"./send-get-network-parameters.js\"\n\nexport const send = async (ix, context = {}, opts = {}) => {\n  invariant(\n    opts.node,\n    `SDK Send Error: Either opts.node or \"accessNode.api\" in config must be defined.`\n  )\n  invariant(context.ix, `SDK Send Error: context.ix must be defined.`)\n\n  ix = await ix\n\n  // prettier-ignore\n  switch (true) {\n    case context.ix.isTransaction(ix):\n      return opts.sendTransaction ? opts.sendTransaction(ix, context, opts) : sendTransaction(ix, context, opts)\n    case context.ix.isGetTransactionStatus(ix):\n      return opts.sendGetTransactionStatus ? opts.sendGetTransactionStatus(ix, context, opts) : sendGetTransactionStatus(ix, context, opts)\n    case context.ix.isGetTransaction(ix):\n      return opts.sendGetTransaction ? opts.sendGetTransaction(ix, context, opts) : sendGetTransaction(ix, context, opts)\n    case context.ix.isScript(ix):\n      return opts.sendExecuteScript ? opts.sendExecuteScript(ix, context, opts) : sendExecuteScript(ix, context, opts)\n    case context.ix.isGetAccount(ix):\n      return opts.sendGetAccount ? opts.sendGetAccount(ix, context, opts) : sendGetAccount(ix, context, opts)\n    case context.ix.isGetEvents(ix):\n      return opts.sendGetEvents ? opts.sendGetEvents(ix, context, opts) : sendGetEvents(ix, context, opts)\n    case context.ix.isGetBlock(ix):\n      return opts.sendGetBlock ? opts.sendGetBlock(ix, context, opts) : sendGetBlock(ix, context, opts)\n    case context.ix.isGetBlockHeader(ix):\n      return opts.sendGetBlockHeader ? opts.sendGetBlockHeader(ix, context, opts) : sendGetBlockHeader(ix, context, opts)\n    case context.ix.isGetCollection(ix):\n      return opts.sendGetCollection ? opts.sendGetCollection(ix, context, opts) : sendGetCollection(ix, context, opts)\n    case context.ix.isPing(ix):\n      return opts.sendPing ? opts.sendPing(ix, context, opts) : sendPing(ix, context, opts)\n    case context.ix.isGetNetworkParameters(ix):\n      return opts.sendGetNetworkParameters ? opts.sendGetNetworkParameters(ix, context, opts) : sendGetNetworkParameters(ix, context, opts)\n    default:\n      return ix\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}