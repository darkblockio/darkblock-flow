{"ast":null,"code":"import _regeneratorRuntime from\"/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import*as fcl from\"@onflow/fcl\";import styled from\"styled-components\";import{useState,useEffect}from\"react\";import\"../flow/config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Wrapper=styled.nav(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: -webkit-fill-available;\\n  z-index: 1;\\n  background-color: \",\";\\n  color: white;\\n  position: fixed;\\n  top: 0;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 10px 50px;\\n\\n  button {\\n    background-color: white;\\n    padding: 2px 40px;\\n    max-width: 200px;\\n    border: none;\\n    border-radius: 8px;\\n    font-size: 18px;\\n    height: 50px;\\n\\n    &:hover {\\n      color: white;\\n      background-color: black;\\n      cursor: pointer;\\n    }\\n  }\\n\\n  div {\\n    display: flex;\\n    gap: 15px;\\n  }\\n  box {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 10px;\\n  }\\n\"])),function(props){return props.bgColor;});function Navbar(){var _useState=useState({loggedIn:false,addr:undefined}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),flow=_useState4[0],setFlow=_useState4[1];var _useState5=useState('transparent'),_useState6=_slicedToArray(_useState5,2),bgColor=_useState6[0],setBgColor=_useState6[1];useEffect(function(){fcl.currentUser.subscribe(setUser);if(user.addr!==\"\")getFlow(user.addr);var handleScroll=function handleScroll(){var position=window.pageYOffset;if(position>6000){setBgColor('black');}else{setBgColor('transparent');}};window.addEventListener('scroll',handleScroll,{passive:true});return function(){window.removeEventListener('scroll',handleScroll);};},[user.addr]);var logOut=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fcl.unauthenticate();case 2:setUser({addr:undefined,loggedIn:false});case 3:case\"end\":return _context.stop();}},_callee);}));return function logOut(){return _ref.apply(this,arguments);};}();var logIn=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fcl.authenticate();case 2:case\"end\":return _context2.stop();}},_callee2);}));return function logIn(){return _ref2.apply(this,arguments);};}();function getFlow(_x){return _getFlow.apply(this,arguments);}function _getFlow(){_getFlow=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(address){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fcl.query({cadence:\"\\n                  import FlowToken from 0x7e60df042a9c0868\\n                  import FungibleToken from 0x9a0766d93b6608b7\\n    \\n                  pub fun main(address: Address): UFix64{\\n                    let balanceVault =  getAccount(address).getCapability(/public/flowTokenBalance).borrow<&FlowToken.Vault{FungibleToken.Balance}>()!\\n                    return balanceVault.balance\\n                  }\",args:function args(arg,t){return[arg(address,t.Address)];}});case 3:res=_context3.sent;setFlow(res);_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log(\"err:\",_context3.t0);case 10:case\"end\":return _context3.stop();}},_callee3,null,[[0,7]]);}));return _getFlow.apply(this,arguments);}return/*#__PURE__*/_jsxs(Wrapper,{bgColor:bgColor,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Darkblock on Flow: Demo\"}),user.loggedIn?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return logOut();},children:\"Logout\"}),/*#__PURE__*/_jsxs(\"box\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Address - \",user.addr]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Flow Balance - \",flow]})]})]}):/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return logIn();},children:\"Login\"})]});}export default Navbar;","map":{"version":3,"names":["fcl","styled","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Wrapper","nav","_templateObject","_taggedTemplateLiteral","props","bgColor","Navbar","_useState","loggedIn","addr","undefined","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","flow","setFlow","_useState5","_useState6","setBgColor","currentUser","subscribe","getFlow","handleScroll","position","window","pageYOffset","addEventListener","passive","removeEventListener","logOut","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","unauthenticate","stop","apply","arguments","logIn","_ref2","_callee2","_callee2$","_context2","authenticate","_x","_getFlow","_callee3","address","res","_callee3$","_context3","query","cadence","args","arg","t","Address","sent","t0","console","log","children","onClick"],"sources":["/Users/oqpo/Documents/GitHub/darkblock-flow/src/components/Navbar.jsx"],"sourcesContent":["import * as fcl from \"@onflow/fcl\";\nimport styled from \"styled-components\";\nimport { useState, useEffect } from \"react\";\nimport \"../flow/config\";\n\nconst Wrapper = styled.nav`\n  width: -webkit-fill-available;\n  z-index: 1;\n  background-color: ${(props) => props.bgColor};\n  color: white;\n  position: fixed;\n  top: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px 50px;\n\n  button {\n    background-color: white;\n    padding: 2px 40px;\n    max-width: 200px;\n    border: none;\n    border-radius: 8px;\n    font-size: 18px;\n    height: 50px;\n\n    &:hover {\n      color: white;\n      background-color: black;\n      cursor: pointer;\n    }\n  }\n\n  div {\n    display: flex;\n    gap: 15px;\n  }\n  box {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n  }\n`;\n\nfunction Navbar() {\n  const [user, setUser] = useState({ loggedIn: false, addr: undefined });\n  const [flow, setFlow] = useState(0);\n  const [bgColor, setBgColor] = useState('transparent');\n\n  useEffect(() => {\n    fcl.currentUser.subscribe(setUser);\n    if (user.addr !== \"\") getFlow(user.addr);\n\n    const handleScroll = () => {\n      const position = window.pageYOffset;\n      if (position > 6000) {\n        setBgColor('black');\n      } else {\n        setBgColor('transparent');\n      }\n    };\n\n    window.addEventListener('scroll', handleScroll, { passive: true });\n\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [user.addr]);\n\n  const logOut = async () => {\n    await fcl.unauthenticate();\n    setUser({ addr: undefined, loggedIn: false });\n  };\n\n  const logIn = async () => {\n    await fcl.authenticate();\n  };\n\n  async function getFlow(address) {\n    try {\n      const res = await fcl.query({\n        cadence: `\n                  import FlowToken from 0x7e60df042a9c0868\n                  import FungibleToken from 0x9a0766d93b6608b7\n    \n                  pub fun main(address: Address): UFix64{\n                    let balanceVault =  getAccount(address).getCapability(/public/flowTokenBalance).borrow<&FlowToken.Vault{FungibleToken.Balance}>()!\n                    return balanceVault.balance\n                  }`,\n        args: (arg, t) => [arg(address, t.Address)],\n      });\n      setFlow(res);\n    } catch (error) {\n      console.log(\"err:\", error);\n    }\n  }\n  \n  return (\n    <Wrapper bgColor={bgColor}>\n      <h1>Darkblock on Flow: Demo</h1>\n      {user.loggedIn ? (\n        <div>\n          <button onClick={() => logOut()}>Logout</button>\n          <box>\n            <span>Address - {user.addr}</span>\n            <span>Flow Balance - {flow}</span>\n          </box>\n        </div>\n      ) : (\n        <button onClick={() => logIn()}>Login</button>\n      )}\n    </Wrapper>\n  );\n}\n\nexport default Navbar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}