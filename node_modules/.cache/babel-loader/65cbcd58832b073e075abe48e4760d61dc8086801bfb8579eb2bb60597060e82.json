{"ast":null,"code":"import _regeneratorRuntime from \"/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _classCallCheck from \"/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _wrapNativeSuper from \"/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js\";\nimport _createForOfIteratorHelper from \"/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = function __defNormalProp(obj, key, value) {\n  return key in obj ? __defProp(obj, key, {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: value\n  }) : obj[key] = value;\n};\nvar __spreadValues = function __spreadValues(a, b) {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols) {\n    var _iterator = _createForOfIteratorHelper(__getOwnPropSymbols(b)),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var prop = _step.value;\n        if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n  return a;\n};\nvar __spreadProps = function __spreadProps(a, b) {\n  return __defProps(a, __getOwnPropDescs(b));\n};\nvar __async = function __async(__this, __arguments, generator) {\n  return new Promise(function (resolve, reject) {\n    var fulfilled = function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = function rejected(value) {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = function step(x) {\n      return x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    };\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// src/helpers/error.ts\nvar CanvasScrollClipError = /*#__PURE__*/function (_Error) {\n  _inherits(CanvasScrollClipError, _Error);\n  var _super = _createSuper(CanvasScrollClipError);\n  function CanvasScrollClipError(message) {\n    var _this;\n    _classCallCheck(this, CanvasScrollClipError);\n    if (!message) {\n      message = \"Whoops! Something went wrong.\";\n    }\n    _this = _super.call(this, \"\".concat(message));\n    Object.setPrototypeOf(_assertThisInitialized(_this), Object.getPrototypeOf(_assertThisInitialized(_this)));\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(_assertThisInitialized(_this), CanvasScrollClipError);\n    }\n    return _this;\n  }\n  _createClass(CanvasScrollClipError, [{\n    key: \"name\",\n    get: function get() {\n      return this.constructor.name;\n    }\n  }]);\n  return CanvasScrollClipError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nvar AppError = /*#__PURE__*/function (_CanvasScrollClipErro) {\n  _inherits(AppError, _CanvasScrollClipErro);\n  var _super2 = _createSuper(AppError);\n  function AppError() {\n    _classCallCheck(this, AppError);\n    return _super2.apply(this, arguments);\n  }\n  _createClass(AppError, [{\n    key: \"name\",\n    get: function get() {\n      return \"CanvasScrollClipError\";\n    }\n  }]);\n  return AppError;\n}(CanvasScrollClipError);\nvar AppLogger = /*#__PURE__*/function (_CanvasScrollClipErro2) {\n  _inherits(AppLogger, _CanvasScrollClipErro2);\n  var _super3 = _createSuper(AppLogger);\n  function AppLogger() {\n    _classCallCheck(this, AppLogger);\n    return _super3.apply(this, arguments);\n  }\n  _createClass(AppLogger, [{\n    key: \"log\",\n    value: function log(message) {\n      console.log(\"\".concat(this.name, \": \").concat(message));\n    }\n  }, {\n    key: \"warn\",\n    value: function warn(message) {\n      console.warn(\"\".concat(this.name, \": \").concat(message));\n    }\n  }]);\n  return AppLogger;\n}(CanvasScrollClipError);\nvar AppWarning = /*#__PURE__*/function (_AppLogger) {\n  _inherits(AppWarning, _AppLogger);\n  var _super4 = _createSuper(AppWarning);\n  function AppWarning(message) {\n    var _this2;\n    _classCallCheck(this, AppWarning);\n    _this2 = _super4.call(this, message);\n    _this2.warn(message);\n    return _this2;\n  }\n  return _createClass(AppWarning);\n}(AppLogger);\n\n// src/helpers/utils.ts\nvar RegExpLastDigitsMatch = /\\d+(?!.*\\d+)/;\nvar AppEvent = {\n  viewport: {\n    resize: \"viewport.resize\",\n    scroll: \"viewport.scroll\"\n  },\n  images: {\n    progress: \"images.progress\",\n    loaded: \"images.loaded\"\n  }\n};\nvar EventList = Object.values(AppEvent).map(function (e) {\n  return Object.values(e);\n}).flat();\nvar debounce = function debounce(func) {\n  var threshold = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var timeout;\n  var debounced = function debounced() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      return func.apply(void 0, args);\n    }, threshold);\n  };\n  return debounced;\n};\nfunction getImage(imageLink) {\n  return __async(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n            var image = new Image();\n            image.onload = function () {\n              resolve(image);\n            };\n            image.src = imageLink;\n            image.onerror = function () {\n              reject(new AppError(\"Image with name '...\".concat(imageLink.slice(-20), \"' was not found.\")));\n            };\n          }));\n        case 1:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n}\nfunction preloadImages(frameOptions) {\n  return new Array(frameOptions.count).fill(0).map(function (_elem, index) {\n    return getImage(getFramePathByIndex(frameOptions, index + 1));\n  });\n}\nfunction getScrollTop() {\n  return window.pageYOffset || document.documentElement.scrollTop;\n}\nfunction getScrollFraction(cViewport) {\n  var scrollTop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getScrollTop();\n  return (scrollTop - cViewport.top) / (cViewport.bottom - cViewport.screen.height - cViewport.top);\n}\nfunction getFramePathByIndex(frameOptions) {\n  var frameNumber = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  return [frameOptions.path, frameOptions.image.start, frameNumber.toString().padStart(frameOptions.image.padStart, \"0\"), frameOptions.image.ending].join(\"\");\n}\nfunction getImageBasePath(firstFramePath) {\n  var path = firstFramePath.split(\"/\");\n  path.pop();\n  return \"\".concat(path.join(\"/\"), \"/\");\n}\nfunction getImageStructure(firstFramePath, frameCount) {\n  var img = getPathEnding(firstFramePath);\n  var ext = getFileSuffix(img);\n  var seq = getImageSequence(img);\n  if (frameCount.toString().length > seq.length) {\n    throw new AppError(\"Leading zeros in first frame path has to be more than the frame count and sequence at the end.\");\n  }\n  return {\n    start: img.slice(0, img.indexOf(seq)),\n    sequence: parseInt(seq),\n    padStart: seq.length,\n    ending: img.slice(img.indexOf(seq) + seq.length),\n    extension: ext\n  };\n}\nfunction getImageSequence(imageName) {\n  var match = imageName.match(RegExpLastDigitsMatch);\n  var sequence = match && match[0] !== null ? match[0] : \"\";\n  if (sequence.length < 2) {\n    throw new AppError('Bad image sequence format. Should start with 0 and be longer than 2 numbers, f.e. \"frame_01.jpg\"');\n  }\n  return sequence;\n}\nfunction getFileSuffix(fileName) {\n  var ext = fileName.split(\".\").pop() || \" \";\n  if (![\"jpg\", \"jpeg\", \"png\", \"webp\"].includes(ext)) {\n    throw new AppError(\"Image with extension ['\".concat(ext, \"'] is not supported.\"));\n  }\n  return \".\".concat(ext);\n}\nfunction getPathEnding(path) {\n  var splitted = path.split(\"/\");\n  return splitted.pop() || \"\";\n}\n\n// src/common/events.ts\nvar EventEmitter = /*#__PURE__*/_createClass(function EventEmitter() {\n  var _this3 = this;\n  _classCallCheck(this, EventEmitter);\n  this.on = function (event, cb) {\n    if (!EventList.includes(event)) {\n      new AppWarning(\"Event ['\".concat(event, \"'] is not supported.\"));\n    }\n    var observer = _this3.observers.get(event);\n    if (observer) observer.push(cb);else _this3.observers.set(event, [cb]);\n  };\n  this.remove = function (event, cb) {\n    var observer = _this3.observers.get(event);\n    if (!observer) return;\n    for (var i = 0; i < observer.length; i++) {\n      if (observer[i] === cb) {\n        observer.splice(i, 1);\n        return;\n      }\n    }\n  };\n  this.emit = function (event) {\n    var observer = _this3.observers.get(event);\n    if (!observer) return;\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n    for (var i = 0; i < observer.length; i++) {\n      observer[i].apply(observer, args);\n    }\n  };\n  this.observers = /* @__PURE__ */new Map();\n});\n\n// src/common/base.ts\nvar Base = /*#__PURE__*/function () {\n  function Base() {\n    _classCallCheck(this, Base);\n    if (!window) {\n      throw new AppError(\"window is not found.\");\n    }\n    if (!document) {\n      throw new AppError(\"document is not found.\");\n    }\n    this.events = new EventEmitter();\n    this.screen = this.getScreenViewport();\n    this.bind();\n  }\n  _createClass(Base, [{\n    key: \"bind\",\n    value: function bind() {\n      var _this4 = this;\n      window.addEventListener(\"resize\", debounce(this.handleResize.bind(this)));\n      window.addEventListener(\"scroll\", debounce(this.handleScroll.bind(this)));\n      this.events.on(AppEvent.viewport.resize, function (viewport) {\n        _this4.screen = viewport;\n      });\n    }\n  }, {\n    key: \"getScreenViewport\",\n    value: function getScreenViewport() {\n      var _a, _b;\n      return {\n        width: window.innerWidth || ((_a = document.documentElement) == null ? void 0 : _a.clientWidth),\n        height: window.innerHeight || ((_b = document.documentElement) == null ? void 0 : _b.clientHeight)\n      };\n    }\n  }, {\n    key: \"handleResize\",\n    value: function handleResize() {\n      this.events.emit(AppEvent.viewport.resize, this.getScreenViewport());\n    }\n  }, {\n    key: \"handleScroll\",\n    value: function handleScroll() {\n      var scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n      this.events.emit(AppEvent.viewport.scroll, scrollTop);\n    }\n  }]);\n  return Base;\n}();\nvar base_default = Base;\n\n// src/common/frame.ts\nvar Frame = /*#__PURE__*/_createClass(function Frame(_ref) {\n  var framePath = _ref.framePath,\n    frameCount = _ref.frameCount;\n  _classCallCheck(this, Frame);\n  if (!(framePath == null ? void 0 : framePath.length)) {\n    throw new AppError(\"Frame path is not defined.\");\n  }\n  if (!frameCount) {\n    throw new AppError(\"Frame count is not defined.\");\n  }\n  this.count = parseInt(frameCount);\n  this.path = getImageBasePath(framePath);\n  this.image = getImageStructure(framePath, this.count);\n});\nvar frame_default = Frame;\n\n// src/common/options.ts\nvar Options = /*#__PURE__*/function (_base_default) {\n  _inherits(Options, _base_default);\n  var _super5 = _createSuper(Options);\n  function Options(options) {\n    var _this5;\n    _classCallCheck(this, Options);\n    _this5 = _super5.call(this);\n    _this5.scrollArea = 0;\n    _this5.inputs = options;\n    _this5.identifier = options.identifier || \"csc\";\n    _this5.frame = new frame_default(options);\n    if (options.scrollArea) {\n      _this5.scrollArea = parseInt(options.scrollArea, 10);\n    }\n    return _this5;\n  }\n  _createClass(Options, [{\n    key: \"setScrollableArea\",\n    set: function set(height) {\n      if (this.scrollArea) return;\n      this.scrollArea = parseInt(height);\n    }\n  }]);\n  return Options;\n}(base_default);\nvar options_default = Options;\n\n// src/common/canvas.ts\nvar Canvas = /*#__PURE__*/function (_options_default) {\n  _inherits(Canvas, _options_default);\n  var _super6 = _createSuper(Canvas);\n  function Canvas(element, options) {\n    var _this6;\n    _classCallCheck(this, Canvas);\n    _this6 = _super6.call(this, options);\n    _this6.loading = true;\n    _this6.images = [];\n    if (!element) {\n      throw new AppError(\"HTML element is not defined.\");\n    }\n    _this6._container = element;\n    _this6._container.innerHTML = \"\";\n    _this6._container.classList.add(\"\".concat(_this6.identifier, \"-container\"));\n    _this6._container.style.setProperty(\"height\", \"\".concat(_this6.scrollArea, \"px\"));\n    _this6._canvas = document.createElement(\"canvas\");\n    _this6._canvas.classList.add(\"\".concat(_this6.identifier, \"-canvas\"));\n    _this6._canvas.style.setProperty(\"display\", \"block\");\n    _this6._canvas.style.setProperty(\"max-height\", \"100%\");\n    _this6._canvas.style.setProperty(\"max-width\", \"100%\");\n    _this6._canvas.style.setProperty(\"object-fit\", \"cover\");\n    _this6._canvas.style.setProperty(\"height\", \"100vh\");\n    _this6._canvas.style.setProperty(\"width\", \"100%\");\n    _this6._wrapper = document.createElement(\"div\");\n    _this6._wrapper.classList.add(_this6.identifier);\n    _this6._wrapper.style.setProperty(\"position\", \"sticky\");\n    _this6._wrapper.style.setProperty(\"top\", \"0\");\n    _this6._wrapper.appendChild(_this6._canvas);\n    _this6._container.appendChild(_this6._wrapper);\n    _this6.context = _this6._canvas.getContext(\"2d\");\n    _this6.viewport = {\n      width: _this6.screen.width,\n      height: _this6.screen.height,\n      top: 0,\n      bottom: _this6.screen.height,\n      screen: _this6.screen\n    };\n    _this6.events.on(AppEvent.viewport.scroll, function (scrollTop) {\n      if (!_this6.loading) _this6.drawImageByScrollFraction(getScrollFraction(_this6.viewport, scrollTop));\n    });\n    _this6.preload();\n    return _this6;\n  }\n  _createClass(Canvas, [{\n    key: \"preload\",\n    value: function preload() {\n      return __async(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var _this7 = this;\n        var progress, imageList;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              progress = {\n                total: this.frame.count,\n                loaded: 0\n              };\n              imageList = preloadImages(this.frame).map(function (p) {\n                return p.then(function (image) {\n                  progress.loaded = ++progress.loaded;\n                  _this7.events.emit(AppEvent.images.progress, progress);\n                  return image;\n                });\n              });\n              _context2.next = 4;\n              return Promise.all(imageList).then(function (images) {\n                var _a, _b;\n                _this7.images = images;\n                _this7.viewport = __spreadProps(__spreadValues({}, _this7.viewport), {\n                  width: (_a = _this7.images[0]) == null ? void 0 : _a.width,\n                  height: (_b = _this7.images[0]) == null ? void 0 : _b.height,\n                  top: _this7._container.getBoundingClientRect().top + getScrollTop() || 0,\n                  bottom: _this7._container.getBoundingClientRect().bottom + getScrollTop() || _this7.screen.height\n                });\n                _this7._canvas.width = _this7.viewport.width;\n                _this7._canvas.height = _this7.viewport.height;\n                _this7.setScrollableArea = _this7.viewport.height * 2;\n                _this7._container.style.setProperty(\"height\", \"\".concat(_this7.scrollArea, \"px\"));\n                _this7.drawImageByScrollFraction(getScrollFraction(_this7.viewport));\n                _this7._container.classList.add(\"\".concat(_this7.identifier, \"--loaded\"));\n                _this7.loading = false;\n                _this7.events.emit(AppEvent.images.loaded);\n              });\n            case 4:\n              return _context2.abrupt(\"return\", _context2.sent);\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n    }\n  }, {\n    key: \"drawImage\",\n    value: function drawImage(image) {\n      if (!image) {\n        return;\n      }\n      this.context.clearRect(0, 0, this.viewport.width, this.viewport.height);\n      this.context.drawImage(image, 0, 0, this.viewport.width, this.viewport.height);\n    }\n  }, {\n    key: \"drawImageByFrameNumber\",\n    value: function drawImageByFrameNumber() {\n      var frameNumber = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      this.drawImage(this.images[frameNumber]);\n    }\n  }, {\n    key: \"drawImageByScrollFraction\",\n    value: function drawImageByScrollFraction(scrollFraction) {\n      var frameIndex;\n      frameIndex = Math.min(this.frame.count - 1, Math.ceil(scrollFraction * this.frame.count));\n      if (frameIndex <= 0) frameIndex = 0;\n      this.drawImageByFrameNumber(frameIndex);\n    }\n  }]);\n  return Canvas;\n}(options_default);\nvar canvas_default = Canvas;\n\n// src/main.ts\nvar Main = /*#__PURE__*/function (_canvas_default) {\n  _inherits(Main, _canvas_default);\n  var _super7 = _createSuper(Main);\n  function Main(element, options, callback) {\n    var _this8;\n    _classCallCheck(this, Main);\n    _this8 = _super7.call(this, element, options);\n    _this8.callback = callback || function () {};\n    _this8.init();\n    return _this8;\n  }\n  _createClass(Main, [{\n    key: \"init\",\n    value: function init() {\n      var _this9 = this;\n      this.events.on(AppEvent.images.loaded, function () {\n        debounce(_this9.callback());\n      });\n    }\n  }]);\n  return Main;\n}(canvas_default);\nvar main_default = Main;\nexport { main_default as default };","map":{"version":3,"names":["__defProp","Object","defineProperty","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","_iterator","_createForOfIteratorHelper","_step","s","n","done","err","e","f","__spreadProps","__async","__this","__arguments","generator","Promise","resolve","reject","fulfilled","step","next","rejected","throw","x","then","apply","CanvasScrollClipError","_Error","_inherits","_super","_createSuper","message","_this","_classCallCheck","concat","setPrototypeOf","_assertThisInitialized","getPrototypeOf","Error","captureStackTrace","_createClass","get","constructor","name","_wrapNativeSuper","AppError","_CanvasScrollClipErro","_super2","arguments","AppLogger","_CanvasScrollClipErro2","_super3","log","console","warn","AppWarning","_AppLogger","_super4","_this2","RegExpLastDigitsMatch","AppEvent","viewport","resize","scroll","images","progress","loaded","EventList","values","map","flat","debounce","func","threshold","length","undefined","timeout","debounced","_len","args","Array","_key","clearTimeout","setTimeout","getImage","imageLink","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","abrupt","image","Image","onload","src","onerror","slice","stop","preloadImages","frameOptions","count","fill","_elem","index","getFramePathByIndex","getScrollTop","window","pageYOffset","document","documentElement","scrollTop","getScrollFraction","cViewport","top","bottom","screen","height","frameNumber","path","start","toString","padStart","ending","join","getImageBasePath","firstFramePath","split","pop","getImageStructure","frameCount","img","getPathEnding","ext","getFileSuffix","seq","getImageSequence","indexOf","sequence","parseInt","extension","imageName","match","fileName","includes","splitted","EventEmitter","_this3","on","event","cb","observer","observers","push","set","remove","i","splice","emit","_len2","_key2","Map","Base","events","getScreenViewport","bind","_this4","addEventListener","handleResize","handleScroll","_a","_b","width","innerWidth","clientWidth","innerHeight","clientHeight","base_default","Frame","_ref","framePath","frame_default","Options","_base_default","_super5","options","_this5","scrollArea","inputs","identifier","frame","options_default","Canvas","_options_default","_super6","element","_this6","loading","_container","innerHTML","classList","add","style","setProperty","_canvas","createElement","_wrapper","appendChild","context","getContext","drawImageByScrollFraction","preload","_callee2","_this7","imageList","_callee2$","_context2","total","p","all","getBoundingClientRect","setScrollableArea","sent","drawImage","clearRect","drawImageByFrameNumber","scrollFraction","frameIndex","Math","min","ceil","canvas_default","Main","_canvas_default","_super7","callback","_this8","init","_this9","main_default","default"],"sources":["/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/canvas-scroll-clip/dist/esbuild/main.esm.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// src/helpers/error.ts\nvar CanvasScrollClipError = class extends Error {\n  constructor(message) {\n    if (!message) {\n      message = `Whoops! Something went wrong.`;\n    }\n    super(`${message}`);\n    Object.setPrototypeOf(this, Object.getPrototypeOf(this));\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, CanvasScrollClipError);\n    }\n  }\n  get name() {\n    return this.constructor.name;\n  }\n};\nvar AppError = class extends CanvasScrollClipError {\n  get name() {\n    return \"CanvasScrollClipError\";\n  }\n};\nvar AppLogger = class extends CanvasScrollClipError {\n  log(message) {\n    console.log(`${this.name}: ${message}`);\n  }\n  warn(message) {\n    console.warn(`${this.name}: ${message}`);\n  }\n};\nvar AppWarning = class extends AppLogger {\n  constructor(message) {\n    super(message);\n    this.warn(message);\n  }\n};\n\n// src/helpers/utils.ts\nvar RegExpLastDigitsMatch = /\\d+(?!.*\\d+)/;\nvar AppEvent = {\n  viewport: {\n    resize: \"viewport.resize\",\n    scroll: \"viewport.scroll\"\n  },\n  images: {\n    progress: \"images.progress\",\n    loaded: \"images.loaded\"\n  }\n};\nvar EventList = Object.values(AppEvent).map((e) => Object.values(e)).flat();\nvar debounce = (func, threshold = 0) => {\n  let timeout;\n  const debounced = (...args) => {\n    if (timeout)\n      clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), threshold);\n  };\n  return debounced;\n};\nfunction getImage(imageLink) {\n  return __async(this, null, function* () {\n    return new Promise((resolve, reject) => {\n      const image = new Image();\n      image.onload = () => {\n        resolve(image);\n      };\n      image.src = imageLink;\n      image.onerror = () => {\n        reject(new AppError(`Image with name '...${imageLink.slice(-20)}' was not found.`));\n      };\n    });\n  });\n}\nfunction preloadImages(frameOptions) {\n  return new Array(frameOptions.count).fill(0).map((_elem, index) => {\n    return getImage(getFramePathByIndex(frameOptions, index + 1));\n  });\n}\nfunction getScrollTop() {\n  return window.pageYOffset || document.documentElement.scrollTop;\n}\nfunction getScrollFraction(cViewport, scrollTop = getScrollTop()) {\n  return (scrollTop - cViewport.top) / (cViewport.bottom - cViewport.screen.height - cViewport.top);\n}\nfunction getFramePathByIndex(frameOptions, frameNumber = 1) {\n  return [\n    frameOptions.path,\n    frameOptions.image.start,\n    frameNumber.toString().padStart(frameOptions.image.padStart, \"0\"),\n    frameOptions.image.ending\n  ].join(\"\");\n}\nfunction getImageBasePath(firstFramePath) {\n  const path = firstFramePath.split(\"/\");\n  path.pop();\n  return `${path.join(\"/\")}/`;\n}\nfunction getImageStructure(firstFramePath, frameCount) {\n  const img = getPathEnding(firstFramePath);\n  const ext = getFileSuffix(img);\n  const seq = getImageSequence(img);\n  if (frameCount.toString().length > seq.length) {\n    throw new AppError(`Leading zeros in first frame path has to be more than the frame count and sequence at the end.`);\n  }\n  return {\n    start: img.slice(0, img.indexOf(seq)),\n    sequence: parseInt(seq),\n    padStart: seq.length,\n    ending: img.slice(img.indexOf(seq) + seq.length),\n    extension: ext\n  };\n}\nfunction getImageSequence(imageName) {\n  const match = imageName.match(RegExpLastDigitsMatch);\n  const sequence = match && match[0] !== null ? match[0] : \"\";\n  if (sequence.length < 2) {\n    throw new AppError('Bad image sequence format. Should start with 0 and be longer than 2 numbers, f.e. \"frame_01.jpg\"');\n  }\n  return sequence;\n}\nfunction getFileSuffix(fileName) {\n  const ext = fileName.split(\".\").pop() || \" \";\n  if (![\"jpg\", \"jpeg\", \"png\", \"webp\"].includes(ext)) {\n    throw new AppError(`Image with extension ['${ext}'] is not supported.`);\n  }\n  return `.${ext}`;\n}\nfunction getPathEnding(path) {\n  const splitted = path.split(\"/\");\n  return splitted.pop() || \"\";\n}\n\n// src/common/events.ts\nvar EventEmitter = class {\n  constructor() {\n    this.on = (event, cb) => {\n      if (!EventList.includes(event)) {\n        new AppWarning(`Event ['${event}'] is not supported.`);\n      }\n      const observer = this.observers.get(event);\n      if (observer)\n        observer.push(cb);\n      else\n        this.observers.set(event, [cb]);\n    };\n    this.remove = (event, cb) => {\n      const observer = this.observers.get(event);\n      if (!observer)\n        return;\n      for (let i = 0; i < observer.length; i++) {\n        if (observer[i] === cb) {\n          observer.splice(i, 1);\n          return;\n        }\n      }\n    };\n    this.emit = (event, ...args) => {\n      const observer = this.observers.get(event);\n      if (!observer)\n        return;\n      for (let i = 0; i < observer.length; i++) {\n        observer[i](...args);\n      }\n    };\n    this.observers = /* @__PURE__ */ new Map();\n  }\n};\n\n// src/common/base.ts\nvar Base = class {\n  constructor() {\n    if (!window) {\n      throw new AppError(\"window is not found.\");\n    }\n    if (!document) {\n      throw new AppError(\"document is not found.\");\n    }\n    this.events = new EventEmitter();\n    this.screen = this.getScreenViewport();\n    this.bind();\n  }\n  bind() {\n    window.addEventListener(\"resize\", debounce(this.handleResize.bind(this)));\n    window.addEventListener(\"scroll\", debounce(this.handleScroll.bind(this)));\n    this.events.on(AppEvent.viewport.resize, (viewport) => {\n      this.screen = viewport;\n    });\n  }\n  getScreenViewport() {\n    var _a, _b;\n    return {\n      width: window.innerWidth || ((_a = document.documentElement) == null ? void 0 : _a.clientWidth),\n      height: window.innerHeight || ((_b = document.documentElement) == null ? void 0 : _b.clientHeight)\n    };\n  }\n  handleResize() {\n    this.events.emit(AppEvent.viewport.resize, this.getScreenViewport());\n  }\n  handleScroll() {\n    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n    this.events.emit(AppEvent.viewport.scroll, scrollTop);\n  }\n};\nvar base_default = Base;\n\n// src/common/frame.ts\nvar Frame = class {\n  constructor({ framePath, frameCount }) {\n    if (!(framePath == null ? void 0 : framePath.length)) {\n      throw new AppError(\"Frame path is not defined.\");\n    }\n    if (!frameCount) {\n      throw new AppError(\"Frame count is not defined.\");\n    }\n    this.count = parseInt(frameCount);\n    this.path = getImageBasePath(framePath);\n    this.image = getImageStructure(framePath, this.count);\n  }\n};\nvar frame_default = Frame;\n\n// src/common/options.ts\nvar Options = class extends base_default {\n  constructor(options) {\n    super();\n    this.scrollArea = 0;\n    this.inputs = options;\n    this.identifier = options.identifier || \"csc\";\n    this.frame = new frame_default(options);\n    if (options.scrollArea) {\n      this.scrollArea = parseInt(options.scrollArea, 10);\n    }\n  }\n  set setScrollableArea(height) {\n    if (this.scrollArea)\n      return;\n    this.scrollArea = parseInt(height);\n  }\n};\nvar options_default = Options;\n\n// src/common/canvas.ts\nvar Canvas = class extends options_default {\n  constructor(element, options) {\n    super(options);\n    this.loading = true;\n    this.images = [];\n    if (!element) {\n      throw new AppError(\"HTML element is not defined.\");\n    }\n    this._container = element;\n    this._container.innerHTML = \"\";\n    this._container.classList.add(`${this.identifier}-container`);\n    this._container.style.setProperty(\"height\", `${this.scrollArea}px`);\n    this._canvas = document.createElement(\"canvas\");\n    this._canvas.classList.add(`${this.identifier}-canvas`);\n    this._canvas.style.setProperty(\"display\", \"block\");\n    this._canvas.style.setProperty(\"max-height\", \"100%\");\n    this._canvas.style.setProperty(\"max-width\", \"100%\");\n    this._canvas.style.setProperty(\"object-fit\", \"cover\");\n    this._canvas.style.setProperty(\"height\", \"100vh\");\n    this._canvas.style.setProperty(\"width\", \"100%\");\n    this._wrapper = document.createElement(\"div\");\n    this._wrapper.classList.add(this.identifier);\n    this._wrapper.style.setProperty(\"position\", \"sticky\");\n    this._wrapper.style.setProperty(\"top\", \"0\");\n    this._wrapper.appendChild(this._canvas);\n    this._container.appendChild(this._wrapper);\n    this.context = this._canvas.getContext(\"2d\");\n    this.viewport = {\n      width: this.screen.width,\n      height: this.screen.height,\n      top: 0,\n      bottom: this.screen.height,\n      screen: this.screen\n    };\n    this.events.on(AppEvent.viewport.scroll, (scrollTop) => {\n      if (!this.loading)\n        this.drawImageByScrollFraction(getScrollFraction(this.viewport, scrollTop));\n    });\n    this.preload();\n  }\n  preload() {\n    return __async(this, null, function* () {\n      const progress = {\n        total: this.frame.count,\n        loaded: 0\n      };\n      const imageList = preloadImages(this.frame).map((p) => {\n        return p.then((image) => {\n          progress.loaded = ++progress.loaded;\n          this.events.emit(AppEvent.images.progress, progress);\n          return image;\n        });\n      });\n      return yield Promise.all(imageList).then((images) => {\n        var _a, _b;\n        this.images = images;\n        this.viewport = __spreadProps(__spreadValues({}, this.viewport), {\n          width: (_a = this.images[0]) == null ? void 0 : _a.width,\n          height: (_b = this.images[0]) == null ? void 0 : _b.height,\n          top: this._container.getBoundingClientRect().top + getScrollTop() || 0,\n          bottom: this._container.getBoundingClientRect().bottom + getScrollTop() || this.screen.height\n        });\n        this._canvas.width = this.viewport.width;\n        this._canvas.height = this.viewport.height;\n        this.setScrollableArea = this.viewport.height * 2;\n        this._container.style.setProperty(\"height\", `${this.scrollArea}px`);\n        this.drawImageByScrollFraction(getScrollFraction(this.viewport));\n        this._container.classList.add(`${this.identifier}--loaded`);\n        this.loading = false;\n        this.events.emit(AppEvent.images.loaded);\n      });\n    });\n  }\n  drawImage(image) {\n    if (!image) {\n      return;\n    }\n    this.context.clearRect(0, 0, this.viewport.width, this.viewport.height);\n    this.context.drawImage(image, 0, 0, this.viewport.width, this.viewport.height);\n  }\n  drawImageByFrameNumber(frameNumber = 0) {\n    this.drawImage(this.images[frameNumber]);\n  }\n  drawImageByScrollFraction(scrollFraction) {\n    let frameIndex;\n    frameIndex = Math.min(\n      this.frame.count - 1,\n      Math.ceil(scrollFraction * this.frame.count)\n    );\n    if (frameIndex <= 0)\n      frameIndex = 0;\n    this.drawImageByFrameNumber(frameIndex);\n  }\n};\nvar canvas_default = Canvas;\n\n// src/main.ts\nvar Main = class extends canvas_default {\n  constructor(element, options, callback) {\n    super(element, options);\n    this.callback = callback || (() => {\n    });\n    this.init();\n  }\n  init() {\n    this.events.on(AppEvent.images.loaded, () => {\n      debounce(this.callback());\n    });\n  }\n};\nvar main_default = Main;\nexport {\n  main_default as default\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}