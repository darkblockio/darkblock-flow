{"ast":null,"code":"import * as logger from '@onflow/util-logger';\nimport { log } from '@onflow/util-logger';\nimport { invariant as invariant$1 } from '@onflow/util-invariant';\nimport { config } from '@onflow/config';\nexport { config } from '@onflow/config';\nimport { Buffer, encode } from '@onflow/rlp';\nimport { send as send$1 } from '@onflow/transport-http';\nimport { sansPrefix, withPrefix } from '@onflow/util-address';\nimport { SHA3 } from 'sha3';\nimport { template } from '@onflow/util-template';\nexport { template as cadence, template as cdc } from '@onflow/util-template';\nconst UNKNOWN /*                       */ = \"UNKNOWN\";\nconst SCRIPT /*                        */ = \"SCRIPT\";\nconst TRANSACTION /*                   */ = \"TRANSACTION\";\nconst GET_TRANSACTION_STATUS /*        */ = \"GET_TRANSACTION_STATUS\";\nconst GET_ACCOUNT /*                   */ = \"GET_ACCOUNT\";\nconst GET_EVENTS /*                    */ = \"GET_EVENTS\";\nconst PING /*                          */ = \"PING\";\nconst GET_TRANSACTION /*               */ = \"GET_TRANSACTION\";\nconst GET_BLOCK /*                     */ = \"GET_BLOCK\";\nconst GET_BLOCK_HEADER /*              */ = \"GET_BLOCK_HEADER\";\nconst GET_COLLECTION /*                */ = \"GET_COLLECTION\";\nconst GET_NETWORK_PARAMETERS /*        */ = \"GET_NETWORK_PARAMETERS\";\nconst BAD /* */ = \"BAD\";\nconst OK /*  */ = \"OK\";\nconst ACCOUNT /*  */ = \"ACCOUNT\";\nconst PARAM /*    */ = \"PARAM\";\nconst ARGUMENT /* */ = \"ARGUMENT\";\nconst AUTHORIZER /* */ = \"authorizer\";\nconst PAYER /*      */ = \"payer\";\nconst PROPOSER /*   */ = \"proposer\";\nconst ACCT = `{\n  \"kind\":\"${ACCOUNT}\",\n  \"tempId\":null,\n  \"addr\":null,\n  \"keyId\":null,\n  \"sequenceNum\":null,\n  \"signature\":null,\n  \"signingFunction\":null,\n  \"resolve\":null,\n  \"role\": {\n    \"proposer\":false,\n    \"authorizer\":false,\n    \"payer\":false,\n    \"param\":false\n  }\n}`;\nconst ARG = `{\n  \"kind\":\"${ARGUMENT}\",\n  \"tempId\":null,\n  \"value\":null,\n  \"asArgument\":null,\n  \"xform\":null,\n  \"resolve\": null,\n  \"resolveArgument\": null\n}`;\nconst IX = `{\n  \"tag\":\"${UNKNOWN}\",\n  \"assigns\":{},\n  \"status\":\"${OK}\",\n  \"reason\":null,\n  \"accounts\":{},\n  \"params\":{},\n  \"arguments\":{},\n  \"message\": {\n    \"cadence\":null,\n    \"refBlock\":null,\n    \"computeLimit\":null,\n    \"proposer\":null,\n    \"payer\":null,\n    \"authorizations\":[],\n    \"params\":[],\n    \"arguments\":[]\n  },\n  \"proposer\":null,\n  \"authorizations\":[],\n  \"payer\":[],\n  \"events\": {\n    \"eventType\":null,\n    \"start\":null,\n    \"end\":null,\n    \"blockIds\":[]\n  },\n  \"transaction\": {\n    \"id\":null\n  },\n  \"block\": {\n    \"id\":null,\n    \"height\":null,\n    \"isSealed\":null\n  },\n  \"account\": {\n    \"addr\":null\n  },\n  \"collection\": {\n    \"id\":null\n  }\n}`;\nconst KEYS = new Set(Object.keys(JSON.parse(IX)));\nconst interaction = () => JSON.parse(IX);\nconst CHARS = \"abcdefghijklmnopqrstuvwxyz0123456789\".split(\"\");\nconst randChar = () => CHARS[~~(Math.random() * CHARS.length)];\nconst uuid = () => Array.from({\n  length: 10\n}, randChar).join(\"\");\nconst isNumber$1 = d => typeof d === \"number\";\nconst isArray$1 = d => Array.isArray(d);\nconst isObj = d => d !== null && typeof d === \"object\";\nconst isNull = d => d == null;\nconst isFn$3 = d => typeof d === \"function\";\nconst isInteraction = ix => {\n  if (!isObj(ix) || isNull(ix) || isNumber$1(ix)) return false;\n  for (let key of KEYS) if (!ix.hasOwnProperty(key)) return false;\n  return true;\n};\nconst Ok = ix => {\n  ix.status = OK;\n  return ix;\n};\nconst Bad = (ix, reason) => {\n  ix.status = BAD;\n  ix.reason = reason;\n  return ix;\n};\nconst makeIx = wat => ix => {\n  ix.tag = wat;\n  return Ok(ix);\n};\nconst prepAccountKeyId = acct => {\n  if (acct.keyId == null) return acct;\n  invariant$1(!isNaN(parseInt(acct.keyId)), \"account.keyId must be an integer\");\n  return {\n    ...acct,\n    keyId: parseInt(acct.keyId)\n  };\n};\nconst prepAccount = function (acct) {\n  let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return ix => {\n    invariant$1(typeof acct === \"function\" || typeof acct === \"object\", \"prepAccount must be passed an authorization function or an account object\");\n    invariant$1(opts.role != null, \"Account must have a role\");\n    const ACCOUNT = JSON.parse(ACCT);\n    const role = opts.role;\n    const tempId = uuid();\n    if (acct.authorization && isFn$3(acct.authorization)) acct = {\n      resolve: acct.authorization\n    };\n    if (!acct.authorization && isFn$3(acct)) acct = {\n      resolve: acct\n    };\n    const resolve = acct.resolve;\n    if (resolve) acct.resolve = function (acct) {\n      for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        rest[_key - 1] = arguments[_key];\n      }\n      return [resolve, prepAccountKeyId].reduce(async (d, fn) => fn(await d, ...rest), acct);\n    };\n    acct = prepAccountKeyId(acct);\n    ix.accounts[tempId] = {\n      ...ACCOUNT,\n      tempId,\n      ...acct,\n      role: {\n        ...ACCOUNT.role,\n        ...(typeof acct.role === \"object\" ? acct.role : {}),\n        [role]: true\n      }\n    };\n    if (role === AUTHORIZER) {\n      ix.authorizations.push(tempId);\n    } else if (role === PAYER) {\n      ix.payer.push(tempId);\n    } else {\n      ix[role] = tempId;\n    }\n    return ix;\n  };\n};\nconst makeArgument = arg => ix => {\n  let tempId = uuid();\n  ix.message.arguments.push(tempId);\n  ix.arguments[tempId] = JSON.parse(ARG);\n  ix.arguments[tempId].tempId = tempId;\n  ix.arguments[tempId].value = arg.value;\n  ix.arguments[tempId].asArgument = arg.asArgument;\n  ix.arguments[tempId].xform = arg.xform;\n  ix.arguments[tempId].resolve = arg.resolve;\n  ix.arguments[tempId].resolveArgument = isFn$3(arg.resolveArgument) ? arg.resolveArgument.bind(arg) : arg.resolveArgument;\n  return Ok(ix);\n};\nconst makeUnknown /*                 */ = makeIx(UNKNOWN);\nconst makeScript /*                  */ = makeIx(SCRIPT);\nconst makeTransaction /*             */ = makeIx(TRANSACTION);\nconst makeGetTransactionStatus /*    */ = makeIx(GET_TRANSACTION_STATUS);\nconst makeGetTransaction /*          */ = makeIx(GET_TRANSACTION);\nconst makeGetAccount /*              */ = makeIx(GET_ACCOUNT);\nconst makeGetEvents /*               */ = makeIx(GET_EVENTS);\nconst makePing /*                    */ = makeIx(PING);\nconst makeGetBlock /*                */ = makeIx(GET_BLOCK);\nconst makeGetBlockHeader /*          */ = makeIx(GET_BLOCK_HEADER);\nconst makeGetCollection /*           */ = makeIx(GET_COLLECTION);\nconst makeGetNetworkParameters /*    */ = makeIx(GET_NETWORK_PARAMETERS);\nconst is = wat => ix => ix.tag === wat;\nconst isUnknown /*                 */ = is(UNKNOWN);\nconst isScript /*                  */ = is(SCRIPT);\nconst isTransaction /*             */ = is(TRANSACTION);\nconst isGetTransactionStatus /*    */ = is(GET_TRANSACTION_STATUS);\nconst isGetTransaction /*          */ = is(GET_TRANSACTION);\nconst isGetAccount /*              */ = is(GET_ACCOUNT);\nconst isGetEvents /*               */ = is(GET_EVENTS);\nconst isPing /*                    */ = is(PING);\nconst isGetBlock /*                */ = is(GET_BLOCK);\nconst isGetBlockHeader /*          */ = is(GET_BLOCK_HEADER);\nconst isGetCollection /*           */ = is(GET_COLLECTION);\nconst isGetNetworkParameters /*    */ = is(GET_NETWORK_PARAMETERS);\nconst isOk /*  */ = ix => ix.status === OK;\nconst isBad /* */ = ix => ix.status === BAD;\nconst why /*   */ = ix => ix.reason;\nconst isAccount /*  */ = account => account.kind === ACCOUNT;\nconst isParam /*    */ = param => param.kind === PARAM;\nconst isArgument /* */ = argument => argument.kind === ARGUMENT;\nconst hardMode = ix => {\n  for (let key of Object.keys(ix)) {\n    if (!KEYS.has(key)) throw new Error(`\"${key}\" is an invalid root level Interaction property.`);\n  }\n  return ix;\n};\nconst recPipe = async function (ix) {\n  let fns = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  try {\n    ix = hardMode(await ix);\n    if (isBad(ix)) throw new Error(`Interaction Error: ${ix.reason}`);\n    if (!fns.length) return ix;\n    const [hd, ...rest] = fns;\n    const cur = await hd;\n    if (isFn$3(cur)) return recPipe(cur(ix), rest);\n    if (isNull(cur) || !cur) return recPipe(ix, rest);\n    if (isInteraction(cur)) return recPipe(cur, rest);\n    throw new Error(\"Invalid Interaction Composition\");\n  } catch (e) {\n    throw e;\n  }\n};\nconst pipe = function () {\n  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n  const [arg1, arg2] = args;\n  if (isArray$1(arg1) && arg2 == null) return d => pipe(d, arg1);\n  return recPipe(arg1, arg2);\n};\nconst identity$1 = v => v;\nconst get = (ix, key, fallback) => {\n  return ix.assigns[key] == null ? fallback : ix.assigns[key];\n};\nconst put = (key, value) => ix => {\n  ix.assigns[key] = value;\n  return Ok(ix);\n};\nconst update = function (key) {\n  let fn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : identity$1;\n  return ix => {\n    ix.assigns[key] = fn(ix.assigns[key], ix);\n    return Ok(ix);\n  };\n};\nconst destroy = key => ix => {\n  delete ix.assigns[key];\n  return Ok(ix);\n};\nvar ixModule = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  UNKNOWN: UNKNOWN,\n  SCRIPT: SCRIPT,\n  TRANSACTION: TRANSACTION,\n  GET_TRANSACTION_STATUS: GET_TRANSACTION_STATUS,\n  GET_ACCOUNT: GET_ACCOUNT,\n  GET_EVENTS: GET_EVENTS,\n  PING: PING,\n  GET_TRANSACTION: GET_TRANSACTION,\n  GET_BLOCK: GET_BLOCK,\n  GET_BLOCK_HEADER: GET_BLOCK_HEADER,\n  GET_COLLECTION: GET_COLLECTION,\n  GET_NETWORK_PARAMETERS: GET_NETWORK_PARAMETERS,\n  BAD: BAD,\n  OK: OK,\n  ACCOUNT: ACCOUNT,\n  PARAM: PARAM,\n  ARGUMENT: ARGUMENT,\n  AUTHORIZER: AUTHORIZER,\n  PAYER: PAYER,\n  PROPOSER: PROPOSER,\n  interaction: interaction,\n  uuid: uuid,\n  isNumber: isNumber$1,\n  isArray: isArray$1,\n  isObj: isObj,\n  isNull: isNull,\n  isFn: isFn$3,\n  isInteraction: isInteraction,\n  Ok: Ok,\n  Bad: Bad,\n  prepAccount: prepAccount,\n  makeArgument: makeArgument,\n  makeUnknown: makeUnknown,\n  makeScript: makeScript,\n  makeTransaction: makeTransaction,\n  makeGetTransactionStatus: makeGetTransactionStatus,\n  makeGetTransaction: makeGetTransaction,\n  makeGetAccount: makeGetAccount,\n  makeGetEvents: makeGetEvents,\n  makePing: makePing,\n  makeGetBlock: makeGetBlock,\n  makeGetBlockHeader: makeGetBlockHeader,\n  makeGetCollection: makeGetCollection,\n  makeGetNetworkParameters: makeGetNetworkParameters,\n  isUnknown: isUnknown,\n  isScript: isScript,\n  isTransaction: isTransaction,\n  isGetTransactionStatus: isGetTransactionStatus,\n  isGetTransaction: isGetTransaction,\n  isGetAccount: isGetAccount,\n  isGetEvents: isGetEvents,\n  isPing: isPing,\n  isGetBlock: isGetBlock,\n  isGetBlockHeader: isGetBlockHeader,\n  isGetCollection: isGetCollection,\n  isGetNetworkParameters: isGetNetworkParameters,\n  isOk: isOk,\n  isBad: isBad,\n  why: why,\n  isAccount: isAccount,\n  isParam: isParam,\n  isArgument: isArgument,\n  pipe: pipe,\n  get: get,\n  put: put,\n  update: update,\n  destroy: destroy\n});\nfunction build() {\n  let fns = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return pipe(interaction(), fns);\n}\nconst DEFAULT_RESPONSE = `{\n    \"tag\":null,\n    \"transaction\":null,\n    \"transactionStatus\":null,\n    \"transactionId\":null,\n    \"encodedData\":null,\n    \"events\":null,\n    \"account\":null,\n    \"block\":null,\n    \"blockHeader\":null,\n    \"latestBlock\":null,\n    \"collection\":null,\n    \"networkParameters\":null\n}`;\nconst response = () => JSON.parse(DEFAULT_RESPONSE);\n\n/**\n * @description - A builder function that returns the interaction to get the latest block\n * @param {boolean} [isSealed] - Whether or not the block should be sealed\n * @returns {object} - An interaction object\n */\nfunction getBlock() {\n  let isSealed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  return pipe([makeGetBlock, ix => {\n    ix.block.isSealed = isSealed;\n    return Ok(ix);\n  }]);\n}\n\n/**\n * @description - A builder function that returns the interaction to get an account by address\n * @param {string} addr - The address of the account to getq\n * @returns {object} - An interaction object\n */\nfunction getAccount(addr) {\n  return pipe([makeGetAccount, ix => {\n    ix.account.addr = sansPrefix(addr);\n    return Ok(ix);\n  }]);\n}\nconst latestBlockDeprecationNotice = () => {\n  log.deprecate({\n    pkg: \"@onflow/decode\",\n    subject: \"Operating upon data of the latestBlock field of the response object\",\n    transition: \"https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field\"\n  });\n};\nconst decodeImplicit = async i => i;\nconst decodeVoid = async () => null;\nconst decodeType = async type => {\n  return type.staticType;\n};\nconst decodePath = async path => {\n  return {\n    domain: path.domain,\n    identifier: path.identifier\n  };\n};\nconst decodeCapability = async cap => {\n  return {\n    path: cap.path,\n    address: cap.address,\n    borrowType: cap.borrowType\n  };\n};\nconst decodeOptional = async (optional, decoders, stack) => optional ? await recurseDecode(optional, decoders, stack) : null;\nconst decodeReference = async v => ({\n  address: v.address,\n  type: v.type\n});\nconst decodeArray = async (array, decoders, stack) => await Promise.all(array.map(v => new Promise(async res => res(await recurseDecode(v, decoders, [...stack, v.type])))));\nconst decodeDictionary = async (dictionary, decoders, stack) => await dictionary.reduce(async (acc, v) => {\n  acc = await acc;\n  acc[await recurseDecode(v.key, decoders, [...stack, v.key])] = await recurseDecode(v.value, decoders, [...stack, v.key]);\n  return acc;\n}, Promise.resolve({}));\nconst decodeComposite = async (composite, decoders, stack) => {\n  const decoded = await composite.fields.reduce(async (acc, v) => {\n    acc = await acc;\n    acc[v.name] = await recurseDecode(v.value, decoders, [...stack, v.name]);\n    return acc;\n  }, Promise.resolve({}));\n  const decoder = composite.id && decoderLookup(decoders, composite.id);\n  return decoder ? await decoder(decoded) : decoded;\n};\nconst defaultDecoders = {\n  UInt: decodeImplicit,\n  Int: decodeImplicit,\n  UInt8: decodeImplicit,\n  Int8: decodeImplicit,\n  UInt16: decodeImplicit,\n  Int16: decodeImplicit,\n  UInt32: decodeImplicit,\n  Int32: decodeImplicit,\n  UInt64: decodeImplicit,\n  Int64: decodeImplicit,\n  UInt128: decodeImplicit,\n  Int128: decodeImplicit,\n  UInt256: decodeImplicit,\n  Int256: decodeImplicit,\n  Word8: decodeImplicit,\n  Word16: decodeImplicit,\n  Word32: decodeImplicit,\n  Word64: decodeImplicit,\n  UFix64: decodeImplicit,\n  Fix64: decodeImplicit,\n  String: decodeImplicit,\n  Character: decodeImplicit,\n  Bool: decodeImplicit,\n  Address: decodeImplicit,\n  Void: decodeVoid,\n  Optional: decodeOptional,\n  Reference: decodeReference,\n  Array: decodeArray,\n  Dictionary: decodeDictionary,\n  Event: decodeComposite,\n  Resource: decodeComposite,\n  Struct: decodeComposite,\n  Enum: decodeComposite,\n  Type: decodeType,\n  Path: decodePath,\n  Capability: decodeCapability\n};\nconst decoderLookup = (decoders, lookup) => {\n  const found = Object.keys(decoders).find(decoder => {\n    if (/^\\/.*\\/$/.test(decoder)) {\n      const reg = new RegExp(decoder.substring(1, decoder.length - 1));\n      return reg.test(lookup);\n    }\n    return decoder === lookup;\n  });\n  return lookup && found && decoders[found];\n};\nconst recurseDecode = async (decodeInstructions, decoders, stack) => {\n  let decoder = decoderLookup(decoders, decodeInstructions.type);\n  if (!decoder) throw new Error(`Undefined Decoder Error: ${decodeInstructions.type}@${stack.join(\".\")}`);\n  return await decoder(decodeInstructions.value, decoders, stack);\n};\n\n/**\n * @description - Decodes a response from Flow into JSON\n * @param {*} decodeInstructions - The response object from Flow\n * @param {object} customDecoders - An object of custom decoders\n * @param {Array<*>} stack - The stack of the current decoding\n * @returns {Promise<*>} - The decoded response\n */\nconst decode$1 = async function (decodeInstructions) {\n  let customDecoders = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let stack = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  // Filter out all default decoders which are overridden by a custom decoder regex\n  const filteredDecoders = Object.keys(defaultDecoders).filter(decoder => !Object.keys(customDecoders).find(customDecoder => new RegExp(customDecoder).test(decoder))).reduce((decoders, decoderKey) => {\n    decoders[decoderKey] = defaultDecoders[decoderKey];\n    return decoders;\n  }, customDecoders);\n  const decoders = {\n    ...filteredDecoders,\n    ...customDecoders\n  };\n  return recurseDecode(decodeInstructions, decoders, stack);\n};\nconst decodeResponse = async function (response) {\n  let customDecoders = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (response.encodedData) {\n    return decode$1(response.encodedData, customDecoders);\n  } else if (response.transactionStatus) {\n    return {\n      ...response.transactionStatus,\n      events: await Promise.all(response.transactionStatus.events.map(async function decodeEvents(e) {\n        return {\n          type: e.type,\n          transactionId: e.transactionId,\n          transactionIndex: e.transactionIndex,\n          eventIndex: e.eventIndex,\n          data: await decode$1(e.payload, customDecoders)\n        };\n      }))\n    };\n  } else if (response.transaction) {\n    return response.transaction;\n  } else if (response.events) {\n    return await Promise.all(response.events.map(async function decodeEvents(e) {\n      return {\n        blockId: e.blockId,\n        blockHeight: e.blockHeight,\n        blockTimestamp: e.blockTimestamp,\n        type: e.type,\n        transactionId: e.transactionId,\n        transactionIndex: e.transactionIndex,\n        eventIndex: e.eventIndex,\n        data: await decode$1(e.payload, customDecoders)\n      };\n    }));\n  } else if (response.account) {\n    return response.account;\n  } else if (response.block) {\n    return response.block;\n  } else if (response.blockHeader) {\n    return response.blockHeader;\n  } else if (response.latestBlock) {\n    latestBlockDeprecationNotice();\n    return response.latestBlock;\n  } else if (response.transactionId) {\n    return response.transactionId;\n  } else if (response.collection) {\n    return response.collection;\n  } else if (response.networkParameters) {\n    const chainIdMap = {\n      \"flow-testnet\": \"testnet\",\n      \"flow-mainnet\": \"mainnet\",\n      \"flow-emulator\": \"local\"\n    };\n    return {\n      chainId: chainIdMap[response.networkParameters.chainId]\n    };\n  }\n  return null;\n};\nconst isFn$2 = v => typeof v === \"function\";\nconst isString$1 = v => typeof v === \"string\";\nconst oldIdentifierPatternFn = () => /\\b(0x\\w+)\\b/g;\nfunction isOldIdentifierSyntax(cadence) {\n  return oldIdentifierPatternFn().test(cadence);\n}\nconst newIdentifierPatternFn = () => /import\\s+\"(\\w+)\"/g;\nfunction isNewIdentifierSyntax(cadence) {\n  return newIdentifierPatternFn().test(cadence);\n}\nfunction getContractIdentifierSyntaxMatches(cadence) {\n  return cadence.matchAll(newIdentifierPatternFn());\n}\nasync function resolveCadence(ix) {\n  if (!isTransaction(ix) && !isScript(ix)) return ix;\n  var cadence = get(ix, \"ix.cadence\");\n  invariant$1(isFn$2(cadence) || isString$1(cadence), \"Cadence needs to be a function or a string.\");\n  if (isFn$2(cadence)) cadence = await cadence({});\n  invariant$1(isString$1(cadence), \"Cadence needs to be a string at this point.\");\n  invariant$1(!isOldIdentifierSyntax(cadence) || !isNewIdentifierSyntax(cadence), \"Both account identifier and contract identifier syntax not simultaneously supported.\");\n  if (isOldIdentifierSyntax(cadence)) {\n    cadence = await config().where(/^0x/).then(d => Object.entries(d).reduce((cadence, _ref) => {\n      let [key, value] = _ref;\n      const regex = new RegExp(\"(\\\\b\" + key + \"\\\\b)\", \"g\");\n      return cadence.replace(regex, value);\n    }, cadence));\n  }\n  if (isNewIdentifierSyntax(cadence)) {\n    for (const [fullMatch, contractName] of getContractIdentifierSyntaxMatches(cadence)) {\n      const address = await config().get(`system.contracts.${contractName}`);\n      if (address) {\n        cadence = cadence.replace(fullMatch, `import ${contractName} from ${withPrefix(address)}`);\n      } else {\n        logger.log({\n          title: \"Contract Placeholder not found\",\n          message: `Cannot find a value for contract placeholder ${contractName}. Please add to your flow.json or explicitly add it to the config 'contracts.*' namespace.`,\n          level: logger.LEVELS.warn\n        });\n      }\n    }\n  }\n\n  // We need to move this over in any case.\n  ix.message.cadence = cadence;\n  return ix;\n}\nconst isFn$1 = v => typeof v === \"function\";\nfunction cast(arg) {\n  // prettier-ignore\n  invariant$1(typeof arg.xform != null, `No type specified for argument: ${arg.value}`);\n  if (isFn$1(arg.xform)) return arg.xform(arg.value);\n  if (isFn$1(arg.xform.asArgument)) return arg.xform.asArgument(arg.value);\n\n  // prettier-ignore\n  invariant$1(false, `Invalid Argument`, arg);\n}\nasync function handleArgResolution(arg) {\n  let depth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;\n  invariant$1(depth > 0, `Argument Resolve Recursion Limit Exceeded for Arg: ${arg.tempId}`);\n  if (isFn$1(arg.resolveArgument)) {\n    const resolvedArg = await arg.resolveArgument();\n    return handleArgResolution(resolvedArg, depth - 1);\n  } else {\n    return arg;\n  }\n}\nasync function resolveArguments(ix) {\n  if (isTransaction(ix) || isScript(ix)) {\n    for (let [id, arg] of Object.entries(ix.arguments)) {\n      const res = await handleArgResolution(arg);\n      ix.arguments[id].asArgument = cast(res);\n    }\n  }\n  return ix;\n}\nconst encodeTransactionPayload = tx => prependTransactionDomainTag(rlpEncode(preparePayload(tx)));\nconst encodeTransactionEnvelope = tx => prependTransactionDomainTag(rlpEncode(prepareEnvelope(tx)));\nconst encodeTxIdFromVoucher = voucher => sha3_256(rlpEncode(prepareVoucher(voucher)));\nconst rightPaddedHexBuffer = (value, pad) => Buffer.from(value.padEnd(pad * 2, 0), \"hex\");\nconst leftPaddedHexBuffer = (value, pad) => Buffer.from(value.padStart(pad * 2, 0), \"hex\");\nconst TRANSACTION_DOMAIN_TAG = rightPaddedHexBuffer(Buffer.from(\"FLOW-V0.0-transaction\").toString(\"hex\"), 32).toString(\"hex\");\nconst prependTransactionDomainTag = tx => TRANSACTION_DOMAIN_TAG + tx;\nconst addressBuffer = addr => leftPaddedHexBuffer(addr, 8);\nconst blockBuffer = block => leftPaddedHexBuffer(block, 32);\nconst argumentToString = arg => Buffer.from(JSON.stringify(arg), \"utf8\");\nconst scriptBuffer = script => Buffer.from(script, \"utf8\");\nconst signatureBuffer = signature => Buffer.from(signature, \"hex\");\nconst rlpEncode = v => {\n  return encode(v).toString(\"hex\");\n};\nconst sha3_256 = msg => {\n  const sha = new SHA3(256);\n  sha.update(Buffer.from(msg, \"hex\"));\n  return sha.digest().toString(\"hex\");\n};\nconst preparePayload = tx => {\n  validatePayload(tx);\n  return [scriptBuffer(tx.cadence), tx.arguments.map(argumentToString), blockBuffer(tx.refBlock), tx.computeLimit, addressBuffer(sansPrefix(tx.proposalKey.address)), tx.proposalKey.keyId, tx.proposalKey.sequenceNum, addressBuffer(sansPrefix(tx.payer)), tx.authorizers.map(authorizer => addressBuffer(sansPrefix(authorizer)))];\n};\nconst prepareEnvelope = tx => {\n  validateEnvelope(tx);\n  return [preparePayload(tx), preparePayloadSignatures(tx)];\n};\nconst preparePayloadSignatures = tx => {\n  const signers = collectSigners(tx);\n  return tx.payloadSigs.map(sig => {\n    return {\n      signerIndex: signers.get(sig.address),\n      keyId: sig.keyId,\n      sig: sig.sig\n    };\n  }).sort((a, b) => {\n    if (a.signerIndex > b.signerIndex) return 1;\n    if (a.signerIndex < b.signerIndex) return -1;\n    if (a.keyId > b.keyId) return 1;\n    if (a.keyId < b.keyId) return -1;\n  }).map(sig => {\n    return [sig.signerIndex, sig.keyId, signatureBuffer(sig.sig)];\n  });\n};\nconst collectSigners = tx => {\n  const signers = new Map();\n  let i = 0;\n  const addSigner = addr => {\n    if (!signers.has(addr)) {\n      signers.set(addr, i);\n      i++;\n    }\n  };\n  addSigner(tx.proposalKey.address);\n  addSigner(tx.payer);\n  tx.authorizers.forEach(addSigner);\n  return signers;\n};\nconst prepareVoucher = voucher => {\n  validateVoucher(voucher);\n  const signers = collectSigners(voucher);\n  const prepareSigs = sigs => {\n    return sigs.map(_ref => {\n      let {\n        address,\n        keyId,\n        sig\n      } = _ref;\n      return {\n        signerIndex: signers.get(address),\n        keyId,\n        sig\n      };\n    }).sort((a, b) => {\n      if (a.signerIndex > b.signerIndex) return 1;\n      if (a.signerIndex < b.signerIndex) return -1;\n      if (a.keyId > b.keyId) return 1;\n      if (a.keyId < b.keyId) return -1;\n    }).map(sig => {\n      return [sig.signerIndex, sig.keyId, signatureBuffer(sig.sig)];\n    });\n  };\n  return [[scriptBuffer(voucher.cadence), voucher.arguments.map(argumentToString), blockBuffer(voucher.refBlock), voucher.computeLimit, addressBuffer(sansPrefix(voucher.proposalKey.address)), voucher.proposalKey.keyId, voucher.proposalKey.sequenceNum, addressBuffer(sansPrefix(voucher.payer)), voucher.authorizers.map(authorizer => addressBuffer(sansPrefix(authorizer)))], prepareSigs(voucher.payloadSigs), prepareSigs(voucher.envelopeSigs)];\n};\nconst validatePayload = tx => {\n  payloadFields.forEach(field => checkField(tx, field));\n  proposalKeyFields.forEach(field => checkField(tx.proposalKey, field, \"proposalKey\"));\n};\nconst validateEnvelope = tx => {\n  payloadSigsFields.forEach(field => checkField(tx, field));\n  tx.payloadSigs.forEach((sig, index) => {\n    payloadSigFields.forEach(field => checkField(sig, field, \"payloadSigs\", index));\n  });\n};\nconst validateVoucher = voucher => {\n  payloadFields.forEach(field => checkField(voucher, field));\n  proposalKeyFields.forEach(field => checkField(voucher.proposalKey, field, \"proposalKey\"));\n  payloadSigsFields.forEach(field => checkField(voucher, field));\n  voucher.payloadSigs.forEach((sig, index) => {\n    payloadSigFields.forEach(field => checkField(sig, field, \"payloadSigs\", index));\n  });\n  envelopeSigsFields.forEach(field => checkField(voucher, field));\n  voucher.envelopeSigs.forEach((sig, index) => {\n    envelopeSigFields.forEach(field => checkField(sig, field, \"envelopeSigs\", index));\n  });\n};\nconst isNumber = v => typeof v === \"number\";\nconst isString = v => typeof v === \"string\";\nconst isObject = v => v !== null && typeof v === \"object\";\nconst isArray = v => isObject(v) && v instanceof Array;\nconst payloadFields = [{\n  name: \"cadence\",\n  check: isString\n}, {\n  name: \"arguments\",\n  check: isArray\n}, {\n  name: \"refBlock\",\n  check: isString,\n  defaultVal: \"0\"\n}, {\n  name: \"computeLimit\",\n  check: isNumber\n}, {\n  name: \"proposalKey\",\n  check: isObject\n}, {\n  name: \"payer\",\n  check: isString\n}, {\n  name: \"authorizers\",\n  check: isArray\n}];\nconst proposalKeyFields = [{\n  name: \"address\",\n  check: isString\n}, {\n  name: \"keyId\",\n  check: isNumber\n}, {\n  name: \"sequenceNum\",\n  check: isNumber\n}];\nconst payloadSigsFields = [{\n  name: \"payloadSigs\",\n  check: isArray\n}];\nconst payloadSigFields = [{\n  name: \"address\",\n  check: isString\n}, {\n  name: \"keyId\",\n  check: isNumber\n}, {\n  name: \"sig\",\n  check: isString\n}];\nconst envelopeSigsFields = [{\n  name: \"envelopeSigs\",\n  check: isArray\n}];\nconst envelopeSigFields = [{\n  name: \"address\",\n  check: isString\n}, {\n  name: \"keyId\",\n  check: isNumber\n}, {\n  name: \"sig\",\n  check: isString\n}];\nconst checkField = (obj, field, base, index) => {\n  const {\n    name,\n    check,\n    defaultVal\n  } = field;\n  if (obj[name] == null && defaultVal != null) obj[name] = defaultVal;\n  if (obj[name] == null) throw missingFieldError(name, base, index);\n  if (!check(obj[name])) throw invalidFieldError(name, base, index);\n};\nconst printFieldName = (field, base, index) => {\n  if (!!base) return index == null ? `${base}.${field}` : `${base}.${index}.${field}`;\n  return field;\n};\nconst missingFieldError = (field, base, index) => new Error(`Missing field ${printFieldName(field, base, index)}`);\nconst invalidFieldError = (field, base, index) => new Error(`Invalid field ${printFieldName(field, base, index)}`);\nfunction findInsideSigners(ix) {\n  // Inside Signers Are: (authorizers + proposer) - payer\n  let inside = new Set(ix.authorizations);\n  inside.add(ix.proposer);\n  if (Array.isArray(ix.payer)) {\n    ix.payer.forEach(p => inside.delete(p));\n  } else {\n    inside.delete(ix.payer);\n  }\n  return Array.from(inside);\n}\nfunction findOutsideSigners(ix) {\n  // Outside Signers Are: (payer)\n  let outside = new Set(Array.isArray(ix.payer) ? ix.payer : [ix.payer]);\n  return Array.from(outside);\n}\nconst createSignableVoucher = ix => {\n  const buildAuthorizers = () => {\n    const authorizations = ix.authorizations.map(cid => withPrefix(ix.accounts[cid].addr)).reduce((prev, current) => {\n      return prev.find(item => item === current) ? prev : [...prev, current];\n    }, []);\n    return authorizations[0] ? authorizations : [];\n  };\n  const buildInsideSigners = () => findInsideSigners(ix).map(id => ({\n    address: withPrefix(ix.accounts[id].addr),\n    keyId: ix.accounts[id].keyId,\n    sig: ix.accounts[id].signature\n  }));\n  const buildOutsideSigners = () => findOutsideSigners(ix).map(id => ({\n    address: withPrefix(ix.accounts[id].addr),\n    keyId: ix.accounts[id].keyId,\n    sig: ix.accounts[id].signature\n  }));\n  return {\n    cadence: ix.message.cadence,\n    refBlock: ix.message.refBlock || null,\n    computeLimit: ix.message.computeLimit,\n    arguments: ix.message.arguments.map(id => ix.arguments[id].asArgument),\n    proposalKey: {\n      address: withPrefix(ix.accounts[ix.proposer].addr),\n      keyId: ix.accounts[ix.proposer].keyId,\n      sequenceNum: ix.accounts[ix.proposer].sequenceNum\n    },\n    payer: withPrefix(ix.accounts[Array.isArray(ix.payer) ? ix.payer[0] : ix.payer].addr),\n    authorizers: buildAuthorizers(),\n    payloadSigs: buildInsideSigners(),\n    envelopeSigs: buildOutsideSigners()\n  };\n};\nconst voucherToTxId = voucher => {\n  return encodeTxIdFromVoucher(voucher);\n};\nconst idof$1 = acct => `${withPrefix(acct.addr)}-${acct.keyId}`;\nconst isFn = v => typeof v === \"function\";\nfunction buildPreSignable(acct, ix) {\n  try {\n    return {\n      f_type: \"PreSignable\",\n      f_vsn: \"1.0.1\",\n      roles: acct.role,\n      cadence: ix.message.cadence,\n      args: ix.message.arguments.map(d => ix.arguments[d].asArgument),\n      data: {},\n      interaction: ix,\n      voucher: createSignableVoucher(ix)\n    };\n  } catch (error) {\n    console.error(\"buildPreSignable\", error);\n    throw error;\n  }\n}\nasync function collectAccounts(ix, accounts, last) {\n  let depth = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 3;\n  invariant$1(depth, \"Account Resolve Recursion Limit Exceeded\", {\n    ix,\n    accounts\n  });\n  let authorizations = [];\n  for (let ax of accounts) {\n    let resolve = ax.resolve;\n    ax.resolve = null;\n    var old = last || ax;\n    if (isFn(resolve)) ax = await resolve(ax, buildPreSignable(ax, ix));\n    if (Array.isArray(ax)) {\n      await collectAccounts(ix, ax, old, depth - 1);\n    } else {\n      if (ax.addr) {\n        ax.addr = sansPrefix(ax.addr);\n      }\n      if (ax.addr != null && ax.keyId != null) {\n        ax.tempId = idof$1(ax);\n      }\n      ix.accounts[ax.tempId] = ix.accounts[ax.tempId] || ax;\n      ix.accounts[ax.tempId].role.proposer = ix.accounts[ax.tempId].role.proposer || ax.role.proposer;\n      ix.accounts[ax.tempId].role.payer = ix.accounts[ax.tempId].role.payer || ax.role.payer;\n      ix.accounts[ax.tempId].role.authorizer = ix.accounts[ax.tempId].role.authorizer || ax.role.authorizer;\n      if (ix.accounts[ax.tempId].role.proposer && ix.proposer === old.tempId) {\n        ix.proposer = ax.tempId;\n      }\n      if (ix.accounts[ax.tempId].role.payer) {\n        if (Array.isArray(ix.payer)) {\n          ix.payer = Array.from(new Set([...ix.payer, ax.tempId].map(d => d === old.tempId ? ax.tempId : d)));\n        } else {\n          ix.payer = Array.from(new Set([ix.payer, ax.tempId].map(d => d === old.tempId ? ax.tempId : d)));\n        }\n        if (ix.payer.length > 1) {\n          // remove payer dups based on addr and keyId\n          const dupList = [];\n          const payerAccts = [];\n          ix.payer = ix.payer.reduce((g, tempId) => {\n            const {\n              addr\n            } = ix.accounts[tempId];\n            const key = idof$1(ix.accounts[tempId]);\n            payerAccts.push(addr);\n            if (dupList.includes(key)) return g;\n            dupList.push(key);\n            return [...g, tempId];\n          }, []);\n          const multiAccts = Array.from(new Set(payerAccts));\n          if (multiAccts.length > 1) {\n            throw new Error(\"Payer can not be different accounts\");\n          }\n        }\n      }\n      if (ix.accounts[ax.tempId].role.authorizer) {\n        if (last) {\n          // do group replacement\n          authorizations = Array.from(new Set([...authorizations, ax.tempId]));\n        } else {\n          // do 1-1 replacement\n          ix.authorizations = ix.authorizations.map(d => d === old.tempId ? ax.tempId : d);\n        }\n      }\n    }\n    if (old.tempId != ax.tempId) delete ix.accounts[old.tempId];\n  }\n  if (last) {\n    // complete (flatmap) group replacement\n    ix.authorizations = ix.authorizations.map(d => d === last.tempId ? authorizations : d).reduce((prev, curr) => Array.isArray(curr) ? [...prev, ...curr] : [...prev, curr], []);\n  }\n}\nasync function resolveAccounts(ix) {\n  if (isTransaction(ix)) {\n    if (!Array.isArray(ix.payer)) {\n      log.deprecate({\n        pkg: \"FCL\",\n        subject: '\"ix.payer\" must be an array. Support for ix.payer as a singular',\n        message: \"See changelog for more info.\"\n      });\n    }\n    try {\n      await collectAccounts(ix, Object.values(ix.accounts));\n      await collectAccounts(ix, Object.values(ix.accounts));\n    } catch (error) {\n      console.error(\"=== SAD PANDA ===\\n\\n\", error, \"\\n\\n=== SAD PANDA ===\");\n      throw error;\n    }\n  }\n  return ix;\n}\nasync function resolveSignatures(ix) {\n  if (isTransaction(ix)) {\n    try {\n      let insideSigners = findInsideSigners(ix);\n      const insidePayload = encodeTransactionPayload(prepForEncoding(ix));\n      await Promise.all(insideSigners.map(fetchSignature(ix, insidePayload)));\n      let outsideSigners = findOutsideSigners(ix);\n      const outsidePayload = encodeTransactionEnvelope({\n        ...prepForEncoding(ix),\n        payloadSigs: insideSigners.map(id => ({\n          address: ix.accounts[id].addr,\n          keyId: ix.accounts[id].keyId,\n          sig: ix.accounts[id].signature\n        }))\n      });\n      await Promise.all(outsideSigners.map(fetchSignature(ix, outsidePayload)));\n    } catch (error) {\n      console.error(\"Signatures\", error, {\n        ix\n      });\n      throw error;\n    }\n  }\n  return ix;\n}\nfunction fetchSignature(ix, payload) {\n  return async function innerFetchSignature(id) {\n    const acct = ix.accounts[id];\n    if (acct.signature != null) return;\n    const {\n      signature\n    } = await acct.signingFunction(buildSignable(acct, payload, ix));\n    ix.accounts[id].signature = signature;\n  };\n}\nfunction buildSignable(acct, message, ix) {\n  try {\n    return {\n      f_type: \"Signable\",\n      f_vsn: \"1.0.1\",\n      message,\n      addr: sansPrefix(acct.addr),\n      keyId: acct.keyId,\n      roles: acct.role,\n      cadence: ix.message.cadence,\n      args: ix.message.arguments.map(d => ix.arguments[d].asArgument),\n      data: {},\n      interaction: ix,\n      voucher: createSignableVoucher(ix)\n    };\n  } catch (error) {\n    console.error(\"buildSignable\", error);\n    throw error;\n  }\n}\nfunction prepForEncoding(ix) {\n  const payerAddress = sansPrefix((Array.isArray(ix.payer) ? ix.accounts[ix.payer[0]] : ix.accounts[ix.payer]).addr);\n  return {\n    cadence: ix.message.cadence,\n    refBlock: ix.message.refBlock || null,\n    computeLimit: ix.message.computeLimit,\n    arguments: ix.message.arguments.map(id => ix.arguments[id].asArgument),\n    proposalKey: {\n      address: sansPrefix(ix.accounts[ix.proposer].addr),\n      keyId: ix.accounts[ix.proposer].keyId,\n      sequenceNum: ix.accounts[ix.proposer].sequenceNum\n    },\n    payer: payerAddress,\n    authorizers: ix.authorizations.map(cid => sansPrefix(ix.accounts[cid].addr)).reduce((prev, current) => {\n      return prev.find(item => item === current) ? prev : [...prev, current];\n    }, [])\n  };\n}\nasync function resolveValidators(ix) {\n  const validators = get(ix, \"ix.validators\", []);\n  return pipe(ix, validators.map(cb => ix => cb(ix, {\n    Ok,\n    Bad\n  })));\n}\nasync function resolveFinalNormalization(ix) {\n  for (let key of Object.keys(ix.accounts)) {\n    ix.accounts[key].addr = sansPrefix(ix.accounts[key].addr);\n  }\n  return ix;\n}\nasync function resolveVoucherIntercept(ix) {\n  const fn = get(ix, \"ix.voucher-intercept\");\n  if (isFn$3(fn)) {\n    await fn(createSignableVoucher(ix));\n  }\n  return ix;\n}\nconst DEFAULT_COMPUTE_LIMIT = 100;\nasync function resolveComputeLimit(ix) {\n  if (isTransaction(ix)) {\n    ix.message.computeLimit = ix.message.computeLimit || (await config.get(\"fcl.limit\"));\n    if (!ix.message.computeLimit) {\n      logger.log.deprecate({\n        pkg: \"FCL/SDK\",\n        subject: \"The built-in default compute limit (DEFAULT_COMPUTE_LIMIT=10)\",\n        transition: \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0009-deprecate-default-compute-limit\"\n      });\n      ix.message.computeLimit = DEFAULT_COMPUTE_LIMIT;\n    }\n  }\n  return ix;\n}\nconst noop = v => v;\nconst debug = function (key) {\n  let fn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  return async ix => {\n    const accts = ix => [\"\\nAccounts:\", {\n      proposer: ix.proposer,\n      authorizations: ix.authorizations,\n      payer: ix.payer\n    }, \"\\n\\nDetails:\", ix.accounts].filter(Boolean);\n    const log = function () {\n      for (var _len = arguments.length, msg = new Array(_len), _key = 0; _key < _len; _key++) {\n        msg[_key] = arguments[_key];\n      }\n      console.log(`debug[${key}] ---\\n`, ...msg, \"\\n\\n\\n---\");\n    };\n    if (await config.get(`debug.${key}`)) await fn(ix, log, accts);\n    return ix;\n  };\n};\nconst resolve = pipe([resolveCadence, debug(\"cadence\", (ix, log) => log(ix.message.cadence)), resolveComputeLimit, debug(\"compute limit\", (ix, log) => log(ix.message.computeLimit)), resolveArguments, debug(\"arguments\", (ix, log) => log(ix.message.arguments, ix.message)), resolveAccounts, debug(\"accounts\", (ix, log, accts) => log(...accts(ix))), /* special */execFetchRef, /* special */execFetchSequenceNumber, resolveSignatures, debug(\"signatures\", (ix, log, accts) => log(...accts(ix))), resolveFinalNormalization, resolveValidators, resolveVoucherIntercept, debug(\"resolved\", (ix, log) => log(ix))]);\nasync function execFetchRef(ix) {\n  if (isTransaction(ix) && ix.message.refBlock == null) {\n    const node = await config().get(\"accessNode.api\");\n    const sendFn = await config.first([\"sdk.transport\", \"sdk.send\"], send$1);\n    invariant$1(sendFn, `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`);\n    ix.message.refBlock = (await sendFn(build([getBlock()]), {\n      config,\n      response,\n      Buffer,\n      ix: ixModule\n    }, {\n      node\n    }).then(decodeResponse)).id;\n  }\n  return ix;\n}\nasync function execFetchSequenceNumber(ix) {\n  if (isTransaction(ix)) {\n    var acct = Object.values(ix.accounts).find(a => a.role.proposer);\n    invariant$1(acct, `Transactions require a proposer`);\n    if (acct.sequenceNum == null) {\n      const node = await config().get(\"accessNode.api\");\n      const sendFn = await config.first([\"sdk.transport\", \"sdk.send\"], send$1);\n      invariant$1(sendFn, `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`);\n      ix.accounts[acct.tempId].sequenceNum = await sendFn(await build([getAccount(acct.addr)]), {\n        config,\n        response,\n        Buffer,\n        ix: ixModule\n      }, {\n        node\n      }).then(decodeResponse).then(acct => acct.keys).then(keys => keys.find(key => key.index === acct.keyId)).then(key => key.sequenceNumber);\n    }\n  }\n  return ix;\n}\nfunction invariant() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  if (args.length > 1) {\n    const [predicate, message] = args;\n    return invariant((ix, _ref) => {\n      let {\n        Ok,\n        Bad\n      } = _ref;\n      return predicate ? Ok(ix) : Bad(ix, message);\n    });\n  }\n  const [fn] = args;\n  return ix => fn(ix, {\n    Ok,\n    Bad\n  });\n}\n\n/**\n * @description - Sends arbitrary scripts, transactions, and requests to Flow\n * @param {Array.<Function>} args - An array of functions that take interaction and return interaction\n * @param {object} opts - Optional parameters\n * @returns {Promise<*>} - A promise that resolves to a response\n */\nconst send = async function () {\n  let args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const sendFn = await config.first([\"sdk.transport\", \"sdk.send\"], opts.send || send$1);\n  invariant(sendFn, `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`);\n  const resolveFn = await config.first([\"sdk.resolve\"], opts.resolve || resolve);\n  opts.node = opts.node || (await config().get(\"accessNode.api\"));\n  if (Array.isArray(args)) args = pipe(interaction(), args);\n  return sendFn(await resolveFn(args), {\n    config,\n    response,\n    ix: ixModule,\n    Buffer\n  }, opts);\n};\nasync function decode(response) {\n  const decodersFromConfig = await config().where(/^decoder\\./);\n  const decoders = Object.entries(decodersFromConfig).map(_ref => {\n    let [pattern, xform] = _ref;\n    pattern = `/${pattern.replace(/^decoder\\./, \"\")}$/`;\n    return [pattern, xform];\n  });\n  return decodeResponse(response, Object.fromEntries(decoders));\n}\nconst findPayloadSigners = voucher => {\n  // Payload Signers Are: (authorizers + proposer) - payer\n  let payload = new Set(voucher.authorizers);\n  payload.add(voucher.proposalKey.address);\n  payload.delete(voucher.payer);\n  return Array.from(payload).map(withPrefix);\n};\nconst findEnvelopeSigners = voucher => {\n  // Envelope Signers Are: (payer)\n  let envelope = new Set([voucher.payer]);\n  return Array.from(envelope).map(withPrefix);\n};\nclass UnableToDetermineMessageEncodingTypeForSignerAddress extends Error {\n  constructor(signerAddress) {\n    const msg = `\n        Encode Message From Signable Error: Unable to determine message encoding for signer addresss: ${signerAddress}. \n        Please ensure the address: ${signerAddress} is intended to sign the given transaction as specified by the transaction signable.\n      `.trim();\n    super(msg);\n    this.name = \"Unable To Determine Message Encoding For Signer Addresss\";\n  }\n}\nconst encodeMessageFromSignable = (signable, signerAddress) => {\n  let payloadSigners = findPayloadSigners(signable.voucher);\n  let envelopeSigners = findEnvelopeSigners(signable.voucher);\n  const isPayloadSigner = payloadSigners.includes(withPrefix(signerAddress));\n  const isEnvelopeSigner = envelopeSigners.includes(withPrefix(signerAddress));\n  if (!isPayloadSigner && !isEnvelopeSigner) {\n    throw new UnableToDetermineMessageEncodingTypeForSignerAddress(signerAddress);\n  }\n  const message = {\n    cadence: signable.voucher.cadence,\n    refBlock: signable.voucher.refBlock,\n    computeLimit: signable.voucher.computeLimit,\n    arguments: signable.voucher.arguments,\n    proposalKey: {\n      ...signable.voucher.proposalKey,\n      address: sansPrefix(signable.voucher.proposalKey.address)\n    },\n    payer: sansPrefix(signable.voucher.payer),\n    authorizers: signable.voucher.authorizers.map(sansPrefix),\n    payloadSigs: signable.voucher.payloadSigs.map(ps => ({\n      ...ps,\n      address: sansPrefix(ps.address)\n    }))\n  };\n  return isPayloadSigner ? encodeTransactionPayload(message) : encodeTransactionEnvelope(message);\n};\nfunction validator(cb) {\n  return update(\"ix.validators\", validators => Array.isArray(validators) ? validators.push(cb) : [cb]);\n}\n\n/**\n * @description - A builder function that returns a partial interaction to a block at a specific height\n * @param {number} height - The height of the block to get\n * @returns {object} - A partial interaction object\n */\nfunction atBlockHeight(height) {\n  return pipe([ix => {\n    ix.block.height = height;\n    return ix;\n  }, validator(ix => {\n    if (typeof ix.block.isSealed === \"boolean\") throw new Error(\"Unable to specify both block height and isSealed.\");\n    if (ix.block.id) throw new Error(\"Unable to specify both block height and block id.\");\n    return ix;\n  })]);\n}\nfunction atBlockId(id) {\n  return pipe([ix => {\n    ix.block.id = id;\n    return Ok(ix);\n  }, validator((ix, _ref) => {\n    let {\n      Ok,\n      Bad\n    } = _ref;\n    if (isGetAccount(ix)) return Bad(ix, \"Unable to specify a block id with a Get Account interaction.\");\n    if (typeof ix.block.isSealed === \"boolean\") return Bad(ix, \"Unable to specify both block id and isSealed.\");\n    if (ix.block.height) return Bad(ix, \"Unable to specify both block id and block height.\");\n    return Ok(ix);\n  })]);\n}\n\n/**\n * @typedef {import(\"@onflow/typedefs\").Account} Account\n */\n\n/**\n * @description  Returns the details of an account from their public address\n * @param {string} address - Address of the account\n * @param {object} [queryOptions] - Query parameters\n * @param {number} [queryOptions.height] - Block height to query\n * @param {string} [queryOptions.id] - Block ID to query\n * @param {object} [opts] - Optional parameters\n * @returns {Promise<Account>} - A promise that resolves to an account response\n */\nfunction account(address) {\n  let {\n    height,\n    id\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let opts = arguments.length > 2 ? arguments[2] : undefined;\n  invariant$1(!(id && height), `Method: account -- Cannot pass \"id\" and \"height\" simultaneously`);\n\n  // Get account by ID\n  if (id) return send([getAccount(address), atBlockId(id)], opts).then(decodeResponse);\n\n  // Get account by height\n  if (height) return send([getAccount(address), atBlockHeight(height)], opts).then(decodeResponse);\n  return send([getAccount(address)], opts).then(decodeResponse);\n}\n\n/**\n * @typedef {import(\"@onflow/typedefs\").Block} Block\n */\n\n/**\n * @description Returns the latest block (optionally sealed or not), by id, or by height\n * @param {object} [queryOptions] - Query parameters\n * @param {boolean} [queryOptions.sealed=false] - Whether to query for a sealed block\n * @param {number} [queryOptions.height] - Block height to query\n * @param {string} [queryOptions.id] - Block ID to query\n * @param {object} [opts] - Optional parameters\n * @returns {Promise<Block>} - A promise that resolves to a block response\n */\nfunction block() {\n  let {\n    sealed = false,\n    id,\n    height\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  invariant$1(!(sealed && id || sealed && height), `Method: block -- Cannot pass \"sealed\" with \"id\" or \"height\"`);\n  invariant$1(!(id && height), `Method: block -- Cannot pass \"id\" and \"height\" simultaneously`);\n\n  // Get block by ID\n  if (id) return send([getBlock(), atBlockId(id)], opts).then(decodeResponse);\n\n  // Get block by height\n  if (height) return send([getBlock(), atBlockHeight(height)], opts).then(decodeResponse);\n\n  // Get latest block\n  return send([getBlock(sealed)], opts).then(decodeResponse);\n}\nfunction authorizations() {\n  let ax = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return pipe(ax.map(authz => {\n    return prepAccount(authz, {\n      role: AUTHORIZER\n    });\n  }));\n}\nfunction authorization(addr, signingFunction, keyId, sequenceNum) {\n  return {\n    addr,\n    signingFunction,\n    keyId,\n    sequenceNum\n  };\n}\nfunction getEvents(eventType, start, end) {\n  if (typeof start !== \"undefined\" || typeof end !== \"undefined\") {\n    logger.log.deprecate({\n      pkg: \"FCL/SDK\",\n      subject: \"Passing a start and end into getEvents\",\n      transition: \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0005-deprecate-start-end-get-events-builder\"\n    });\n  }\n  return pipe([makeGetEvents, ix => {\n    ix.events.eventType = eventType;\n    ix.events.start = start;\n    ix.events.end = end;\n    return Ok(ix);\n  }]);\n}\n\n/**\n * @description - A builder function that returns all instances of a particular event (by name) within a height range\n * NOTE:\n * - The block range provided must be from the current spork.\n * - The block range provided must be 250 blocks or lower per request.\n * @param {string} eventName - The name of the event to get\n * @param {number} fromBlockHeight - The height of the block to start looking for events (inclusive)\n * @param {number} toBlockHeight - The height of the block to stop looking for events (inclusive)\n * @returns {object} - An interaction object\n */\nfunction getEventsAtBlockHeightRange(eventName, fromBlockHeight, toBlockHeight) {\n  return pipe([makeGetEvents, ix => {\n    ix.events.eventType = eventName;\n    ix.events.start = fromBlockHeight;\n    ix.events.end = toBlockHeight;\n    return Ok(ix);\n  }]);\n}\n\n/**\n * @description - A builder function that returns all instances of a particular event (by name) within a set of blocks, specified by block ids\n * NOTE:\n * - The block range provided must be from the current spork.\n * @param {string} eventName - The name of the event to get\n * @param {number[]} blockIds - The ids of the blocks to look for events\n * @returns {object} - An interaction object\n */\nfunction getEventsAtBlockIds(eventName) {\n  let blockIds = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return pipe([makeGetEvents, ix => {\n    ix.events.eventType = eventName;\n    ix.events.blockIds = blockIds;\n    return Ok(ix);\n  }]);\n}\n\n/**\n * @description - A builder function that returns the interaction to get a block header\n * @param {boolean} [isSealed] - Whether or not the block should be sealed\n * @returns {object} - An interaction object\n */\nfunction getBlockHeader() {\n  let isSealed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  return pipe([makeGetBlockHeader, ix => {\n    ix.block.isSealed = isSealed;\n    return Ok(ix);\n  }]);\n}\n\n/**\n * @description - A builder function that returns all a collection containing a list of transaction ids by its collection id\n * NOTE:\n * - The block range provided must be from the current spork. All events emitted during past sporks is current unavailable.\n * @param {string} [id] - The id of the collection to get\n * @returns {object} - An interaction object\n */\nfunction getCollection() {\n  let id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  return pipe([makeGetCollection, ix => {\n    ix.collection.id = id;\n    return ix;\n  }]);\n}\n\n/**\n * @description - A builder function that returns the status of transaction\n * NOTE: The transactionID provided must be from the current spork.\n * @param {string} transactionId - The id of the transaction to get status\n * @returns {object} - An interaction object\n */\nfunction getTransactionStatus(transactionId) {\n  return pipe([makeGetTransactionStatus, ix => {\n    ix.transaction.id = transactionId;\n    return Ok(ix);\n  }]);\n}\n\n/**\n * @description - A builder function that returns a transaction\n * NOTE: The transactionID provided must be from the current spork.\n * @param {string} transactionId - The id of the transaction to get\n * @returns {object} - An interaction object\n */\nfunction getTransaction(transactionId) {\n  return pipe([makeGetTransaction, ix => {\n    ix.transaction.id = transactionId;\n    return Ok(ix);\n  }]);\n}\nfunction getNetworkParameters() {\n  return pipe([makeGetNetworkParameters, ix => {\n    return Ok(ix);\n  }]);\n}\nfunction limit(computeLimit) {\n  return ix => {\n    ix.message.computeLimit = computeLimit;\n    return ix;\n  };\n}\n\n/**\n * @description - A utility builder to be used with other builders to pass in arguments with a value and supported type\n * @param {Array.<*>} ax - An array of arguments\n * @returns {object} - An interaction object\n */\nfunction args() {\n  let ax = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return pipe(ax.map(makeArgument));\n}\n\n/**\n * @description - A utility builder to be used with fcl.args[...] to create FCL supported arguments for interactions\n * @param {any} value - The value of the argument\n * @param {Function} xform - A function to transform the value\n * @returns {object} - An argument object\n */\nfunction arg(value, xform) {\n  return {\n    value,\n    xform\n  };\n}\nasync function proposer(authz) {\n  return prepAccount(authz, {\n    role: PROPOSER\n  });\n}\nasync function payer(authz) {\n  return prepAccount(authz, {\n    role: PAYER\n  });\n}\nfunction ping() {\n  return makePing;\n}\nfunction ref(refBlock) {\n  return pipe([ix => {\n    ix.message.refBlock = refBlock;\n    return Ok(ix);\n  }]);\n}\nfunction script() {\n  return pipe([makeScript, put(\"ix.cadence\", template(...arguments))]);\n}\nconst DEFAULT_SCRIPT_ACCOUNTS = [];\nconst DEFUALT_REF = null;\n\n/**\n * @description - A template builder to use a Cadence transaction for an interaction\n * @param {...*} args - The arguments to pass\n * @returns {object} - An interaction object\n */\nfunction transaction() {\n  return pipe([makeTransaction, put(\"ix.cadence\", template(...arguments)), ix => {\n    ix.message.refBlock = ix.message.refBlock || DEFUALT_REF;\n    ix.authorizations = ix.authorizations || DEFAULT_SCRIPT_ACCOUNTS;\n    return Ok(ix);\n  }]);\n}\nfunction voucherIntercept(fn) {\n  return put(\"ix.voucher-intercept\", fn);\n}\nconst resolveProposerSequenceNumber = _ref => {\n  let {\n    node\n  } = _ref;\n  return async ix => {\n    if (!isTransaction(ix)) return Ok(ix);\n    if (ix.accounts[ix.proposer].sequenceNum) return Ok(ix);\n    const sendFn = await config.first([\"sdk.transport\", \"sdk.send\"], send$1);\n    invariant$1(sendFn, `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`);\n    const response$1 = await sendFn(await build([getAccount(ix.accounts[ix.proposer].addr)]), {\n      config,\n      response: response,\n      Buffer,\n      ix: ixModule\n    }, {\n      node\n    });\n    const decoded = await decodeResponse(response$1);\n    ix.accounts[ix.proposer].sequenceNum = decoded.keys[ix.accounts[ix.proposer].keyId].sequenceNumber;\n    return Ok(ix);\n  };\n};\nasync function getRefId(opts) {\n  const node = await config().get(\"accessNode.api\");\n  const sendFn = await config.first([\"sdk.transport\", \"sdk.send\"], send$1);\n  invariant$1(sendFn, `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`);\n  var ix;\n  ix = await pipe(interaction(), [getBlock()]);\n  ix = await sendFn(ix, {\n    config,\n    response,\n    Buffer,\n    ix: ixModule\n  }, {\n    node\n  });\n  ix = await decodeResponse(ix);\n  return ix.id;\n}\nfunction resolveRefBlockId(opts) {\n  return async ix => {\n    if (!isTransaction(ix)) return Ok(ix);\n    if (ix.message.refBlock) return Ok(ix);\n    ix.message.refBlock = await getRefId();\n    return Ok(ix);\n  };\n}\nfunction mockAccountResponse(ix) {\n  let numberOfKeys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n  // prettier-ignore\n  invariant$1(ix.account, \"mockAccountResponse(ix) -- ix.account is missing\", ix);\n  // prettier-ignore\n  invariant$1(ix.account.addr, \"mockAccountResponse(ix) -- ix.account.addr is missing\", ix);\n  const address = ix.account.addr;\n  return {\n    account: {\n      addr: address,\n      keys: Array.from({\n        length: numberOfKeys\n      }, (_, i) => ({\n        index: i,\n        sequenceNumber: 42\n      }))\n    }\n  };\n}\nfunction mockGetBlockResponse(ix) {\n  return {\n    tag: \"GET_BLOCK\",\n    block: {\n      id: \"32\"\n    }\n  };\n}\nconst identity = v => v;\nfunction mockSend() {\n  let fallback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : identity;\n  return async function execSend(ix) {\n    ix = await ix;\n    switch (true) {\n      case isGetAccount(ix):\n        return mockAccountResponse(ix);\n      case isGetBlock(ix):\n        return mockGetBlockResponse();\n      default:\n        return fallback(ix);\n    }\n  };\n}\nconst idof = acct => `${withPrefix(acct.addr)}-${acct.keyId}`;\nfunction sig(opts) {\n  return [\"SIGNATURE\", opts.addr, opts.keyId].join(\".\");\n}\nfunction authzFn() {\n  let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return function (account) {\n    const acct = {\n      ...account,\n      ...opts,\n      signingFunction: opts.signingFunction || account.signingFunction || fallbackSigningFunction\n    };\n    return acct;\n    function fallbackSigningFunction(signable) {\n      return {\n        addr: acct.addr,\n        keyId: acct.keyId,\n        signature: sig(acct)\n      };\n    }\n  };\n}\nfunction authzResolve() {\n  let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return function (account) {\n    const {\n      tempId,\n      ...rest\n    } = opts;\n    return {\n      ...account,\n      tempId: tempId || \"WITH_RESOLVE\",\n      resolve: authzFn(rest)\n    };\n  };\n}\nconst ROLE = {\n  proposer: false,\n  authorizer: false,\n  payer: false\n};\nfunction authzResolveMany() {\n  let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return function (account) {\n    const tempId = opts.tempId || \"AUTHZ_RESOLVE_MANY\";\n    return {\n      ...account,\n      tempId,\n      resolve: () => [opts.proposer && authzFn(opts.proposer)({\n        role: {\n          ...ROLE,\n          proposer: true\n        }\n      }), ...opts.authorizations.map(authzFn).map(d => d({\n        role: {\n          ...ROLE,\n          authorizer: true\n        }\n      })), opts.payer && authzFn(opts.payer)({\n        role: {\n          ...ROLE,\n          payer: true\n        }\n      })].filter(Boolean)\n    };\n  };\n}\nconst run = function () {\n  let fns = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return build([ref(\"123\"), ...fns]).then(resolve);\n};\nvar index = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  mockSend: mockSend,\n  authzFn: authzFn,\n  authzResolve: authzResolve,\n  authzResolveMany: authzResolveMany,\n  sig: sig,\n  idof: idof,\n  run: run\n});\nconst VERSION = \"1.2.0\";\n\n// Deprecated\nconst params = params => logger.log.deprecate({\n  pkg: \"FCL/SDK\",\n  message: `The params builder has been removed from the Flow JS-SDK/FCL.`,\n  transition: \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params\",\n  level: logger.LEVELS.error\n});\nconst param = params => logger.log.deprecate({\n  pkg: \"FCL/SDK\",\n  message: `The param builder has been removed from the Flow JS-SDK/FCL.`,\n  transition: \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params\",\n  level: logger.LEVELS.error\n});\nexport { index as TestUtils, VERSION, account, arg, args, atBlockHeight, atBlockId, authorization, authorizations, block, build, createSignableVoucher, decode, destroy, encodeMessageFromSignable, encodeTransactionEnvelope, encodeTransactionPayload, encodeTxIdFromVoucher, get, getAccount, getBlock, getBlockHeader, getCollection, getEvents, getEventsAtBlockHeightRange, getEventsAtBlockIds, getNetworkParameters, getTransaction, getTransactionStatus, interaction, invariant, isBad, isGetAccount, isGetBlock, isGetBlockHeader, isGetCollection, isGetEvents, isGetNetworkParameters, isGetTransaction, isGetTransactionStatus, isOk, isPing, isScript, isTransaction, isUnknown, limit, param, params, payer, ping, pipe, proposer, put, ref, resolve, resolveAccounts, resolveArguments, resolveCadence, resolveFinalNormalization, resolveProposerSequenceNumber, resolveRefBlockId, resolveSignatures, resolveValidators, resolveVoucherIntercept, response, script, send, transaction, update, validator, voucherIntercept, voucherToTxId, why };","map":{"version":3,"names":["UNKNOWN","SCRIPT","TRANSACTION","GET_TRANSACTION_STATUS","GET_ACCOUNT","GET_EVENTS","PING","GET_TRANSACTION","GET_BLOCK","GET_BLOCK_HEADER","GET_COLLECTION","GET_NETWORK_PARAMETERS","BAD","OK","ACCOUNT","PARAM","ARGUMENT","AUTHORIZER","PAYER","PROPOSER","ACCT","ARG","IX","KEYS","Set","Object","keys","JSON","parse","interaction","CHARS","split","randChar","Math","random","length","uuid","Array","from","join","isNumber$1","d","isArray$1","isArray","isObj","isNull","isFn$3","isInteraction","ix","key","hasOwnProperty","Ok","status","Bad","reason","makeIx","wat","tag","prepAccountKeyId","acct","keyId","invariant$1","isNaN","parseInt","prepAccount","opts","arguments","undefined","role","tempId","authorization","resolve","_len","rest","_key","reduce","fn","accounts","authorizations","push","payer","makeArgument","arg","message","value","asArgument","xform","resolveArgument","bind","makeUnknown","makeScript","makeTransaction","makeGetTransactionStatus","makeGetTransaction","makeGetAccount","makeGetEvents","makePing","makeGetBlock","makeGetBlockHeader","makeGetCollection","makeGetNetworkParameters","is","isUnknown","isScript","isTransaction","isGetTransactionStatus","isGetTransaction","isGetAccount","isGetEvents","isPing","isGetBlock","isGetBlockHeader","isGetCollection","isGetNetworkParameters","isOk","isBad","why","isAccount","account","kind","isParam","param","isArgument","argument","hardMode","has","Error","recPipe","fns","hd","cur","e","pipe","_len2","args","_key2","arg1","arg2","identity$1","v","get","fallback","assigns","put","update","destroy","build","DEFAULT_RESPONSE","response","getBlock","isSealed","block","getAccount","addr","sansPrefix","latestBlockDeprecationNotice","log","deprecate","pkg","subject","transition","decodeImplicit","i","decodeVoid","decodeType","type","staticType","decodePath","path","domain","identifier","decodeCapability","cap","address","borrowType","decodeOptional","optional","decoders","stack","recurseDecode","decodeReference","decodeArray","array","Promise","all","map","res","decodeDictionary","dictionary","acc","decodeComposite","composite","decoded","fields","name","decoder","id","decoderLookup","defaultDecoders","UInt","Int","UInt8","Int8","UInt16","Int16","UInt32","Int32","UInt64","Int64","UInt128","Int128","UInt256","Int256","Word8","Word16","Word32","Word64","UFix64","Fix64","String","Character","Bool","Address","Void","Optional","Reference","Dictionary","Event","Resource","Struct","Enum","Type","Path","Capability","lookup","found","find","test","reg","RegExp","substring","decodeInstructions","decode$1","decode","customDecoders","filteredDecoders","filter","customDecoder","decoderKey","decodeResponse","encodedData","transactionStatus","events","decodeEvents","transactionId","transactionIndex","eventIndex","data","payload","transaction","blockId","blockHeight","blockTimestamp","blockHeader","latestBlock","collection","networkParameters","chainIdMap","chainId","isFn$2","isString$1","oldIdentifierPatternFn","isOldIdentifierSyntax","cadence","newIdentifierPatternFn","isNewIdentifierSyntax","getContractIdentifierSyntaxMatches","matchAll","resolveCadence","config","where","then","entries","_ref","regex","replace","fullMatch","contractName","withPrefix","logger","title","level","LEVELS","warn","isFn$1","cast","handleArgResolution","depth","resolvedArg","resolveArguments","encodeTransactionPayload","tx","prependTransactionDomainTag","rlpEncode","preparePayload","encodeTransactionEnvelope","prepareEnvelope","encodeTxIdFromVoucher","voucher","sha3_256","prepareVoucher","rightPaddedHexBuffer","pad","Buffer","padEnd","leftPaddedHexBuffer","padStart","TRANSACTION_DOMAIN_TAG","toString","addressBuffer","blockBuffer","argumentToString","stringify","scriptBuffer","script","signatureBuffer","signature","encode","msg","sha","SHA3","digest","validatePayload","refBlock","computeLimit","proposalKey","sequenceNum","authorizers","authorizer","validateEnvelope","preparePayloadSignatures","signers","collectSigners","payloadSigs","sig","signerIndex","sort","a","b","Map","addSigner","set","forEach","validateVoucher","prepareSigs","sigs","envelopeSigs","payloadFields","field","checkField","proposalKeyFields","payloadSigsFields","index","payloadSigFields","envelopeSigsFields","envelopeSigFields","isNumber","isString","isObject","check","defaultVal","obj","base","missingFieldError","invalidFieldError","printFieldName","findInsideSigners","inside","add","proposer","p","delete","findOutsideSigners","outside","createSignableVoucher","buildAuthorizers","cid","prev","current","item","buildInsideSigners","buildOutsideSigners","voucherToTxId","idof$1","isFn","buildPreSignable","f_type","f_vsn","roles","error","console","collectAccounts","last","ax","old","dupList","payerAccts","g","includes","multiAccts","curr","resolveAccounts","values","resolveSignatures","insideSigners","insidePayload","prepForEncoding","fetchSignature","outsideSigners","outsidePayload","innerFetchSignature","signingFunction","buildSignable","payerAddress","resolveValidators","validators","cb","resolveFinalNormalization","resolveVoucherIntercept","DEFAULT_COMPUTE_LIMIT","resolveComputeLimit","noop","debug","accts","Boolean","execFetchRef","execFetchSequenceNumber","node","sendFn","first","send$1","ixModule","sequenceNumber","invariant","predicate","send","resolveFn","decodersFromConfig","pattern","fromEntries","findPayloadSigners","findEnvelopeSigners","envelope","UnableToDetermineMessageEncodingTypeForSignerAddress","constructor","signerAddress","trim","encodeMessageFromSignable","signable","payloadSigners","envelopeSigners","isPayloadSigner","isEnvelopeSigner","ps","validator","atBlockHeight","height","atBlockId","sealed","authz","getEvents","eventType","start","end","getEventsAtBlockHeightRange","eventName","fromBlockHeight","toBlockHeight","getEventsAtBlockIds","blockIds","getBlockHeader","getCollection","getTransactionStatus","getTransaction","getNetworkParameters","limit","ping","ref","template","DEFAULT_SCRIPT_ACCOUNTS","DEFUALT_REF","voucherIntercept","resolveProposerSequenceNumber","response$1","getRefId","resolveRefBlockId","mockAccountResponse","numberOfKeys","_","mockGetBlockResponse","identity","mockSend","execSend","idof","authzFn","fallbackSigningFunction","authzResolve","ROLE","authzResolveMany","run","VERSION","params"],"sources":["/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/interaction/interaction.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/response/response.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-get-block.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-get-account.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/decode/decode.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/resolve/resolve-cadence.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/resolve/resolve-arguments.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/encode/encode.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/resolve/voucher.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/resolve/resolve-accounts.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/resolve/resolve-signatures.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/resolve/resolve-validators.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/resolve/resolve-final-normalization.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/resolve/resolve-voucher-intercept.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/resolve/resolve-compute-limit.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/resolve/resolve.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-invariant.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/send/send.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/decode/sdk-decode.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/wallet-utils/encode-signable.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-validator.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-at-block-height.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-at-block-id.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/account/account.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/block/block.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-authorizations.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-get-events.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-get-events-at-block-height-range.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-get-events-at-block-ids.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-get-block-header.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-get-collection.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-get-transaction-status.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-get-transaction.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-get-network-parameters.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-limit.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-arguments.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-proposer.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-payer.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-ping.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-ref.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-script.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-transaction.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/build/build-voucher-intercept.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/resolve/resolve-proposer-sequence-number.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/resolve/resolve-ref-block-id.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/test-utils/mock-send.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/test-utils/authz-fn.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/test-utils/run.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/VERSION.js","/Users/oqpo/Documents/GitHub/darkblock-flow/node_modules/@onflow/sdk/src/sdk.js"],"sourcesContent":["import {invariant} from \"@onflow/util-invariant\"\n\nexport const UNKNOWN /*                       */ = \"UNKNOWN\"\nexport const SCRIPT /*                        */ = \"SCRIPT\"\nexport const TRANSACTION /*                   */ = \"TRANSACTION\"\nexport const GET_TRANSACTION_STATUS /*        */ = \"GET_TRANSACTION_STATUS\"\nexport const GET_ACCOUNT /*                   */ = \"GET_ACCOUNT\"\nexport const GET_EVENTS /*                    */ = \"GET_EVENTS\"\nexport const PING /*                          */ = \"PING\"\nexport const GET_TRANSACTION /*               */ = \"GET_TRANSACTION\"\nexport const GET_BLOCK /*                     */ = \"GET_BLOCK\"\nexport const GET_BLOCK_HEADER /*              */ = \"GET_BLOCK_HEADER\"\nexport const GET_COLLECTION /*                */ = \"GET_COLLECTION\"\nexport const GET_NETWORK_PARAMETERS /*        */ = \"GET_NETWORK_PARAMETERS\"\n\nexport const BAD /* */ = \"BAD\"\nexport const OK /*  */ = \"OK\"\n\nexport const ACCOUNT /*  */ = \"ACCOUNT\"\nexport const PARAM /*    */ = \"PARAM\"\nexport const ARGUMENT /* */ = \"ARGUMENT\"\n\nexport const AUTHORIZER /* */ = \"authorizer\"\nexport const PAYER /*      */ = \"payer\"\nexport const PROPOSER /*   */ = \"proposer\"\n\nconst ACCT = `{\n  \"kind\":\"${ACCOUNT}\",\n  \"tempId\":null,\n  \"addr\":null,\n  \"keyId\":null,\n  \"sequenceNum\":null,\n  \"signature\":null,\n  \"signingFunction\":null,\n  \"resolve\":null,\n  \"role\": {\n    \"proposer\":false,\n    \"authorizer\":false,\n    \"payer\":false,\n    \"param\":false\n  }\n}`\n\nconst PRM = `{\n  \"kind\":\"${PARAM}\",\n  \"tempId\":null,\n  \"key\":null,\n  \"value\":null,\n  \"asParam\":null,\n  \"xform\":null,\n  \"resolve\": null\n}`\n\nconst ARG = `{\n  \"kind\":\"${ARGUMENT}\",\n  \"tempId\":null,\n  \"value\":null,\n  \"asArgument\":null,\n  \"xform\":null,\n  \"resolve\": null,\n  \"resolveArgument\": null\n}`\n\nconst IX = `{\n  \"tag\":\"${UNKNOWN}\",\n  \"assigns\":{},\n  \"status\":\"${OK}\",\n  \"reason\":null,\n  \"accounts\":{},\n  \"params\":{},\n  \"arguments\":{},\n  \"message\": {\n    \"cadence\":null,\n    \"refBlock\":null,\n    \"computeLimit\":null,\n    \"proposer\":null,\n    \"payer\":null,\n    \"authorizations\":[],\n    \"params\":[],\n    \"arguments\":[]\n  },\n  \"proposer\":null,\n  \"authorizations\":[],\n  \"payer\":[],\n  \"events\": {\n    \"eventType\":null,\n    \"start\":null,\n    \"end\":null,\n    \"blockIds\":[]\n  },\n  \"transaction\": {\n    \"id\":null\n  },\n  \"block\": {\n    \"id\":null,\n    \"height\":null,\n    \"isSealed\":null\n  },\n  \"account\": {\n    \"addr\":null\n  },\n  \"collection\": {\n    \"id\":null\n  }\n}`\n\nconst KEYS = new Set(Object.keys(JSON.parse(IX)))\n\nexport const interaction = () => JSON.parse(IX)\n\nconst CHARS = \"abcdefghijklmnopqrstuvwxyz0123456789\".split(\"\")\nconst randChar = () => CHARS[~~(Math.random() * CHARS.length)]\nexport const uuid = () => Array.from({length: 10}, randChar).join(\"\")\nexport const isNumber = d => typeof d === \"number\"\nexport const isArray = d => Array.isArray(d)\nexport const isObj = d => d !== null && typeof d === \"object\"\nexport const isNull = d => d == null\nexport const isFn = d => typeof d === \"function\"\n\nexport const isInteraction = ix => {\n  if (!isObj(ix) || isNull(ix) || isNumber(ix)) return false\n  for (let key of KEYS) if (!ix.hasOwnProperty(key)) return false\n  return true\n}\n\nexport const Ok = ix => {\n  ix.status = OK\n  return ix\n}\n\nexport const Bad = (ix, reason) => {\n  ix.status = BAD\n  ix.reason = reason\n  return ix\n}\n\nconst makeIx = wat => ix => {\n  ix.tag = wat\n  return Ok(ix)\n}\n\nconst prepAccountKeyId = acct => {\n  if (acct.keyId == null) return acct\n\n  invariant(!isNaN(parseInt(acct.keyId)), \"account.keyId must be an integer\")\n  return {\n    ...acct,\n    keyId: parseInt(acct.keyId),\n  }\n}\n\nexport const prepAccount = (acct, opts = {}) => ix => {\n  invariant(\n    typeof acct === \"function\" || typeof acct === \"object\",\n    \"prepAccount must be passed an authorization function or an account object\"\n  )\n  invariant(opts.role != null, \"Account must have a role\")\n\n  const ACCOUNT = JSON.parse(ACCT)\n  const role = opts.role\n  const tempId = uuid()\n\n  if (acct.authorization && isFn(acct.authorization))\n    acct = {resolve: acct.authorization}\n  if (!acct.authorization && isFn(acct)) acct = {resolve: acct}\n\n  const resolve = acct.resolve\n  if (resolve)\n    acct.resolve = (acct, ...rest) =>\n      [resolve, prepAccountKeyId].reduce(\n        async (d, fn) => fn(await d, ...rest),\n        acct\n      )\n  acct = prepAccountKeyId(acct)\n\n  ix.accounts[tempId] = {\n    ...ACCOUNT,\n    tempId,\n    ...acct,\n    role: {\n      ...ACCOUNT.role,\n      ...(typeof acct.role === \"object\" ? acct.role : {}),\n      [role]: true,\n    },\n  }\n\n  if (role === AUTHORIZER) {\n    ix.authorizations.push(tempId)\n  } else if (role === PAYER) {\n    ix.payer.push(tempId)\n  } else {\n    ix[role] = tempId\n  }\n\n  return ix\n}\n\nexport const makeArgument = arg => ix => {\n  let tempId = uuid()\n  ix.message.arguments.push(tempId)\n\n  ix.arguments[tempId] = JSON.parse(ARG)\n  ix.arguments[tempId].tempId = tempId\n  ix.arguments[tempId].value = arg.value\n  ix.arguments[tempId].asArgument = arg.asArgument\n  ix.arguments[tempId].xform = arg.xform\n  ix.arguments[tempId].resolve = arg.resolve\n  ix.arguments[tempId].resolveArgument = isFn(arg.resolveArgument)\n    ? arg.resolveArgument.bind(arg)\n    : arg.resolveArgument\n\n  return Ok(ix)\n}\n\nexport const makeUnknown /*                 */ = makeIx(UNKNOWN)\nexport const makeScript /*                  */ = makeIx(SCRIPT)\nexport const makeTransaction /*             */ = makeIx(TRANSACTION)\nexport const makeGetTransactionStatus /*    */ = makeIx(GET_TRANSACTION_STATUS)\nexport const makeGetTransaction /*          */ = makeIx(GET_TRANSACTION)\nexport const makeGetAccount /*              */ = makeIx(GET_ACCOUNT)\nexport const makeGetEvents /*               */ = makeIx(GET_EVENTS)\nexport const makePing /*                    */ = makeIx(PING)\nexport const makeGetBlock /*                */ = makeIx(GET_BLOCK)\nexport const makeGetBlockHeader /*          */ = makeIx(GET_BLOCK_HEADER)\nexport const makeGetCollection /*           */ = makeIx(GET_COLLECTION)\nexport const makeGetNetworkParameters /*    */ = makeIx(GET_NETWORK_PARAMETERS)\n\nconst is = wat => ix => ix.tag === wat\n\nexport const isUnknown /*                 */ = is(UNKNOWN)\nexport const isScript /*                  */ = is(SCRIPT)\nexport const isTransaction /*             */ = is(TRANSACTION)\nexport const isGetTransactionStatus /*    */ = is(GET_TRANSACTION_STATUS)\nexport const isGetTransaction /*          */ = is(GET_TRANSACTION)\nexport const isGetAccount /*              */ = is(GET_ACCOUNT)\nexport const isGetEvents /*               */ = is(GET_EVENTS)\nexport const isPing /*                    */ = is(PING)\nexport const isGetBlock /*                */ = is(GET_BLOCK)\nexport const isGetBlockHeader /*          */ = is(GET_BLOCK_HEADER)\nexport const isGetCollection /*           */ = is(GET_COLLECTION)\nexport const isGetNetworkParameters /*    */ = is(GET_NETWORK_PARAMETERS)\n\nexport const isOk /*  */ = ix => ix.status === OK\nexport const isBad /* */ = ix => ix.status === BAD\nexport const why /*   */ = ix => ix.reason\n\nexport const isAccount /*  */ = account => account.kind === ACCOUNT\nexport const isParam /*    */ = param => param.kind === PARAM\nexport const isArgument /* */ = argument => argument.kind === ARGUMENT\n\nconst hardMode = ix => {\n  for (let key of Object.keys(ix)) {\n    if (!KEYS.has(key))\n      throw new Error(`\"${key}\" is an invalid root level Interaction property.`)\n  }\n  return ix\n}\n\nconst recPipe = async (ix, fns = []) => {\n  try {\n    ix = hardMode(await ix)\n    if (isBad(ix)) throw new Error(`Interaction Error: ${ix.reason}`)\n    if (!fns.length) return ix\n    const [hd, ...rest] = fns\n    const cur = await hd\n    if (isFn(cur)) return recPipe(cur(ix), rest)\n    if (isNull(cur) || !cur) return recPipe(ix, rest)\n    if (isInteraction(cur)) return recPipe(cur, rest)\n    throw new Error(\"Invalid Interaction Composition\")\n  } catch (e) {\n    throw e\n  }\n}\n\nexport const pipe = (...args) => {\n  const [arg1, arg2] = args\n  if (isArray(arg1) && arg2 == null) return d => pipe(d, arg1)\n  return recPipe(arg1, arg2)\n}\n\nconst identity = v => v\n\nexport const get = (ix, key, fallback) => {\n  return ix.assigns[key] == null ? fallback : ix.assigns[key]\n}\n\nexport const put = (key, value) => ix => {\n  ix.assigns[key] = value\n  return Ok(ix)\n}\n\nexport const update = (key, fn = identity) => ix => {\n  ix.assigns[key] = fn(ix.assigns[key], ix)\n  return Ok(ix)\n}\n\nexport const destroy = key => ix => {\n  delete ix.assigns[key]\n  return Ok(ix)\n}\n","import {pipe, interaction} from \"../interaction/interaction.js\"\n\nexport function build(fns = []) {\n  return pipe(interaction(), fns)\n}\n","const DEFAULT_RESPONSE = `{\n    \"tag\":null,\n    \"transaction\":null,\n    \"transactionStatus\":null,\n    \"transactionId\":null,\n    \"encodedData\":null,\n    \"events\":null,\n    \"account\":null,\n    \"block\":null,\n    \"blockHeader\":null,\n    \"latestBlock\":null,\n    \"collection\":null,\n    \"networkParameters\":null\n}`\n\nexport const response = () => JSON.parse(DEFAULT_RESPONSE)\n","import {pipe, Ok, makeGetBlock} from \"../interaction/interaction.js\"\n\n/**\n * @description - A builder function that returns the interaction to get the latest block\n * @param {boolean} [isSealed] - Whether or not the block should be sealed\n * @returns {object} - An interaction object\n */\nexport function getBlock(isSealed = null) {\n  return pipe([\n    makeGetBlock,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, makeGetAccount, Ok} from \"../interaction/interaction.js\"\nimport {sansPrefix} from \"@onflow/util-address\"\n\n/**\n * @description - A builder function that returns the interaction to get an account by address\n * @param {string} addr - The address of the account to getq\n * @returns {object} - An interaction object\n */\nexport function getAccount(addr) {\n  return pipe([\n    makeGetAccount,\n    ix => {\n      ix.account.addr = sansPrefix(addr)\n      return Ok(ix)\n    },\n  ])\n}\n","import {log, LEVELS} from \"@onflow/util-logger\"\n\nconst latestBlockDeprecationNotice = () => {\n  log.deprecate({\n    pkg: \"@onflow/decode\",\n    subject:\n      \"Operating upon data of the latestBlock field of the response object\",\n    transition:\n      \"https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field\",\n  })\n}\n\nconst decodeNumber = async (num, _, stack) => {\n  try {\n    return Number(num)\n  } catch (e) {\n    throw new Error(`Decode Number Error : ${stack.join(\".\")}`)\n  }\n}\n\nconst decodeImplicit = async i => i\n\nconst decodeVoid = async () => null\n\nconst decodeType = async type => {\n  return type.staticType\n}\n\nconst decodePath = async path => {\n  return {\n    domain: path.domain,\n    identifier: path.identifier,\n  }\n}\n\nconst decodeCapability = async cap => {\n  return {\n    path: cap.path,\n    address: cap.address,\n    borrowType: cap.borrowType,\n  }\n}\n\nconst decodeOptional = async (optional, decoders, stack) =>\n  optional ? await recurseDecode(optional, decoders, stack) : null\n\nconst decodeReference = async v => ({address: v.address, type: v.type})\n\nconst decodeArray = async (array, decoders, stack) =>\n  await Promise.all(\n    array.map(\n      v =>\n        new Promise(async res =>\n          res(await recurseDecode(v, decoders, [...stack, v.type]))\n        )\n    )\n  )\n\nconst decodeDictionary = async (dictionary, decoders, stack) =>\n  await dictionary.reduce(async (acc, v) => {\n    acc = await acc\n    acc[await recurseDecode(v.key, decoders, [...stack, v.key])] =\n      await recurseDecode(v.value, decoders, [...stack, v.key])\n    return acc\n  }, Promise.resolve({}))\n\nconst decodeComposite = async (composite, decoders, stack) => {\n  const decoded = await composite.fields.reduce(async (acc, v) => {\n    acc = await acc\n    acc[v.name] = await recurseDecode(v.value, decoders, [...stack, v.name])\n    return acc\n  }, Promise.resolve({}))\n  const decoder = composite.id && decoderLookup(decoders, composite.id)\n  return decoder ? await decoder(decoded) : decoded\n}\n\nconst defaultDecoders = {\n  UInt: decodeImplicit,\n  Int: decodeImplicit,\n  UInt8: decodeImplicit,\n  Int8: decodeImplicit,\n  UInt16: decodeImplicit,\n  Int16: decodeImplicit,\n  UInt32: decodeImplicit,\n  Int32: decodeImplicit,\n  UInt64: decodeImplicit,\n  Int64: decodeImplicit,\n  UInt128: decodeImplicit,\n  Int128: decodeImplicit,\n  UInt256: decodeImplicit,\n  Int256: decodeImplicit,\n  Word8: decodeImplicit,\n  Word16: decodeImplicit,\n  Word32: decodeImplicit,\n  Word64: decodeImplicit,\n  UFix64: decodeImplicit,\n  Fix64: decodeImplicit,\n  String: decodeImplicit,\n  Character: decodeImplicit,\n  Bool: decodeImplicit,\n  Address: decodeImplicit,\n  Void: decodeVoid,\n  Optional: decodeOptional,\n  Reference: decodeReference,\n  Array: decodeArray,\n  Dictionary: decodeDictionary,\n  Event: decodeComposite,\n  Resource: decodeComposite,\n  Struct: decodeComposite,\n  Enum: decodeComposite,\n  Type: decodeType,\n  Path: decodePath,\n  Capability: decodeCapability,\n}\n\nconst decoderLookup = (decoders, lookup) => {\n  const found = Object.keys(decoders).find(decoder => {\n    if (/^\\/.*\\/$/.test(decoder)) {\n      const reg = new RegExp(decoder.substring(1, decoder.length - 1))\n      return reg.test(lookup)\n    }\n    return decoder === lookup\n  })\n  return lookup && found && decoders[found]\n}\n\nconst recurseDecode = async (decodeInstructions, decoders, stack) => {\n  let decoder = decoderLookup(decoders, decodeInstructions.type)\n  if (!decoder)\n    throw new Error(\n      `Undefined Decoder Error: ${decodeInstructions.type}@${stack.join(\".\")}`\n    )\n  return await decoder(decodeInstructions.value, decoders, stack)\n}\n\n/**\n * @description - Decodes a response from Flow into JSON\n * @param {*} decodeInstructions - The response object from Flow\n * @param {object} customDecoders - An object of custom decoders\n * @param {Array<*>} stack - The stack of the current decoding\n * @returns {Promise<*>} - The decoded response\n */\nexport const decode = async (\n  decodeInstructions,\n  customDecoders = {},\n  stack = []\n) => {\n  // Filter out all default decoders which are overridden by a custom decoder regex\n  const filteredDecoders = Object.keys(defaultDecoders)\n    .filter(\n      decoder =>\n        !Object.keys(customDecoders).find(customDecoder =>\n          new RegExp(customDecoder).test(decoder)\n        )\n    )\n    .reduce((decoders, decoderKey) => {\n      decoders[decoderKey] = defaultDecoders[decoderKey]\n      return decoders\n    }, customDecoders)\n\n  const decoders = {\n    ...filteredDecoders,\n    ...customDecoders,\n  }\n  return recurseDecode(decodeInstructions, decoders, stack)\n}\n\nexport const decodeResponse = async (response, customDecoders = {}) => {\n  if (response.encodedData) {\n    return decode(response.encodedData, customDecoders)\n  } else if (response.transactionStatus) {\n    return {\n      ...response.transactionStatus,\n      events: await Promise.all(\n        response.transactionStatus.events.map(async function decodeEvents(e) {\n          return {\n            type: e.type,\n            transactionId: e.transactionId,\n            transactionIndex: e.transactionIndex,\n            eventIndex: e.eventIndex,\n            data: await decode(e.payload, customDecoders),\n          }\n        })\n      ),\n    }\n  } else if (response.transaction) {\n    return response.transaction\n  } else if (response.events) {\n    return await Promise.all(\n      response.events.map(async function decodeEvents(e) {\n        return {\n          blockId: e.blockId,\n          blockHeight: e.blockHeight,\n          blockTimestamp: e.blockTimestamp,\n          type: e.type,\n          transactionId: e.transactionId,\n          transactionIndex: e.transactionIndex,\n          eventIndex: e.eventIndex,\n          data: await decode(e.payload, customDecoders),\n        }\n      })\n    )\n  } else if (response.account) {\n    return response.account\n  } else if (response.block) {\n    return response.block\n  } else if (response.blockHeader) {\n    return response.blockHeader\n  } else if (response.latestBlock) {\n    latestBlockDeprecationNotice()\n    return response.latestBlock\n  } else if (response.transactionId) {\n    return response.transactionId\n  } else if (response.collection) {\n    return response.collection\n  } else if (response.networkParameters) {\n    const chainIdMap = {\n      \"flow-testnet\": \"testnet\",\n      \"flow-mainnet\": \"mainnet\",\n      \"flow-emulator\": \"local\",\n    }\n\n    return {\n      chainId: chainIdMap[response.networkParameters.chainId],\n    }\n  }\n\n  return null\n}\n","import {isTransaction, isScript, get} from \"../interaction/interaction.js\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {config} from \"@onflow/config\"\nimport * as logger from \"@onflow/util-logger\"\nimport {withPrefix} from \"@onflow/util-address\"\n\nconst isFn = v => typeof v === \"function\"\nconst isString = v => typeof v === \"string\"\n\nconst oldIdentifierPatternFn = () => /\\b(0x\\w+)\\b/g\nfunction isOldIdentifierSyntax(cadence) {\n  return oldIdentifierPatternFn().test(cadence)\n}\n\nconst newIdentifierPatternFn = () => /import\\s+\"(\\w+)\"/g\nfunction isNewIdentifierSyntax(cadence) {\n  return newIdentifierPatternFn().test(cadence)\n}\n\nfunction getContractIdentifierSyntaxMatches(cadence) {\n  return cadence.matchAll(newIdentifierPatternFn())\n}\n\nexport async function resolveCadence(ix) {\n  if (!isTransaction(ix) && !isScript(ix)) return ix\n\n  var cadence = get(ix, \"ix.cadence\")\n\n  invariant(\n    isFn(cadence) || isString(cadence),\n    \"Cadence needs to be a function or a string.\"\n  )\n  if (isFn(cadence)) cadence = await cadence({})\n  invariant(isString(cadence), \"Cadence needs to be a string at this point.\")\n  invariant(\n    !isOldIdentifierSyntax(cadence) || !isNewIdentifierSyntax(cadence),\n    \"Both account identifier and contract identifier syntax not simultaneously supported.\"\n  )\n  if (isOldIdentifierSyntax(cadence)) {\n    cadence = await config()\n      .where(/^0x/)\n      .then(d =>\n        Object.entries(d).reduce((cadence, [key, value]) => {\n          const regex = new RegExp(\"(\\\\b\" + key + \"\\\\b)\", \"g\")\n          return cadence.replace(regex, value)\n        }, cadence)\n      )\n  }\n\n  if (isNewIdentifierSyntax(cadence)) {\n    for (const [fullMatch, contractName] of getContractIdentifierSyntaxMatches(\n      cadence\n    )) {\n      const address = await config().get(`system.contracts.${contractName}`)\n      if (address) {\n        cadence = cadence.replace(\n          fullMatch,\n          `import ${contractName} from ${withPrefix(address)}`\n        )\n      } else {\n        logger.log({\n          title: \"Contract Placeholder not found\",\n          message: `Cannot find a value for contract placeholder ${contractName}. Please add to your flow.json or explicitly add it to the config 'contracts.*' namespace.`,\n          level: logger.LEVELS.warn,\n        })\n      }\n    }\n  }\n\n  // We need to move this over in any case.\n  ix.message.cadence = cadence\n\n  return ix\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isTransaction, isScript} from \"../interaction/interaction.js\"\n\nconst isFn = v => typeof v === \"function\"\n\nfunction cast(arg) {\n  // prettier-ignore\n  invariant(typeof arg.xform != null, `No type specified for argument: ${arg.value}`)\n\n  if (isFn(arg.xform)) return arg.xform(arg.value)\n  if (isFn(arg.xform.asArgument)) return arg.xform.asArgument(arg.value)\n\n  // prettier-ignore\n  invariant(false, `Invalid Argument`, arg)\n}\n\nasync function handleArgResolution(arg, depth = 3) {\n  invariant(\n    depth > 0,\n    `Argument Resolve Recursion Limit Exceeded for Arg: ${arg.tempId}`\n  )\n\n  if (isFn(arg.resolveArgument)) {\n    const resolvedArg = await arg.resolveArgument()\n    return handleArgResolution(resolvedArg, depth - 1)\n  } else {\n    return arg\n  }\n}\n\nexport async function resolveArguments(ix) {\n  if (isTransaction(ix) || isScript(ix)) {\n    for (let [id, arg] of Object.entries(ix.arguments)) {\n      const res = await handleArgResolution(arg)\n      ix.arguments[id].asArgument = cast(res)\n    }\n  }\n\n  return ix\n}\n","import {SHA3} from \"sha3\"\nimport {encode, Buffer} from \"@onflow/rlp\"\nimport {sansPrefix} from \"@onflow/util-address\"\n\nexport const encodeTransactionPayload = tx =>\n  prependTransactionDomainTag(rlpEncode(preparePayload(tx)))\nexport const encodeTransactionEnvelope = tx =>\n  prependTransactionDomainTag(rlpEncode(prepareEnvelope(tx)))\nexport const encodeTxIdFromVoucher = voucher =>\n  sha3_256(rlpEncode(prepareVoucher(voucher)))\n\nconst rightPaddedHexBuffer = (value, pad) =>\n  Buffer.from(value.padEnd(pad * 2, 0), \"hex\")\n\nconst leftPaddedHexBuffer = (value, pad) =>\n  Buffer.from(value.padStart(pad * 2, 0), \"hex\")\n\nconst TRANSACTION_DOMAIN_TAG = rightPaddedHexBuffer(\n  Buffer.from(\"FLOW-V0.0-transaction\").toString(\"hex\"),\n  32\n).toString(\"hex\")\nconst prependTransactionDomainTag = tx => TRANSACTION_DOMAIN_TAG + tx\n\nconst addressBuffer = addr => leftPaddedHexBuffer(addr, 8)\n\nconst blockBuffer = block => leftPaddedHexBuffer(block, 32)\n\nconst argumentToString = arg => Buffer.from(JSON.stringify(arg), \"utf8\")\n\nconst scriptBuffer = script => Buffer.from(script, \"utf8\")\nconst signatureBuffer = signature => Buffer.from(signature, \"hex\")\n\nconst rlpEncode = v => {\n  return encode(v).toString(\"hex\")\n}\n\nconst sha3_256 = msg => {\n  const sha = new SHA3(256)\n  sha.update(Buffer.from(msg, \"hex\"))\n  return sha.digest().toString(\"hex\")\n}\n\nconst preparePayload = tx => {\n  validatePayload(tx)\n\n  return [\n    scriptBuffer(tx.cadence),\n    tx.arguments.map(argumentToString),\n    blockBuffer(tx.refBlock),\n    tx.computeLimit,\n    addressBuffer(sansPrefix(tx.proposalKey.address)),\n    tx.proposalKey.keyId,\n    tx.proposalKey.sequenceNum,\n    addressBuffer(sansPrefix(tx.payer)),\n    tx.authorizers.map(authorizer => addressBuffer(sansPrefix(authorizer))),\n  ]\n}\n\nconst prepareEnvelope = tx => {\n  validateEnvelope(tx)\n\n  return [preparePayload(tx), preparePayloadSignatures(tx)]\n}\n\nconst preparePayloadSignatures = tx => {\n  const signers = collectSigners(tx)\n\n  return tx.payloadSigs\n    .map(sig => {\n      return {\n        signerIndex: signers.get(sig.address),\n        keyId: sig.keyId,\n        sig: sig.sig,\n      }\n    })\n    .sort((a, b) => {\n      if (a.signerIndex > b.signerIndex) return 1\n      if (a.signerIndex < b.signerIndex) return -1\n\n      if (a.keyId > b.keyId) return 1\n      if (a.keyId < b.keyId) return -1\n    })\n    .map(sig => {\n      return [sig.signerIndex, sig.keyId, signatureBuffer(sig.sig)]\n    })\n}\n\nconst collectSigners = tx => {\n  const signers = new Map()\n  let i = 0\n\n  const addSigner = addr => {\n    if (!signers.has(addr)) {\n      signers.set(addr, i)\n      i++\n    }\n  }\n\n  addSigner(tx.proposalKey.address)\n  addSigner(tx.payer)\n  tx.authorizers.forEach(addSigner)\n\n  return signers\n}\n\nconst prepareVoucher = voucher => {\n  validateVoucher(voucher)\n\n  const signers = collectSigners(voucher)\n\n  const prepareSigs = sigs => {\n    return sigs\n      .map(({address, keyId, sig}) => {\n        return {signerIndex: signers.get(address), keyId, sig}\n      })\n      .sort((a, b) => {\n        if (a.signerIndex > b.signerIndex) return 1\n        if (a.signerIndex < b.signerIndex) return -1\n        if (a.keyId > b.keyId) return 1\n        if (a.keyId < b.keyId) return -1\n      })\n      .map(sig => {\n        return [sig.signerIndex, sig.keyId, signatureBuffer(sig.sig)]\n      })\n  }\n\n  return [\n    [\n      scriptBuffer(voucher.cadence),\n      voucher.arguments.map(argumentToString),\n      blockBuffer(voucher.refBlock),\n      voucher.computeLimit,\n      addressBuffer(sansPrefix(voucher.proposalKey.address)),\n      voucher.proposalKey.keyId,\n      voucher.proposalKey.sequenceNum,\n      addressBuffer(sansPrefix(voucher.payer)),\n      voucher.authorizers.map(authorizer =>\n        addressBuffer(sansPrefix(authorizer))\n      ),\n    ],\n    prepareSigs(voucher.payloadSigs),\n    prepareSigs(voucher.envelopeSigs),\n  ]\n}\n\nconst validatePayload = tx => {\n  payloadFields.forEach(field => checkField(tx, field))\n  proposalKeyFields.forEach(field =>\n    checkField(tx.proposalKey, field, \"proposalKey\")\n  )\n}\n\nconst validateEnvelope = tx => {\n  payloadSigsFields.forEach(field => checkField(tx, field))\n  tx.payloadSigs.forEach((sig, index) => {\n    payloadSigFields.forEach(field =>\n      checkField(sig, field, \"payloadSigs\", index)\n    )\n  })\n}\n\nconst validateVoucher = voucher => {\n  payloadFields.forEach(field => checkField(voucher, field))\n  proposalKeyFields.forEach(field =>\n    checkField(voucher.proposalKey, field, \"proposalKey\")\n  )\n  payloadSigsFields.forEach(field => checkField(voucher, field))\n  voucher.payloadSigs.forEach((sig, index) => {\n    payloadSigFields.forEach(field =>\n      checkField(sig, field, \"payloadSigs\", index)\n    )\n  })\n  envelopeSigsFields.forEach(field => checkField(voucher, field))\n  voucher.envelopeSigs.forEach((sig, index) => {\n    envelopeSigFields.forEach(field =>\n      checkField(sig, field, \"envelopeSigs\", index)\n    )\n  })\n}\n\nconst isNumber = v => typeof v === \"number\"\nconst isString = v => typeof v === \"string\"\nconst isObject = v => v !== null && typeof v === \"object\"\nconst isArray = v => isObject(v) && v instanceof Array\n\nconst payloadFields = [\n  {name: \"cadence\", check: isString},\n  {name: \"arguments\", check: isArray},\n  {name: \"refBlock\", check: isString, defaultVal: \"0\"},\n  {name: \"computeLimit\", check: isNumber},\n  {name: \"proposalKey\", check: isObject},\n  {name: \"payer\", check: isString},\n  {name: \"authorizers\", check: isArray},\n]\n\nconst proposalKeyFields = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sequenceNum\", check: isNumber},\n]\n\nconst payloadSigsFields = [{name: \"payloadSigs\", check: isArray}]\n\nconst payloadSigFields = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sig\", check: isString},\n]\n\nconst envelopeSigsFields = [{name: \"envelopeSigs\", check: isArray}]\n\nconst envelopeSigFields = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sig\", check: isString},\n]\n\nconst checkField = (obj, field, base, index) => {\n  const {name, check, defaultVal} = field\n  if (obj[name] == null && defaultVal != null) obj[name] = defaultVal\n  if (obj[name] == null) throw missingFieldError(name, base, index)\n  if (!check(obj[name])) throw invalidFieldError(name, base, index)\n}\n\nconst printFieldName = (field, base, index) => {\n  if (!!base)\n    return index == null ? `${base}.${field}` : `${base}.${index}.${field}`\n  return field\n}\n\nconst missingFieldError = (field, base, index) =>\n  new Error(`Missing field ${printFieldName(field, base, index)}`)\nconst invalidFieldError = (field, base, index) =>\n  new Error(`Invalid field ${printFieldName(field, base, index)}`)\n","import {withPrefix} from \"@onflow/util-address\"\nimport {encodeTxIdFromVoucher} from \"../encode/encode.js\"\n\nexport function findInsideSigners(ix) {\n  // Inside Signers Are: (authorizers + proposer) - payer\n  let inside = new Set(ix.authorizations)\n  inside.add(ix.proposer)\n  if (Array.isArray(ix.payer)) {\n    ix.payer.forEach(p => inside.delete(p))\n  } else {\n    inside.delete(ix.payer)\n  }\n  return Array.from(inside)\n}\n\nexport function findOutsideSigners(ix) {\n  // Outside Signers Are: (payer)\n  let outside = new Set(Array.isArray(ix.payer) ? ix.payer : [ix.payer])\n  return Array.from(outside)\n}\n\nexport const createSignableVoucher = ix => {\n  const buildAuthorizers = () => {\n    const authorizations = ix.authorizations\n      .map(cid => withPrefix(ix.accounts[cid].addr))\n      .reduce((prev, current) => {\n        return prev.find(item => item === current) ? prev : [...prev, current]\n      }, [])\n    return authorizations[0] ? authorizations : []\n  }\n\n  const buildInsideSigners = () =>\n    findInsideSigners(ix).map(id => ({\n      address: withPrefix(ix.accounts[id].addr),\n      keyId: ix.accounts[id].keyId,\n      sig: ix.accounts[id].signature,\n    }))\n\n  const buildOutsideSigners = () =>\n    findOutsideSigners(ix).map(id => ({\n      address: withPrefix(ix.accounts[id].addr),\n      keyId: ix.accounts[id].keyId,\n      sig: ix.accounts[id].signature,\n    }))\n\n  return {\n    cadence: ix.message.cadence,\n    refBlock: ix.message.refBlock || null,\n    computeLimit: ix.message.computeLimit,\n    arguments: ix.message.arguments.map(id => ix.arguments[id].asArgument),\n    proposalKey: {\n      address: withPrefix(ix.accounts[ix.proposer].addr),\n      keyId: ix.accounts[ix.proposer].keyId,\n      sequenceNum: ix.accounts[ix.proposer].sequenceNum,\n    },\n    payer: withPrefix(\n      ix.accounts[Array.isArray(ix.payer) ? ix.payer[0] : ix.payer].addr\n    ),\n    authorizers: buildAuthorizers(),\n    payloadSigs: buildInsideSigners(),\n    envelopeSigs: buildOutsideSigners(),\n  }\n}\n\nexport const voucherToTxId = voucher => {\n  return encodeTxIdFromVoucher(voucher)\n}\n","import {sansPrefix, withPrefix} from \"@onflow/util-address\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {log} from \"@onflow/util-logger\"\nimport {isTransaction} from \"../interaction/interaction.js\"\nimport {createSignableVoucher} from \"./voucher.js\"\n\nconst idof = acct => `${withPrefix(acct.addr)}-${acct.keyId}`\nconst isFn = v => typeof v === \"function\"\n\nexport function buildPreSignable(acct, ix) {\n  try {\n    return {\n      f_type: \"PreSignable\",\n      f_vsn: \"1.0.1\",\n      roles: acct.role,\n      cadence: ix.message.cadence,\n      args: ix.message.arguments.map(d => ix.arguments[d].asArgument),\n      data: {},\n      interaction: ix,\n      voucher: createSignableVoucher(ix),\n    }\n  } catch (error) {\n    console.error(\"buildPreSignable\", error)\n    throw error\n  }\n}\n\nasync function collectAccounts(ix, accounts, last, depth = 3) {\n  invariant(depth, \"Account Resolve Recursion Limit Exceeded\", {ix, accounts})\n\n  let authorizations = []\n  for (let ax of accounts) {\n    let resolve = ax.resolve\n    ax.resolve = null\n    var old = last || ax\n    if (isFn(resolve)) ax = await resolve(ax, buildPreSignable(ax, ix))\n\n    if (Array.isArray(ax)) {\n      await collectAccounts(ix, ax, old, depth - 1)\n    } else {\n      if (ax.addr) {\n        ax.addr = sansPrefix(ax.addr)\n      }\n      if (ax.addr != null && ax.keyId != null) {\n        ax.tempId = idof(ax)\n      }\n      ix.accounts[ax.tempId] = ix.accounts[ax.tempId] || ax\n      ix.accounts[ax.tempId].role.proposer =\n        ix.accounts[ax.tempId].role.proposer || ax.role.proposer\n      ix.accounts[ax.tempId].role.payer =\n        ix.accounts[ax.tempId].role.payer || ax.role.payer\n      ix.accounts[ax.tempId].role.authorizer =\n        ix.accounts[ax.tempId].role.authorizer || ax.role.authorizer\n\n      if (ix.accounts[ax.tempId].role.proposer && ix.proposer === old.tempId) {\n        ix.proposer = ax.tempId\n      }\n\n      if (ix.accounts[ax.tempId].role.payer) {\n        if (Array.isArray(ix.payer)) {\n          ix.payer = Array.from(\n            new Set(\n              [...ix.payer, ax.tempId].map(d =>\n                d === old.tempId ? ax.tempId : d\n              )\n            )\n          )\n        } else {\n          ix.payer = Array.from(\n            new Set(\n              [ix.payer, ax.tempId].map(d => (d === old.tempId ? ax.tempId : d))\n            )\n          )\n        }\n        if (ix.payer.length > 1) {\n          // remove payer dups based on addr and keyId\n          const dupList = []\n          const payerAccts = []\n          ix.payer = ix.payer.reduce((g, tempId) => {\n            const {addr} = ix.accounts[tempId]\n            const key = idof(ix.accounts[tempId])\n            payerAccts.push(addr)\n            if (dupList.includes(key)) return g\n            dupList.push(key)\n            return [...g, tempId]\n          }, [])\n          const multiAccts = Array.from(new Set(payerAccts))\n          if (multiAccts.length > 1) {\n            throw new Error(\"Payer can not be different accounts\")\n          }\n        }\n      }\n\n      if (ix.accounts[ax.tempId].role.authorizer) {\n        if (last) {\n          // do group replacement\n          authorizations = Array.from(new Set([...authorizations, ax.tempId]))\n        } else {\n          // do 1-1 replacement\n          ix.authorizations = ix.authorizations.map(d =>\n            d === old.tempId ? ax.tempId : d\n          )\n        }\n      }\n    }\n    if (old.tempId != ax.tempId) delete ix.accounts[old.tempId]\n  }\n\n  if (last) {\n    // complete (flatmap) group replacement\n    ix.authorizations = ix.authorizations\n      .map(d => (d === last.tempId ? authorizations : d))\n      .reduce(\n        (prev, curr) =>\n          Array.isArray(curr) ? [...prev, ...curr] : [...prev, curr],\n        []\n      )\n  }\n}\n\nexport async function resolveAccounts(ix) {\n  if (isTransaction(ix)) {\n    if (!Array.isArray(ix.payer)) {\n      log.deprecate({\n        pkg: \"FCL\",\n        subject:\n          '\"ix.payer\" must be an array. Support for ix.payer as a singular',\n        message: \"See changelog for more info.\",\n      })\n    }\n    try {\n      await collectAccounts(ix, Object.values(ix.accounts))\n      await collectAccounts(ix, Object.values(ix.accounts))\n    } catch (error) {\n      console.error(\"=== SAD PANDA ===\\n\\n\", error, \"\\n\\n=== SAD PANDA ===\")\n      throw error\n    }\n  }\n  return ix\n}\n","import {isTransaction} from \"../interaction/interaction.js\"\nimport {sansPrefix} from \"@onflow/util-address\"\nimport {\n  encodeTransactionPayload as encodeInsideMessage,\n  encodeTransactionEnvelope as encodeOutsideMessage,\n} from \"../encode/encode.js\"\nimport {\n  createSignableVoucher,\n  findInsideSigners,\n  findOutsideSigners,\n} from \"./voucher.js\"\n\nexport async function resolveSignatures(ix) {\n  if (isTransaction(ix)) {\n    try {\n      let insideSigners = findInsideSigners(ix)\n      const insidePayload = encodeInsideMessage(prepForEncoding(ix))\n      await Promise.all(insideSigners.map(fetchSignature(ix, insidePayload)))\n\n      let outsideSigners = findOutsideSigners(ix)\n      const outsidePayload = encodeOutsideMessage({\n        ...prepForEncoding(ix),\n        payloadSigs: insideSigners.map(id => ({\n          address: ix.accounts[id].addr,\n          keyId: ix.accounts[id].keyId,\n          sig: ix.accounts[id].signature,\n        })),\n      })\n      await Promise.all(outsideSigners.map(fetchSignature(ix, outsidePayload)))\n    } catch (error) {\n      console.error(\"Signatures\", error, {ix})\n      throw error\n    }\n  }\n  return ix\n}\n\nfunction fetchSignature(ix, payload) {\n  return async function innerFetchSignature(id) {\n    const acct = ix.accounts[id]\n    if (acct.signature != null) return\n    const {signature} = await acct.signingFunction(\n      buildSignable(acct, payload, ix)\n    )\n    ix.accounts[id].signature = signature\n  }\n}\n\nexport function buildSignable(acct, message, ix) {\n  try {\n    return {\n      f_type: \"Signable\",\n      f_vsn: \"1.0.1\",\n      message,\n      addr: sansPrefix(acct.addr),\n      keyId: acct.keyId,\n      roles: acct.role,\n      cadence: ix.message.cadence,\n      args: ix.message.arguments.map(d => ix.arguments[d].asArgument),\n      data: {},\n      interaction: ix,\n      voucher: createSignableVoucher(ix),\n    }\n  } catch (error) {\n    console.error(\"buildSignable\", error)\n    throw error\n  }\n}\n\nfunction prepForEncoding(ix) {\n  const payerAddress = sansPrefix(\n    (Array.isArray(ix.payer) ? ix.accounts[ix.payer[0]] : ix.accounts[ix.payer])\n      .addr\n  )\n  return {\n    cadence: ix.message.cadence,\n    refBlock: ix.message.refBlock || null,\n    computeLimit: ix.message.computeLimit,\n    arguments: ix.message.arguments.map(id => ix.arguments[id].asArgument),\n    proposalKey: {\n      address: sansPrefix(ix.accounts[ix.proposer].addr),\n      keyId: ix.accounts[ix.proposer].keyId,\n      sequenceNum: ix.accounts[ix.proposer].sequenceNum,\n    },\n    payer: payerAddress,\n    authorizers: ix.authorizations\n      .map(cid => sansPrefix(ix.accounts[cid].addr))\n      .reduce((prev, current) => {\n        return prev.find(item => item === current) ? prev : [...prev, current]\n      }, []),\n  }\n}\n","import {get, pipe, Ok, Bad} from \"../interaction/interaction.js\"\n\nexport async function resolveValidators(ix) {\n  const validators = get(ix, \"ix.validators\", [])\n  return pipe(\n    ix,\n    validators.map(cb => ix => cb(ix, {Ok, Bad}))\n  )\n}\n","import {sansPrefix} from \"@onflow/util-address\"\n\nexport async function resolveFinalNormalization(ix) {\n  for (let key of Object.keys(ix.accounts)) {\n    ix.accounts[key].addr = sansPrefix(ix.accounts[key].addr)\n  }\n  return ix\n}\n","import {get, isFn} from \"../interaction/interaction.js\"\nimport {createSignableVoucher} from \"./voucher.js\"\n\nexport async function resolveVoucherIntercept(ix) {\n  const fn = get(ix, \"ix.voucher-intercept\")\n  if (isFn(fn)) {\n    await fn(createSignableVoucher(ix))\n  }\n  return ix\n}\n","import {isTransaction} from \"../interaction/interaction.js\"\nimport {config} from \"@onflow/config\"\nimport * as logger from \"@onflow/util-logger\"\n\nconst DEFAULT_COMPUTE_LIMIT = 100\n\nexport async function resolveComputeLimit(ix) {\n  if (isTransaction(ix)) {\n    ix.message.computeLimit =\n      ix.message.computeLimit || (await config.get(\"fcl.limit\"))\n\n    if (!ix.message.computeLimit) {\n      logger.log.deprecate({\n        pkg: \"FCL/SDK\",\n        subject:\n          \"The built-in default compute limit (DEFAULT_COMPUTE_LIMIT=10)\",\n        transition:\n          \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0009-deprecate-default-compute-limit\",\n      })\n      ix.message.computeLimit = DEFAULT_COMPUTE_LIMIT\n    }\n  }\n  return ix\n}\n","import {pipe, isTransaction} from \"../interaction/interaction.js\"\nimport {config} from \"@onflow/config\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {Buffer} from \"@onflow/rlp\"\nimport {send as defaultSend} from \"@onflow/transport-http\"\nimport * as ixModule from \"../interaction/interaction.js\"\nimport {response} from \"../response/response.js\"\nimport {build} from \"../build/build.js\"\nimport {getBlock} from \"../build/build-get-block.js\"\nimport {getAccount} from \"../build/build-get-account.js\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\n\nimport {resolveCadence} from \"./resolve-cadence.js\"\nimport {resolveArguments} from \"./resolve-arguments.js\"\nimport {resolveAccounts} from \"./resolve-accounts.js\"\nimport {resolveSignatures} from \"./resolve-signatures.js\"\nimport {resolveValidators} from \"./resolve-validators.js\"\nimport {resolveFinalNormalization} from \"./resolve-final-normalization.js\"\nimport {resolveVoucherIntercept} from \"./resolve-voucher-intercept.js\"\nimport {resolveComputeLimit} from \"./resolve-compute-limit.js\"\n\nconst noop = v => v\nconst debug =\n  (key, fn = noop) =>\n  async ix => {\n    const take = (obj, keys = []) => {\n      if (typeof keys === \"string\") keys = keys.split(\" \")\n      keys.reduce((acc, key) => ({...acc, [key]: obj[key]}), {})\n    }\n\n    const accts = ix =>\n      [\n        \"\\nAccounts:\",\n        {\n          proposer: ix.proposer,\n          authorizations: ix.authorizations,\n          payer: ix.payer,\n        },\n        \"\\n\\nDetails:\",\n        ix.accounts,\n      ].filter(Boolean)\n\n    const log = (...msg) => {\n      console.log(`debug[${key}] ---\\n`, ...msg, \"\\n\\n\\n---\")\n    }\n\n    if (await config.get(`debug.${key}`)) await fn(ix, log, accts)\n    return ix\n  }\n\nexport const resolve = pipe([\n  resolveCadence,\n  debug(\"cadence\", (ix, log) => log(ix.message.cadence)),\n  resolveComputeLimit,\n  debug(\"compute limit\", (ix, log) => log(ix.message.computeLimit)),\n  resolveArguments,\n  debug(\"arguments\", (ix, log) => log(ix.message.arguments, ix.message)),\n  resolveAccounts,\n  debug(\"accounts\", (ix, log, accts) => log(...accts(ix))),\n  /* special */ execFetchRef,\n  /* special */ execFetchSequenceNumber,\n  resolveSignatures,\n  debug(\"signatures\", (ix, log, accts) => log(...accts(ix))),\n  resolveFinalNormalization,\n  resolveValidators,\n  resolveVoucherIntercept,\n  debug(\"resolved\", (ix, log) => log(ix)),\n])\n\nasync function execFetchRef(ix) {\n  if (isTransaction(ix) && ix.message.refBlock == null) {\n    const node = await config().get(\"accessNode.api\")\n    const sendFn = await config.first(\n      [\"sdk.transport\", \"sdk.send\"],\n      defaultSend\n    )\n\n    invariant(\n      sendFn,\n      `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n    )\n\n    ix.message.refBlock = (\n      await sendFn(\n        build([getBlock()]),\n        {config, response, Buffer, ix: ixModule},\n        {node}\n      ).then(decode)\n    ).id\n  }\n  return ix\n}\n\nasync function execFetchSequenceNumber(ix) {\n  if (isTransaction(ix)) {\n    var acct = Object.values(ix.accounts).find(a => a.role.proposer)\n    invariant(acct, `Transactions require a proposer`)\n    if (acct.sequenceNum == null) {\n      const node = await config().get(\"accessNode.api\")\n      const sendFn = await config.first(\n        [\"sdk.transport\", \"sdk.send\"],\n        defaultSend\n      )\n\n      invariant(\n        sendFn,\n        `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n      )\n\n      ix.accounts[acct.tempId].sequenceNum = await sendFn(\n        await build([getAccount(acct.addr)]),\n        {config, response, Buffer, ix: ixModule},\n        {node}\n      )\n        .then(decode)\n        .then(acct => acct.keys)\n        .then(keys => keys.find(key => key.index === acct.keyId))\n        .then(key => key.sequenceNumber)\n    }\n  }\n  return ix\n}","import {Ok, Bad} from \"../interaction/interaction.js\"\n\nexport function invariant(...args) {\n  if (args.length > 1) {\n    const [predicate, message] = args\n    return invariant((ix, {Ok, Bad}) => {\n      return predicate ? Ok(ix) : Bad(ix, message)\n    })\n  }\n  const [fn] = args\n  return ix => fn(ix, {Ok, Bad})\n}\n","import {Buffer} from \"@onflow/rlp\"\nimport {send as defaultSend} from \"@onflow/transport-http\"\nimport {interaction, pipe} from \"../interaction/interaction.js\"\nimport * as ixModule from \"../interaction/interaction.js\"\nimport {invariant} from \"../build/build-invariant.js\"\nimport {response} from \"../response/response.js\"\nimport {config} from \"@onflow/config\"\nimport {resolve as defaultResolve} from \"../resolve/resolve.js\"\n\n/**\n * @description - Sends arbitrary scripts, transactions, and requests to Flow\n * @param {Array.<Function>} args - An array of functions that take interaction and return interaction\n * @param {object} opts - Optional parameters\n * @returns {Promise<*>} - A promise that resolves to a response\n */\nexport const send = async (args = [], opts = {}) => {\n  const sendFn = await config.first(\n    [\"sdk.transport\", \"sdk.send\"],\n    opts.send || defaultSend\n  )\n\n  invariant(\n    sendFn,\n    `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n  )\n\n  const resolveFn = await config.first(\n    [\"sdk.resolve\"],\n    opts.resolve || defaultResolve\n  )\n\n  opts.node = opts.node || (await config().get(\"accessNode.api\"))\n\n  if (Array.isArray(args)) args = pipe(interaction(), args)\n  return sendFn(\n    await resolveFn(args),\n    {config, response, ix: ixModule, Buffer},\n    opts\n  )\n}\n","import {decodeResponse} from \"./decode.js\"\nimport {config} from \"@onflow/config\"\n\nexport async function decode(response) {\n  const decodersFromConfig = await config().where(/^decoder\\./)\n  const decoders = Object.entries(decodersFromConfig).map(\n    ([pattern, xform]) => {\n      pattern = `/${pattern.replace(/^decoder\\./, \"\")}$/`\n      return [pattern, xform]\n    }\n  )\n\n  return decodeResponse(response, Object.fromEntries(decoders))\n}\n","import {withPrefix, sansPrefix} from \"@onflow/util-address\"\nimport {\n  encodeTransactionPayload,\n  encodeTransactionEnvelope,\n} from \"../encode/encode.js\"\n\nconst findPayloadSigners = voucher => {\n  // Payload Signers Are: (authorizers + proposer) - payer\n  let payload = new Set(voucher.authorizers)\n  payload.add(voucher.proposalKey.address)\n  payload.delete(voucher.payer)\n  return Array.from(payload).map(withPrefix)\n}\n\nconst findEnvelopeSigners = voucher => {\n  // Envelope Signers Are: (payer)\n  let envelope = new Set([voucher.payer])\n  return Array.from(envelope).map(withPrefix)\n}\n\nexport class UnableToDetermineMessageEncodingTypeForSignerAddress extends Error {\n  constructor(signerAddress) {\n    const msg = `\n        Encode Message From Signable Error: Unable to determine message encoding for signer addresss: ${signerAddress}. \n        Please ensure the address: ${signerAddress} is intended to sign the given transaction as specified by the transaction signable.\n      `.trim()\n    super(msg)\n    this.name = \"Unable To Determine Message Encoding For Signer Addresss\"\n  }\n}\n\nexport const encodeMessageFromSignable = (signable, signerAddress) => {\n  let payloadSigners = findPayloadSigners(signable.voucher)\n  let envelopeSigners = findEnvelopeSigners(signable.voucher)\n\n  const isPayloadSigner = payloadSigners.includes(withPrefix(signerAddress))\n  const isEnvelopeSigner = envelopeSigners.includes(withPrefix(signerAddress))\n\n  if (!isPayloadSigner && !isEnvelopeSigner) {\n    throw new UnableToDetermineMessageEncodingTypeForSignerAddress(\n      signerAddress\n    )\n  }\n\n  const message = {\n    cadence: signable.voucher.cadence,\n    refBlock: signable.voucher.refBlock,\n    computeLimit: signable.voucher.computeLimit,\n    arguments: signable.voucher.arguments,\n    proposalKey: {\n      ...signable.voucher.proposalKey,\n      address: sansPrefix(signable.voucher.proposalKey.address),\n    },\n    payer: sansPrefix(signable.voucher.payer),\n    authorizers: signable.voucher.authorizers.map(sansPrefix),\n    payloadSigs: signable.voucher.payloadSigs.map(ps => ({\n      ...ps,\n      address: sansPrefix(ps.address),\n    })),\n  }\n\n  return isPayloadSigner\n    ? encodeTransactionPayload(message)\n    : encodeTransactionEnvelope(message)\n}\n","import {update} from \"../interaction/interaction.js\"\n\nexport function validator(cb) {\n  return update(\"ix.validators\", validators =>\n    Array.isArray(validators) ? validators.push(cb) : [cb]\n  )\n}\n","import {pipe} from \"../interaction/interaction.js\"\nimport {validator} from \"./build-validator.js\"\n\n/**\n * @description - A builder function that returns a partial interaction to a block at a specific height\n * @param {number} height - The height of the block to get\n * @returns {object} - A partial interaction object\n */\nexport function atBlockHeight(height) {\n  return pipe([\n    ix => {\n      ix.block.height = height\n      return ix\n    },\n    validator(ix => {\n      if (typeof ix.block.isSealed === \"boolean\")\n        throw new Error(\"Unable to specify both block height and isSealed.\")\n      if (ix.block.id)\n        throw new Error(\"Unable to specify both block height and block id.\")\n      return ix\n    }),\n  ])\n}\n","import {isGetAccount, pipe, Ok} from \"../interaction/interaction.js\"\nimport {validator} from \"./build-validator.js\"\n\nexport function atBlockId(id) {\n  return pipe([\n    ix => {\n      ix.block.id = id\n      return Ok(ix)\n    },\n    validator((ix, {Ok, Bad}) => {\n      if (isGetAccount(ix))\n        return Bad(\n          ix,\n          \"Unable to specify a block id with a Get Account interaction.\"\n        )\n      if (typeof ix.block.isSealed === \"boolean\")\n        return Bad(ix, \"Unable to specify both block id and isSealed.\")\n      if (ix.block.height)\n        return Bad(ix, \"Unable to specify both block id and block height.\")\n      return Ok(ix)\n    }),\n  ])\n}\n","import {atBlockHeight} from \"../build/build-at-block-height.js\"\nimport {atBlockId} from \"../build/build-at-block-id.js\"\nimport {getAccount} from \"../build/build-get-account.js\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\nimport {send} from \"../send/send.js\"\n\n/**\n * @typedef {import(\"@onflow/typedefs\").Account} Account\n */\n\n/**\n * @description  Returns the details of an account from their public address\n * @param {string} address - Address of the account\n * @param {object} [queryOptions] - Query parameters\n * @param {number} [queryOptions.height] - Block height to query\n * @param {string} [queryOptions.id] - Block ID to query\n * @param {object} [opts] - Optional parameters\n * @returns {Promise<Account>} - A promise that resolves to an account response\n */\nexport function account(address, {height, id} = {}, opts) {\n  invariant(\n    !(id && height),\n    `Method: account -- Cannot pass \"id\" and \"height\" simultaneously`\n  )\n\n  // Get account by ID\n  if (id) return send([getAccount(address), atBlockId(id)], opts).then(decode)\n\n  // Get account by height\n  if (height)\n    return send([getAccount(address), atBlockHeight(height)], opts).then(decode)\n\n  return send([getAccount(address)], opts).then(decode)\n}\n","import {send} from \"../send/send.js\"\nimport {getBlock} from \"../build/build-get-block\"\nimport {atBlockHeight} from \"../build/build-at-block-height.js\"\nimport {atBlockId} from \"../build/build-at-block-id.js\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\nimport {invariant} from \"@onflow/util-invariant\"\n\n/**\n * @typedef {import(\"@onflow/typedefs\").Block} Block\n */\n\n/**\n * @description Returns the latest block (optionally sealed or not), by id, or by height\n * @param {object} [queryOptions] - Query parameters\n * @param {boolean} [queryOptions.sealed=false] - Whether to query for a sealed block\n * @param {number} [queryOptions.height] - Block height to query\n * @param {string} [queryOptions.id] - Block ID to query\n * @param {object} [opts] - Optional parameters\n * @returns {Promise<Block>} - A promise that resolves to a block response\n */\nexport function block({sealed = false, id, height} = {}, opts = {}) {\n  invariant(\n    !((sealed && id) || (sealed && height)),\n    `Method: block -- Cannot pass \"sealed\" with \"id\" or \"height\"`\n  )\n\n  invariant(\n    !(id && height),\n    `Method: block -- Cannot pass \"id\" and \"height\" simultaneously`\n  )\n\n  // Get block by ID\n  if (id) return send([getBlock(), atBlockId(id)], opts).then(decode)\n\n  // Get block by height\n  if (height)\n    return send([getBlock(), atBlockHeight(height)], opts).then(decode)\n\n  // Get latest block\n  return send([getBlock(sealed)], opts).then(decode)\n}\n","import {pipe, prepAccount, AUTHORIZER} from \"../interaction/interaction.js\"\n\nexport function authorizations(ax = []) {\n  return pipe(\n    ax.map(authz => {\n      return prepAccount(authz, {role: AUTHORIZER})\n    })\n  )\n}\n\nexport function authorization(addr, signingFunction, keyId, sequenceNum) {\n  return {addr, signingFunction, keyId, sequenceNum}\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\nimport * as logger from \"@onflow/util-logger\"\n\nexport function getEvents(eventType, start, end) {\n  if (typeof start !== \"undefined\" || typeof end !== \"undefined\") {\n    logger.log.deprecate({\n      pkg: \"FCL/SDK\",\n      subject: \"Passing a start and end into getEvents\",\n      transition:\n        \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0005-deprecate-start-end-get-events-builder\",\n    })\n  }\n\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.start = start\n      ix.events.end = end\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\n\n/**\n * @description - A builder function that returns all instances of a particular event (by name) within a height range\n * NOTE:\n * - The block range provided must be from the current spork.\n * - The block range provided must be 250 blocks or lower per request.\n * @param {string} eventName - The name of the event to get\n * @param {number} fromBlockHeight - The height of the block to start looking for events (inclusive)\n * @param {number} toBlockHeight - The height of the block to stop looking for events (inclusive)\n * @returns {object} - An interaction object\n */\nexport function getEventsAtBlockHeightRange(eventName, fromBlockHeight, toBlockHeight) {\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventName\n      ix.events.start = fromBlockHeight\n      ix.events.end = toBlockHeight\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\n\n/**\n * @description - A builder function that returns all instances of a particular event (by name) within a set of blocks, specified by block ids\n * NOTE:\n * - The block range provided must be from the current spork.\n * @param {string} eventName - The name of the event to get\n * @param {number[]} blockIds - The ids of the blocks to look for events\n * @returns {object} - An interaction object\n */\nexport function getEventsAtBlockIds(eventName, blockIds = []) {\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventName\n      ix.events.blockIds = blockIds\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetBlockHeader} from \"../interaction/interaction.js\"\n\n/**\n * @description - A builder function that returns the interaction to get a block header\n * @param {boolean} [isSealed] - Whether or not the block should be sealed\n * @returns {object} - An interaction object\n */\nexport function getBlockHeader(isSealed = null) {\n  return pipe([\n    makeGetBlockHeader,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, makeGetCollection} from \"../interaction/interaction.js\"\n\n/**\n * @description - A builder function that returns all a collection containing a list of transaction ids by its collection id\n * NOTE:\n * - The block range provided must be from the current spork. All events emitted during past sporks is current unavailable.\n * @param {string} [id] - The id of the collection to get\n * @returns {object} - An interaction object\n */\nexport function getCollection(id = null) {\n  return pipe([\n    makeGetCollection,\n    ix => {\n      ix.collection.id = id\n      return ix\n    },\n  ])\n}\n","import {pipe, Ok, makeGetTransactionStatus} from \"../interaction/interaction.js\"\n\n/**\n * @description - A builder function that returns the status of transaction\n * NOTE: The transactionID provided must be from the current spork.\n * @param {string} transactionId - The id of the transaction to get status\n * @returns {object} - An interaction object\n */\nexport function getTransactionStatus(transactionId) {\n  return pipe([\n    makeGetTransactionStatus,\n    ix => {\n      ix.transaction.id = transactionId\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetTransaction} from \"../interaction/interaction.js\"\n\n/**\n * @description - A builder function that returns a transaction\n * NOTE: The transactionID provided must be from the current spork.\n * @param {string} transactionId - The id of the transaction to get\n * @returns {object} - An interaction object\n */\nexport function getTransaction(transactionId) {\n  return pipe([\n    makeGetTransaction,\n    ix => {\n      ix.transaction.id = transactionId\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetNetworkParameters} from \"../interaction/interaction.js\"\n\nexport function getNetworkParameters() {\n  return pipe([\n    makeGetNetworkParameters,\n    ix => {\n      return Ok(ix)\n    },\n  ])\n}\n","export function limit(computeLimit) {\n  return ix => {\n    ix.message.computeLimit = computeLimit\n    return ix\n  }\n}\n","import {pipe, makeArgument} from \"../interaction/interaction.js\"\n\n/**\n * @description - A utility builder to be used with other builders to pass in arguments with a value and supported type\n * @param {Array.<*>} ax - An array of arguments\n * @returns {object} - An interaction object\n */\nexport function args(ax = []) {\n  return pipe(ax.map(makeArgument))\n}\n\n/**\n * @description - A utility builder to be used with fcl.args[...] to create FCL supported arguments for interactions\n * @param {any} value - The value of the argument\n * @param {Function} xform - A function to transform the value\n * @returns {object} - An argument object\n */\nexport function arg(value, xform) {\n  return {value, xform}\n}\n","import {prepAccount, PROPOSER} from \"../interaction/interaction.js\"\n\nexport async function proposer(authz) {\n  return prepAccount(authz, {role: PROPOSER})\n}\n","import {prepAccount, PAYER} from \"../interaction/interaction.js\"\n\nexport async function payer(authz) {\n  return prepAccount(authz, {role: PAYER})\n}\n","import {makePing} from \"../interaction/interaction.js\"\n\nexport function ping() {\n  return makePing\n}\n","import {pipe, Ok} from \"../interaction/interaction.js\"\n\nexport function ref(refBlock) {\n  return pipe([\n    ix => {\n      ix.message.refBlock = refBlock\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, put, makeScript} from \"../interaction/interaction.js\"\nimport {template} from \"@onflow/util-template\"\n\nexport function script(...args) {\n  return pipe([makeScript, put(\"ix.cadence\", template(...args))])\n}\n","import {pipe, put, Ok, makeTransaction} from \"../interaction/interaction.js\"\nimport {template} from \"@onflow/util-template\"\n\nconst DEFAULT_SCRIPT_ACCOUNTS = []\nconst DEFUALT_REF = null\n\n/**\n * @description - A template builder to use a Cadence transaction for an interaction\n * @param {...*} args - The arguments to pass\n * @returns {object} - An interaction object\n */\nexport function transaction(...args) {\n  return pipe([\n    makeTransaction,\n    put(\"ix.cadence\", template(...args)),\n    ix => {\n      ix.message.refBlock = ix.message.refBlock || DEFUALT_REF\n      ix.authorizations = ix.authorizations || DEFAULT_SCRIPT_ACCOUNTS\n      return Ok(ix)\n    },\n  ])\n}\n","import {put} from \"../interaction/interaction.js\"\n\nexport function voucherIntercept(fn) {\n  return put(\"ix.voucher-intercept\", fn)\n}\n","import {isTransaction, Ok} from \"../interaction/interaction.js\"\nimport * as ixModule from \"../interaction/interaction.js\"\nimport {response as responseModule} from \"../response/response.js\"\nimport {config} from \"@onflow/config\"\nimport {decodeResponse} from \"../decode/decode.js\"\nimport {getAccount} from \"../build/build-get-account.js\"\nimport {build} from \"../build/build.js\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {Buffer} from \"@onflow/rlp\"\nimport {send as defaultSend} from \"@onflow/transport-http\"\n\nexport const resolveProposerSequenceNumber =\n  ({node}) =>\n  async ix => {\n    if (!isTransaction(ix)) return Ok(ix)\n    if (ix.accounts[ix.proposer].sequenceNum) return Ok(ix)\n\n    const sendFn = await config.first(\n      [\"sdk.transport\", \"sdk.send\"],\n      defaultSend\n    )\n\n    invariant(\n      sendFn,\n      `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n    )\n\n    const response = await sendFn(\n      await build([getAccount(ix.accounts[ix.proposer].addr)]),\n      {config, response: responseModule, Buffer, ix: ixModule},\n      {node}\n    )\n    const decoded = await decodeResponse(response)\n\n    ix.accounts[ix.proposer].sequenceNum =\n      decoded.keys[ix.accounts[ix.proposer].keyId].sequenceNumber\n\n    return Ok(ix)\n  }\n","import {\n  isTransaction,\n  Ok,\n  interaction,\n  pipe,\n} from \"../interaction/interaction.js\"\nimport * as ixModule from \"../interaction/interaction.js\"\nimport {response} from \"../response/response.js\"\nimport {config} from \"@onflow/config\"\nimport {decodeResponse} from \"../decode/decode.js\"\nimport {getBlock} from \"../build/build-get-block.js\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {Buffer} from \"@onflow/rlp\"\nimport {send as defaultSend} from \"@onflow/transport-http\"\n\nasync function getRefId(opts) {\n  const node = await config().get(\"accessNode.api\")\n  const sendFn = await config.first([\"sdk.transport\", \"sdk.send\"], defaultSend)\n\n  invariant(\n    sendFn,\n    `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n  )\n\n  var ix\n  ix = await pipe(interaction(), [getBlock()])\n  ix = await sendFn(ix, {config, response, Buffer, ix: ixModule}, {node})\n  ix = await decodeResponse(ix)\n  return ix.id\n}\n\nexport function resolveRefBlockId(opts) {\n  return async ix => {\n    if (!isTransaction(ix)) return Ok(ix)\n    if (ix.message.refBlock) return Ok(ix)\n\n    ix.message.refBlock = await getRefId(opts)\n\n    return Ok(ix)\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isGetAccount, isGetBlock} from \"../interaction/interaction\"\n\nexport function mockAccountResponse(ix, numberOfKeys = 5) {\n  // prettier-ignore\n  invariant(ix.account, \"mockAccountResponse(ix) -- ix.account is missing\", ix)\n  // prettier-ignore\n  invariant( ix.account.addr, \"mockAccountResponse(ix) -- ix.account.addr is missing\", ix)\n\n  const address = ix.account.addr\n\n  return {\n    account: {\n      addr: address,\n      keys: Array.from({length: numberOfKeys}, (_, i) => ({\n        index: i,\n        sequenceNumber: 42,\n      })),\n    },\n  }\n}\n\nexport function mockGetBlockResponse(ix) {\n  return {\n    tag: \"GET_BLOCK\",\n    block: {\n      id: \"32\",\n    },\n  }\n}\n\nconst identity = v => v\n\nexport function mockSend(fallback = identity) {\n  return async function execSend(ix) {\n    ix = await ix\n    switch (true) {\n      case isGetAccount(ix):\n        return mockAccountResponse(ix)\n\n      case isGetBlock(ix):\n        return mockGetBlockResponse(ix)\n\n      default:\n        return fallback(ix)\n    }\n  }\n}\n","import {withPrefix} from \"@onflow/util-address\"\n\nexport const idof = acct => `${withPrefix(acct.addr)}-${acct.keyId}`\n\nexport function sig(opts) {\n  return [\"SIGNATURE\", opts.addr, opts.keyId].join(\".\")\n}\n\nexport function authzFn(opts = {}) {\n  return function (account) {\n    const acct = {\n      ...account,\n      ...opts,\n      signingFunction:\n        opts.signingFunction ||\n        account.signingFunction ||\n        fallbackSigningFunction,\n    }\n\n    return acct\n\n    function fallbackSigningFunction(signable) {\n      return {\n        addr: acct.addr,\n        keyId: acct.keyId,\n        signature: sig(acct),\n      }\n    }\n  }\n}\n\nexport function authzResolve(opts = {}) {\n  return function (account) {\n    const {tempId, ...rest} = opts\n    return {\n      ...account,\n      tempId: tempId || \"WITH_RESOLVE\",\n      resolve: authzFn(rest),\n    }\n  }\n}\n\nconst ROLE = {proposer: false, authorizer: false, payer: false}\nconst noop = () => {}\n\nexport function authzResolveMany(opts = {}) {\n  return function (account) {\n    const tempId = opts.tempId || \"AUTHZ_RESOLVE_MANY\"\n    return {\n      ...account,\n      tempId,\n      resolve: () =>\n        [\n          opts.proposer &&\n            authzFn(opts.proposer)({role: {...ROLE, proposer: true}}),\n          ...opts.authorizations\n            .map(authzFn)\n            .map(d => d({role: {...ROLE, authorizer: true}})),\n          opts.payer && authzFn(opts.payer)({role: {...ROLE, payer: true}}),\n        ].filter(Boolean),\n    }\n  }\n}\n","import {build} from \"../build/build\"\nimport {resolve} from \"../resolve/resolve\"\nimport {ref} from \"../build/build-ref\"\n\nexport const run = (fns = []) => build([ref(\"123\"), ...fns]).then(resolve)\n","export const VERSION = PACKAGE_CURRENT_VERSION || \"TESTVERSION\"\n","import * as logger from \"@onflow/util-logger\"\n// Base\nexport {build} from \"./build/build.js\"\nexport {resolve} from \"./resolve/resolve.js\"\nexport {send} from \"./send/send.js\"\nexport {decode} from \"./decode/sdk-decode.js\"\nexport {\n  encodeTransactionPayload,\n  encodeTransactionEnvelope,\n  encodeTxIdFromVoucher,\n} from \"./encode/encode\"\n// Utils\nexport {\n  interaction,\n  isOk,\n  isBad,\n  why,\n  pipe,\n  get,\n  put,\n  update,\n  destroy,\n  isUnknown,\n  isScript,\n  isTransaction,\n  isGetTransaction,\n  isGetTransactionStatus,\n  isGetAccount,\n  isGetEvents,\n  isPing,\n  isGetBlock,\n  isGetBlockHeader,\n  isGetCollection,\n  isGetNetworkParameters,\n} from \"./interaction/interaction.js\"\nexport {createSignableVoucher, voucherToTxId} from \"./resolve/voucher.js\"\nexport {encodeMessageFromSignable} from \"./wallet-utils/encode-signable.js\"\nexport {template as cadence} from \"@onflow/util-template\"\nexport {template as cdc} from \"@onflow/util-template\"\n\n// Helpers\nexport {account} from \"./account/account.js\"\nexport {block} from \"./block/block.js\"\n\n// Builders\nexport {authorizations, authorization} from \"./build/build-authorizations.js\"\nexport {atBlockHeight} from \"./build/build-at-block-height.js\"\nexport {atBlockId} from \"./build/build-at-block-id.js\"\nexport {getAccount} from \"./build/build-get-account.js\"\nexport {getEvents} from \"./build/build-get-events.js\"\nexport {getEventsAtBlockHeightRange} from \"./build/build-get-events-at-block-height-range.js\"\nexport {getEventsAtBlockIds} from \"./build/build-get-events-at-block-ids\"\nexport {getBlock} from \"./build/build-get-block.js\"\nexport {getBlockHeader} from \"./build/build-get-block-header.js\"\nexport {getCollection} from \"./build/build-get-collection\"\nexport {getTransactionStatus} from \"./build/build-get-transaction-status.js\"\nexport {getTransaction} from \"./build/build-get-transaction.js\"\nexport {getNetworkParameters} from \"./build/build-get-network-parameters.js\"\nexport {limit} from \"./build/build-limit.js\"\nexport {args, arg} from \"./build/build-arguments.js\"\nexport {proposer} from \"./build/build-proposer.js\"\nexport {payer} from \"./build/build-payer.js\"\nexport {ping} from \"./build/build-ping.js\"\nexport {ref} from \"./build/build-ref.js\"\nexport {script} from \"./build/build-script.js\"\nexport {transaction} from \"./build/build-transaction.js\"\nexport {validator} from \"./build/build-validator.js\"\nexport {invariant} from \"./build/build-invariant.js\"\nexport {voucherIntercept} from \"./build/build-voucher-intercept.js\"\n\n// Resolvers\nexport {resolveCadence} from \"./resolve/resolve-cadence.js\"\nexport {resolveFinalNormalization} from \"./resolve/resolve-final-normalization\"\nexport {resolveProposerSequenceNumber} from \"./resolve/resolve-proposer-sequence-number\"\nexport {resolveArguments} from \"./resolve/resolve-arguments.js\"\nexport {resolveAccounts} from \"./resolve/resolve-accounts.js\"\nexport {response} from \"./response/response.js\"\nexport {resolveSignatures} from \"./resolve/resolve-signatures.js\"\nexport {resolveValidators} from \"./resolve/resolve-validators.js\"\nexport {resolveRefBlockId} from \"./resolve/resolve-ref-block-id.js\"\nexport {resolveVoucherIntercept} from \"./resolve/resolve-voucher-intercept.js\"\n\nexport {config} from \"@onflow/config\"\n\n// Deprecated\nexport const params = params =>\n  logger.log.deprecate({\n    pkg: \"FCL/SDK\",\n    message: `The params builder has been removed from the Flow JS-SDK/FCL.`,\n    transition:\n      \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params\",\n    level: logger.LEVELS.error,\n  })\nexport const param = params =>\n  logger.log.deprecate({\n    pkg: \"FCL/SDK\",\n    message: `The param builder has been removed from the Flow JS-SDK/FCL.`,\n    transition:\n      \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params\",\n    level: logger.LEVELS.error,\n  })\n\nimport * as TestUtils from \"./test-utils\"\nexport {TestUtils}\n\nexport {VERSION} from \"./VERSION\""],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}